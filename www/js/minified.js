/***************************
File generated by shrinker.ch
DateTime: 2017-08-17, 03:07:29
File list:
* jquery-easing.js
* bootstrap.js
* jquery-validator.js
* progress-bar.js
* chart-bundle.js
* riot.js
* slick-slider.js
* riot-route.js
* riot.js
* froala-editor.js
*****************************/
jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(d,g,e,a,c){return jQuery.easing[jQuery.easing.def](d,g,e,a,c)},easeInQuad:function(d,g,e,a,c){return a*(g/=c)*g+e},easeOutQuad:function(d,g,e,a,c){return-a*(g/=c)*(g-2)+e},easeInOutQuad:function(d,g,e,a,c){if((g/=c/2)<1)return a/2*g*g+e;return-a/2*(--g*(g-2)-1)+e},easeInCubic:function(d,g,e,a,c){return a*(g/=c)*g*g+e},easeOutCubic:function(d,g,e,a,c){return a*((g=g/c-1)*g*g+1)+e},easeInOutCubic:function(d,g,e,a,c){if((g/=c/2)<1)return a/
2*g*g*g+e;return a/2*((g-=2)*g*g+2)+e},easeInQuart:function(d,g,e,a,c){return a*(g/=c)*g*g*g+e},easeOutQuart:function(d,g,e,a,c){return-a*((g=g/c-1)*g*g*g-1)+e},easeInOutQuart:function(d,g,e,a,c){if((g/=c/2)<1)return a/2*g*g*g*g+e;return-a/2*((g-=2)*g*g*g-2)+e},easeInQuint:function(d,g,e,a,c){return a*(g/=c)*g*g*g*g+e},easeOutQuint:function(d,g,e,a,c){return a*((g=g/c-1)*g*g*g*g+1)+e},easeInOutQuint:function(d,g,e,a,c){if((g/=c/2)<1)return a/2*g*g*g*g*g+e;return a/2*((g-=2)*g*g*g*g+2)+e},easeInSine:function(d,
g,e,a,c){return-a*Math.cos(g/c*(Math.PI/2))+a+e},easeOutSine:function(d,g,e,a,c){return a*Math.sin(g/c*(Math.PI/2))+e},easeInOutSine:function(d,g,e,a,c){return-a/2*(Math.cos(Math.PI*g/c)-1)+e},easeInExpo:function(d,g,e,a,c){return g==0?e:a*Math.pow(2,10*(g/c-1))+e},easeOutExpo:function(d,g,e,a,c){return g==c?e+a:a*(-Math.pow(2,-10*g/c)+1)+e},easeInOutExpo:function(d,g,e,a,c){if(g==0)return e;if(g==c)return e+a;if((g/=c/2)<1)return a/2*Math.pow(2,10*(g-1))+e;return a/2*(-Math.pow(2,-10*--g)+2)+e},
easeInCirc:function(d,g,e,a,c){return-a*(Math.sqrt(1-(g/=c)*g)-1)+e},easeOutCirc:function(d,g,e,a,c){return a*Math.sqrt(1-(g=g/c-1)*g)+e},easeInOutCirc:function(d,g,e,a,c){if((g/=c/2)<1)return-a/2*(Math.sqrt(1-g*g)-1)+e;return a/2*(Math.sqrt(1-(g-=2)*g)+1)+e},easeInElastic:function(d,g,e,a,c){var b=0,f=a;if(g==0)return e;if((g/=c)==1)return e+a;b||(b=c*0.3);if(f<Math.abs(a)){f=a;d=b/4}else d=b/(2*Math.PI)*Math.asin(a/f);return-(f*Math.pow(2,10*(g-=1))*Math.sin((g*c-d)*2*Math.PI/b))+e},easeOutElastic:function(d,
g,e,a,c){var b=0,f=a;if(g==0)return e;if((g/=c)==1)return e+a;b||(b=c*0.3);if(f<Math.abs(a)){f=a;d=b/4}else d=b/(2*Math.PI)*Math.asin(a/f);return f*Math.pow(2,-10*g)*Math.sin((g*c-d)*2*Math.PI/b)+a+e},easeInOutElastic:function(d,g,e,a,c){var b=0,f=a;if(g==0)return e;if((g/=c/2)==2)return e+a;b||(b=c*0.3*1.5);if(f<Math.abs(a)){f=a;d=b/4}else d=b/(2*Math.PI)*Math.asin(a/f);if(g<1)return-0.5*f*Math.pow(2,10*(g-=1))*Math.sin((g*c-d)*2*Math.PI/b)+e;return f*Math.pow(2,-10*(g-=1))*Math.sin((g*c-d)*2*Math.PI/
b)*0.5+a+e},easeInBack:function(d,g,e,a,c,b){if(b==undefined)b=1.70158;return a*(g/=c)*g*((b+1)*g-b)+e},easeOutBack:function(d,g,e,a,c,b){if(b==undefined)b=1.70158;return a*((g=g/c-1)*g*((b+1)*g+b)+1)+e},easeInOutBack:function(d,g,e,a,c,b){if(b==undefined)b=1.70158;if((g/=c/2)<1)return a/2*g*g*(((b*=1.525)+1)*g-b)+e;return a/2*((g-=2)*g*(((b*=1.525)+1)*g+b)+2)+e},easeInBounce:function(d,g,e,a,c){return a-jQuery.easing.easeOutBounce(d,c-g,0,a,c)+e},easeOutBounce:function(d,g,e,a,c){return(g/=c)<1/
2.75?a*7.5625*g*g+e:g<2/2.75?a*(7.5625*(g-=1.5/2.75)*g+0.75)+e:g<2.5/2.75?a*(7.5625*(g-=2.25/2.75)*g+0.9375)+e:a*(7.5625*(g-=2.625/2.75)*g+0.984375)+e},easeInOutBounce:function(d,g,e,a,c){if(g<c/2)return jQuery.easing.easeInBounce(d,g*2,0,a,c)*0.5+e;return jQuery.easing.easeOutBounce(d,g*2-c,0,a,c)*0.5+a*0.5+e}});if(typeof jQuery==="undefined")throw Error("Bootstrap's JavaScript requires jQuery");
(function(d){d=d.fn.jquery.split(" ")[0].split(".");if(d[0]<2&&d[1]<9||d[0]==1&&d[1]==9&&d[2]<1||d[0]>3)throw Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4");})(jQuery);
(function(d){function g(){var e=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in a)if(e.style[c]!==undefined)return{end:a[c]};return false}d.fn.emulateTransitionEnd=function(e){var a=false,c=this;d(this).one("bsTransitionEnd",function(){a=true});setTimeout(function(){a||d(c).trigger(d.support.transition.end)},e);return this};d(function(){d.support.transition=
g();if(d.support.transition)d.event.special.bsTransitionEnd={bindType:d.support.transition.end,delegateType:d.support.transition.end,handle:function(e){if(d(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})})(jQuery);
(function(d){var g=function(a){d(a).on("click",'[data-dismiss="alert"]',this.close)};g.VERSION="3.3.7";g.TRANSITION_DURATION=150;g.prototype.close=function(a){function c(){h.detach().trigger("closed.bs.alert").remove()}var b=d(this),f=b.attr("data-target");f||(f=(f=b.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));var h=d(f==="#"?[]:f);a&&a.preventDefault();h.length||(h=b.closest(".alert"));h.trigger(a=d.Event("close.bs.alert"));if(!a.isDefaultPrevented()){h.removeClass("in");d.support.transition&&
h.hasClass("fade")?h.one("bsTransitionEnd",c).emulateTransitionEnd(g.TRANSITION_DURATION):c()}};var e=d.fn.alert;d.fn.alert=function(a){return this.each(function(){var c=d(this),b=c.data("bs.alert");b||c.data("bs.alert",b=new g(this));typeof a=="string"&&b[a].call(c)})};d.fn.alert.Constructor=g;d.fn.alert.noConflict=function(){d.fn.alert=e;return this};d(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',g.prototype.close)})(jQuery);
(function(d){function g(c){return this.each(function(){var b=d(this),f=b.data("bs.button"),h=typeof c=="object"&&c;f||b.data("bs.button",f=new e(this,h));if(c=="toggle")f.toggle();else c&&f.setState(c)})}var e=function(c,b){this.$element=d(c);this.options=d.extend({},e.DEFAULTS,b);this.isLoading=false};e.VERSION="3.3.7";e.DEFAULTS={loadingText:"loading..."};e.prototype.setState=function(c){var b=this.$element,f=b.is("input")?"val":"html",h=b.data();c+="Text";h.resetText==null&&b.data("resetText",
b[f]());setTimeout(d.proxy(function(){b[f](h[c]==null?this.options[c]:h[c]);if(c=="loadingText"){this.isLoading=true;b.addClass("disabled").attr("disabled","disabled").prop("disabled",true)}else if(this.isLoading){this.isLoading=false;b.removeClass("disabled").removeAttr("disabled").prop("disabled",false)}},this),0)};e.prototype.toggle=function(){var c=true,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var f=this.$element.find("input");if(f.prop("type")=="radio"){if(f.prop("checked"))c=
false;b.find(".active").removeClass("active");this.$element.addClass("active")}else if(f.prop("type")=="checkbox"){if(f.prop("checked")!==this.$element.hasClass("active"))c=false;this.$element.toggleClass("active")}f.prop("checked",this.$element.hasClass("active"));c&&f.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};var a=d.fn.button;d.fn.button=g;d.fn.button.Constructor=e;d.fn.button.noConflict=function(){d.fn.button=
a;return this};d(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var b=d(c.target).closest(".btn");g.call(b,"toggle");if(!d(c.target).is('input[type="radio"], input[type="checkbox"]')){c.preventDefault();b.is("input,button")?b.trigger("focus"):b.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(c){d(c.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(c.type))})})(jQuery);
(function(d){function g(b){return this.each(function(){var f=d(this),h=f.data("bs.carousel"),i=d.extend({},e.DEFAULTS,f.data(),typeof b=="object"&&b),j=typeof b=="string"?b:i.slide;h||f.data("bs.carousel",h=new e(this,i));if(typeof b=="number")h.to(b);else if(j)h[j]();else i.interval&&h.pause().cycle()})}var e=function(b,f){this.$element=d(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=f;this.$items=this.$active=this.interval=this.sliding=this.paused=null;this.options.keyboard&&
this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))};e.VERSION="3.3.7";e.TRANSITION_DURATION=600;e.DEFAULTS={interval:5E3,pause:"hover",wrap:true,keyboard:true};e.prototype.keydown=function(b){if(!/input|textarea/i.test(b.target.tagName)){switch(b.which){case 37:this.prev();break;case 39:this.next();
break;default:return}b.preventDefault()}};e.prototype.cycle=function(b){b||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval));return this};e.prototype.getItemIndex=function(b){this.$items=b.parent().children(".item");return this.$items.index(b||this.$active)};e.prototype.getItemForDirection=function(b,f){var h=this.getItemIndex(f);if((b=="prev"&&h===0||b=="next"&&h==this.$items.length-
1)&&!this.options.wrap)return f;return this.$items.eq((h+(b=="prev"?-1:1))%this.$items.length)};e.prototype.to=function(b){var f=this,h=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(b>this.$items.length-1||b<0)){if(this.sliding)return this.$element.one("slid.bs.carousel",function(){f.to(b)});if(h==b)return this.pause().cycle();return this.slide(b>h?"next":"prev",this.$items.eq(b))}};e.prototype.pause=function(b){b||(this.paused=true);if(this.$element.find(".next, .prev").length&&
d.support.transition){this.$element.trigger(d.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};e.prototype.next=function(){if(!this.sliding)return this.slide("next")};e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};e.prototype.slide=function(b,f){var h=this.$element.find(".item.active"),i=f||this.getItemForDirection(b,h),j=this.interval,l=b=="next"?"left":"right",m=this;if(i.hasClass("active"))return this.sliding=false;var s=
i[0],x=d.Event("slide.bs.carousel",{relatedTarget:s,direction:l});this.$element.trigger(x);if(!x.isDefaultPrevented()){this.sliding=true;j&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");(x=d(this.$indicators.children()[this.getItemIndex(i)]))&&x.addClass("active")}var u=d.Event("slid.bs.carousel",{relatedTarget:s,direction:l});if(d.support.transition&&this.$element.hasClass("slide")){i.addClass(b);h.addClass(l);i.addClass(l);h.one("bsTransitionEnd",
function(){i.removeClass([b,l].join(" ")).addClass("active");h.removeClass(["active",l].join(" "));m.sliding=false;setTimeout(function(){m.$element.trigger(u)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)}else{h.removeClass("active");i.addClass("active");this.sliding=false;this.$element.trigger(u)}j&&this.cycle();return this}};var a=d.fn.carousel;d.fn.carousel=g;d.fn.carousel.Constructor=e;d.fn.carousel.noConflict=function(){d.fn.carousel=a;return this};var c=function(b){var f,h=d(this),i=d(h.attr("data-target")||
(f=h.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){f=d.extend({},i.data(),h.data());if(h=h.attr("data-slide-to"))f.interval=false;g.call(i,f);h&&i.data("bs.carousel").to(h);b.preventDefault()}};d(document).on("click.bs.carousel.data-api","[data-slide]",c).on("click.bs.carousel.data-api","[data-slide-to]",c);d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var b=d(this);g.call(b,b.data())})})})(jQuery);
(function(d){function g(b){var f;b=b.attr("data-target")||(f=b.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"");return d(b)}function e(b){return this.each(function(){var f=d(this),h=f.data("bs.collapse"),i=d.extend({},a.DEFAULTS,f.data(),typeof b=="object"&&b);if(!h&&i.toggle&&/show|hide/.test(b))i.toggle=false;h||f.data("bs.collapse",h=new a(this,i));if(typeof b=="string")h[b]()})}var a=function(b,f){this.$element=d(b);this.options=d.extend({},a.DEFAULTS,f);this.$trigger=d('[data-toggle="collapse"][href="#'+
b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]');this.transitioning=null;if(this.options.parent)this.$parent=this.getParent();else this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};a.VERSION="3.3.7";a.TRANSITION_DURATION=350;a.DEFAULTS={toggle:true};a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};a.prototype.show=function(){if(!(this.transitioning||this.$element.hasClass("in"))){var b,f=this.$parent&&
this.$parent.children(".panel").children(".in, .collapsing");if(f&&f.length)if((b=f.data("bs.collapse"))&&b.transitioning)return;var h=d.Event("show.bs.collapse");this.$element.trigger(h);if(!h.isDefaultPrevented()){if(f&&f.length){e.call(f,"hide");b||f.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("");
this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!d.support.transition)return b.call(this);f=d.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",d.proxy(b,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[i](this.$element[0][f])}}};a.prototype.hide=function(){if(!(this.transitioning||!this.$element.hasClass("in"))){var b=d.Event("hide.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]());this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var f=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!d.support.transition)return f.call(this);this.$element[b](0).one("bsTransitionEnd",d.proxy(f,this)).emulateTransitionEnd(a.TRANSITION_DURATION)}}};a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};a.prototype.getParent=function(){return d(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(d.proxy(function(b,f){var h=d(f);this.addAriaAndCollapsedClass(g(h),h)},this)).end()};a.prototype.addAriaAndCollapsedClass=function(b,f){var h=b.hasClass("in");b.attr("aria-expanded",h);f.toggleClass("collapsed",!h).attr("aria-expanded",h)};var c=d.fn.collapse;d.fn.collapse=e;d.fn.collapse.Constructor=a;d.fn.collapse.noConflict=function(){d.fn.collapse=c;return this};d(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var f=d(this);f.attr("data-target")||
b.preventDefault();b=g(f);f=b.data("bs.collapse")?"toggle":f.data();e.call(b,f)})})(jQuery);
(function(d){function g(h){var i=h.attr("data-target");i||(i=(i=h.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));return(i=i&&d(i))&&i.length?i:h.parent()}function e(h){if(!(h&&h.which===3)){d(a).remove();d(c).each(function(){var i=d(this),j=g(i),l={relatedTarget:this};if(j.hasClass("open"))if(!(h&&h.type=="click"&&/input|textarea/i.test(h.target.tagName)&&d.contains(j[0],h.target))){j.trigger(h=d.Event("hide.bs.dropdown",l));if(!h.isDefaultPrevented()){i.attr("aria-expanded",
"false");j.removeClass("open").trigger(d.Event("hidden.bs.dropdown",l))}}})}}var a=".dropdown-backdrop",c='[data-toggle="dropdown"]',b=function(h){d(h).on("click.bs.dropdown",this.toggle)};b.VERSION="3.3.7";b.prototype.toggle=function(h){var i=d(this);if(!i.is(".disabled, :disabled")){var j=g(i);h=j.hasClass("open");e();if(!h){if("ontouchstart"in document.documentElement&&!j.closest(".navbar-nav").length)d(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(d(this)).on("click",
e);var l={relatedTarget:this};j.trigger(h=d.Event("show.bs.dropdown",l));if(h.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true");j.toggleClass("open").trigger(d.Event("shown.bs.dropdown",l))}return false}};b.prototype.keydown=function(h){if(!(!/(38|40|27|32)/.test(h.which)||/input|textarea/i.test(h.target.tagName))){var i=d(this);h.preventDefault();h.stopPropagation();if(!i.is(".disabled, :disabled")){var j=g(i),l=j.hasClass("open");if(!l&&h.which!=27||l&&h.which==27){h.which==
27&&j.find(c).trigger("focus");return i.trigger("click")}i=j.find(".dropdown-menu li:not(.disabled):visible a");if(i.length){j=i.index(h.target);h.which==38&&j>0&&j--;h.which==40&&j<i.length-1&&j++;~j||(j=0);i.eq(j).trigger("focus")}}}};var f=d.fn.dropdown;d.fn.dropdown=function(h){return this.each(function(){var i=d(this),j=i.data("bs.dropdown");j||i.data("bs.dropdown",j=new b(this));typeof h=="string"&&j[h].call(i)})};d.fn.dropdown.Constructor=b;d.fn.dropdown.noConflict=function(){d.fn.dropdown=
f;return this};d(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(h){h.stopPropagation()}).on("click.bs.dropdown.data-api",c,b.prototype.toggle).on("keydown.bs.dropdown.data-api",c,b.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",b.prototype.keydown)})(jQuery);
(function(d){function g(c,b){return this.each(function(){var f=d(this),h=f.data("bs.modal"),i=d.extend({},e.DEFAULTS,f.data(),typeof c=="object"&&c);h||f.data("bs.modal",h=new e(this,i));if(typeof c=="string")h[c](b);else i.show&&h.show(b)})}var e=function(c,b){this.options=b;this.$body=d(document.body);this.$element=d(c);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;this.options.remote&&
this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.VERSION="3.3.7";e.TRANSITION_DURATION=300;e.BACKDROP_TRANSITION_DURATION=150;e.DEFAULTS={backdrop:true,keyboard:true,show:true};e.prototype.toggle=function(c){return this.isShown?this.hide():this.show(c)};e.prototype.show=function(c){var b=this,f=d.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(f);if(!(this.isShown||f.isDefaultPrevented())){this.isShown=
true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',d.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){b.$element.one("mouseup.dismiss.bs.modal",function(h){if(d(h.target).is(b.$element))b.ignoreBackdropClick=true})});this.backdrop(function(){var h=d.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(b.$body);
b.$element.show().scrollTop(0);b.adjustDialog();b.$element.addClass("in");b.enforceFocus();var i=d.Event("shown.bs.modal",{relatedTarget:c});h?b.$dialog.one("bsTransitionEnd",function(){b.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(e.TRANSITION_DURATION):b.$element.trigger("focus").trigger(i)})}};e.prototype.hide=function(c){c&&c.preventDefault();c=d.Event("hide.bs.modal");this.$element.trigger(c);if(!(!this.isShown||c.isDefaultPrevented())){this.isShown=false;this.escape();this.resize();
d(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");d.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",d.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal()}};e.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",d.proxy(function(c){document!==c.target&&this.$element[0]!==
c.target&&!this.$element.has(c.target).length&&this.$element.trigger("focus")},this))};e.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",d.proxy(function(c){c.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};e.prototype.resize=function(){if(this.isShown)d(window).on("resize.bs.modal",d.proxy(this.handleUpdate,this));else d(window).off("resize.bs.modal")};e.prototype.hideModal=function(){var c=
this;this.$element.hide();this.backdrop(function(){c.$body.removeClass("modal-open");c.resetAdjustments();c.resetScrollbar();c.$element.trigger("hidden.bs.modal")})};e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};e.prototype.backdrop=function(c){var b=this,f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var h=d.support.transition&&f;this.$backdrop=d(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body);
this.$element.on("click.dismiss.bs.modal",d.proxy(function(i){if(this.ignoreBackdropClick)this.ignoreBackdropClick=false;else if(i.target===i.currentTarget)this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));this.$backdrop.addClass("in");if(c)h?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):c()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");f=function(){b.removeBackdrop();c&&c()};d.support.transition&&
this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):f()}else c&&c()};e.prototype.handleUpdate=function(){this.adjustDialog()};e.prototype.adjustDialog=function(){var c=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&c?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!c?this.scrollbarWidth:""})};e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",
paddingRight:""})};e.prototype.checkScrollbar=function(){var c=window.innerWidth;if(!c){c=document.documentElement.getBoundingClientRect();c=c.right-Math.abs(c.left)}this.bodyIsOverflowing=document.body.clientWidth<c;this.scrollbarWidth=this.measureScrollbar()};e.prototype.setScrollbar=function(){var c=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",c+this.scrollbarWidth)};e.prototype.resetScrollbar=
function(){this.$body.css("padding-right",this.originalBodyPad)};e.prototype.measureScrollbar=function(){var c=document.createElement("div");c.className="modal-scrollbar-measure";this.$body.append(c);var b=c.offsetWidth-c.clientWidth;this.$body[0].removeChild(c);return b};var a=d.fn.modal;d.fn.modal=g;d.fn.modal.Constructor=e;d.fn.modal.noConflict=function(){d.fn.modal=a;return this};d(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var b=d(this),f=b.attr("href"),h=d(b.attr("data-target")||
f&&f.replace(/.*(?=#[^\s]+$)/,""));f=h.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(f)&&f},h.data(),b.data());b.is("a")&&c.preventDefault();h.one("show.bs.modal",function(i){if(!i.isDefaultPrevented())h.one("hidden.bs.modal",function(){b.is(":visible")&&b.trigger("focus")})});g.call(h,f,this)})})(jQuery);
(function(d){var g=function(a,c){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",a,c)};g.VERSION="3.3.7";g.TRANSITION_DURATION=150;g.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};g.prototype.init=function(a,
c,b){this.enabled=true;this.type=a;this.$element=d(c);this.options=this.getOptions(b);this.$viewport=this.options.viewport&&d(d.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");
a=this.options.trigger.split(" ");for(c=a.length;c--;){b=a[c];if(b=="click")this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this));else if(b!="manual"){var f=b=="hover"?"mouseleave":"focusout";this.$element.on((b=="hover"?"mouseenter":"focusin")+"."+this.type,this.options.selector,d.proxy(this.enter,this));this.$element.on(f+"."+this.type,this.options.selector,d.proxy(this.leave,this))}}this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):
this.fixTitle()};g.prototype.getDefaults=function(){return g.DEFAULTS};g.prototype.getOptions=function(a){a=d.extend({},this.getDefaults(),this.$element.data(),a);if(a.delay&&typeof a.delay=="number")a.delay={show:a.delay,hide:a.delay};return a};g.prototype.getDelegateOptions=function(){var a={},c=this.getDefaults();this._options&&d.each(this._options,function(b,f){if(c[b]!=f)a[b]=f});return a};g.prototype.enter=function(a){var c=a instanceof this.constructor?a:d(a.currentTarget).data("bs."+this.type);
if(!c){c=new this.constructor(a.currentTarget,this.getDelegateOptions());d(a.currentTarget).data("bs."+this.type,c)}if(a instanceof d.Event)c.inState[a.type=="focusin"?"focus":"hover"]=true;if(c.tip().hasClass("in")||c.hoverState=="in")c.hoverState="in";else{clearTimeout(c.timeout);c.hoverState="in";if(!c.options.delay||!c.options.delay.show)return c.show();c.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)}};g.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return true;
return false};g.prototype.leave=function(a){var c=a instanceof this.constructor?a:d(a.currentTarget).data("bs."+this.type);if(!c){c=new this.constructor(a.currentTarget,this.getDelegateOptions());d(a.currentTarget).data("bs."+this.type,c)}if(a instanceof d.Event)c.inState[a.type=="focusout"?"focus":"hover"]=false;if(!c.isInStateTrue()){clearTimeout(c.timeout);c.hoverState="out";if(!c.options.delay||!c.options.delay.hide)return c.hide();c.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},
c.options.delay.hide)}};g.prototype.show=function(){var a=d.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var c=d.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!(a.isDefaultPrevented()||!c)){var b=this;a=this.tip();c=this.getUID(this.type);this.setContent();a.attr("id",c);this.$element.attr("aria-describedby",c);this.options.animation&&a.addClass("fade");c=typeof this.options.placement=="function"?this.options.placement.call(this,
a[0],this.$element[0]):this.options.placement;var f=/\s?auto?\s?/i,h=f.test(c);if(h)c=c.replace(f,"")||"top";a.detach().css({top:0,left:0,display:"block"}).addClass(c).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);f=this.getPosition();var i=a[0].offsetWidth,j=a[0].offsetHeight;if(h){h=c;var l=this.getPosition(this.$viewport);c=c=="bottom"&&f.bottom+j>l.bottom?"top":c=="top"&&f.top-j<
l.top?"bottom":c=="right"&&f.right+i>l.width?"left":c=="left"&&f.left-i<l.left?"right":c;a.removeClass(h).addClass(c)}this.applyPlacement(this.getCalculatedOffset(c,f,i,j),c);c=function(){var m=b.hoverState;b.$element.trigger("shown.bs."+b.type);b.hoverState=null;m=="out"&&b.leave(b)};d.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",c).emulateTransitionEnd(g.TRANSITION_DURATION):c()}}};g.prototype.applyPlacement=function(a,c){var b=this.tip(),f=b[0].offsetWidth,h=b[0].offsetHeight,
i=parseInt(b.css("margin-top"),10),j=parseInt(b.css("margin-left"),10);if(isNaN(i))i=0;if(isNaN(j))j=0;a.top+=i;a.left+=j;d.offset.setOffset(b[0],d.extend({using:function(s){b.css({top:Math.round(s.top),left:Math.round(s.left)})}},a),0);b.addClass("in");j=b[0].offsetWidth;var l=b[0].offsetHeight;if(c=="top"&&l!=h)a.top=a.top+h-l;var m=this.getViewportAdjustedDelta(c,a,j,l);if(m.left)a.left+=m.left;else a.top+=m.top;f=(i=/top|bottom/.test(c))?m.left*2-f+j:m.top*2-h+l;h=i?"offsetWidth":"offsetHeight";
b.offset(a);this.replaceArrow(f,b[0][h],i)};g.prototype.replaceArrow=function(a,c,b){this.arrow().css(b?"left":"top",50*(1-a/c)+"%").css(b?"top":"left","")};g.prototype.setContent=function(){var a=this.tip(),c=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](c);a.removeClass("fade in top bottom left right")};g.prototype.hide=function(a){function c(){b.hoverState!="in"&&f.detach();b.$element&&b.$element.removeAttr("aria-describedby").trigger("hidden.bs."+b.type);a&&a()}var b=
this,f=d(this.$tip),h=d.Event("hide.bs."+this.type);this.$element.trigger(h);if(!h.isDefaultPrevented()){f.removeClass("in");d.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(g.TRANSITION_DURATION):c();this.hoverState=null;return this}};g.prototype.fixTitle=function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string")a.attr("data-original-title",a.attr("title")||"").attr("title","")};g.prototype.hasContent=function(){return this.getTitle()};
g.prototype.getPosition=function(a){a=a||this.$element;var c=a[0],b=c.tagName=="BODY",f=c.getBoundingClientRect();if(f.width==null)f=d.extend({},f,{width:f.right-f.left,height:f.bottom-f.top});c=window.SVGElement&&c instanceof window.SVGElement;c=b?{top:0,left:0}:c?null:a.offset();a={scroll:b?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop()};b=b?{width:d(window).width(),height:d(window).height()}:null;return d.extend({},f,a,b,c)};g.prototype.getCalculatedOffset=function(a,
c,b,f){return a=="bottom"?{top:c.top+c.height,left:c.left+c.width/2-b/2}:a=="top"?{top:c.top-f,left:c.left+c.width/2-b/2}:a=="left"?{top:c.top+c.height/2-f/2,left:c.left-b}:{top:c.top+c.height/2-f/2,left:c.left+c.width}};g.prototype.getViewportAdjustedDelta=function(a,c,b,f){var h={top:0,left:0};if(!this.$viewport)return h;var i=this.options.viewport&&this.options.viewport.padding||0,j=this.getPosition(this.$viewport);if(/right|left/.test(a)){b=c.top-i-j.scroll;c=c.top+i-j.scroll+f;if(b<j.top)h.top=
j.top-b;else if(c>j.top+j.height)h.top=j.top+j.height-c}else{f=c.left-i;c=c.left+i+b;if(f<j.left)h.left=j.left-f;else if(c>j.right)h.left=j.left+j.width-c}return h};g.prototype.getTitle=function(){var a=this.$element,c=this.options;return a.attr("data-original-title")||(typeof c.title=="function"?c.title.call(a[0]):c.title)};g.prototype.getUID=function(a){do a+=~~(Math.random()*1E6);while(document.getElementById(a));return a};g.prototype.tip=function(){if(!this.$tip){this.$tip=d(this.options.template);
if(this.$tip.length!=1)throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");}return this.$tip};g.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};g.prototype.enable=function(){this.enabled=true};g.prototype.disable=function(){this.enabled=false};g.prototype.toggleEnabled=function(){this.enabled=!this.enabled};g.prototype.toggle=function(a){var c=this;if(a){c=d(a.currentTarget).data("bs."+this.type);if(!c){c=new this.constructor(a.currentTarget,
this.getDelegateOptions());d(a.currentTarget).data("bs."+this.type,c)}}if(a){c.inState.click=!c.inState.click;c.isInStateTrue()?c.enter(c):c.leave(c)}else c.tip().hasClass("in")?c.leave(c):c.enter(c)};g.prototype.destroy=function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);a.$tip&&a.$tip.detach();a.$tip=null;a.$arrow=null;a.$viewport=null;a.$element=null})};var e=d.fn.tooltip;d.fn.tooltip=function(a){return this.each(function(){var c=
d(this),b=c.data("bs.tooltip"),f=typeof a=="object"&&a;if(!(!b&&/destroy|hide/.test(a))){b||c.data("bs.tooltip",b=new g(this,f));if(typeof a=="string")b[a]()}})};d.fn.tooltip.Constructor=g;d.fn.tooltip.noConflict=function(){d.fn.tooltip=e;return this}})(jQuery);
(function(d){var g=function(a,c){this.init("popover",a,c)};if(!d.fn.tooltip)throw Error("Popover requires tooltip.js");g.VERSION="3.3.7";g.DEFAULTS=d.extend({},d.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});g.prototype=d.extend({},d.fn.tooltip.Constructor.prototype);g.prototype.constructor=g;g.prototype.getDefaults=function(){return g.DEFAULTS};
g.prototype.setContent=function(){var a=this.tip(),c=this.getTitle(),b=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](c);a.find(".popover-content").children().detach().end()[this.options.html?typeof b=="string"?"html":"append":"text"](b);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};g.prototype.hasContent=function(){return this.getTitle()||this.getContent()};g.prototype.getContent=function(){var a=this.$element,
c=this.options;return a.attr("data-content")||(typeof c.content=="function"?c.content.call(a[0]):c.content)};g.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=d.fn.popover;d.fn.popover=function(a){return this.each(function(){var c=d(this),b=c.data("bs.popover"),f=typeof a=="object"&&a;if(!(!b&&/destroy|hide/.test(a))){b||c.data("bs.popover",b=new g(this,f));if(typeof a=="string")b[a]()}})};d.fn.popover.Constructor=g;d.fn.popover.noConflict=function(){d.fn.popover=
e;return this}})(jQuery);
(function(d){function g(c,b){this.$body=d(document.body);this.$scrollElement=d(c).is(document.body)?d(window):d(c);this.options=d.extend({},g.DEFAULTS,b);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",d.proxy(this.process,this));this.refresh();this.process()}function e(c){return this.each(function(){var b=d(this),f=b.data("bs.scrollspy"),h=typeof c=="object"&&c;f||b.data("bs.scrollspy",
f=new g(this,h));if(typeof c=="string")f[c]()})}g.VERSION="3.3.7";g.DEFAULTS={offset:10};g.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};g.prototype.refresh=function(){var c=this,b="offset",f=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!d.isWindow(this.$scrollElement[0])){b="position";f=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var h=
d(this);h=h.data("target")||h.attr("href");var i=/^#./.test(h)&&d(h);return i&&i.length&&i.is(":visible")&&[[i[b]().top+f,h]]||null}).sort(function(h,i){return h[0]-i[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})};g.prototype.process=function(){var c=this.$scrollElement.scrollTop()+this.options.offset,b=this.getScrollHeight(),f=this.options.offset+b-this.$scrollElement.height(),h=this.offsets,i=this.targets,j=this.activeTarget,l;this.scrollHeight!=b&&this.refresh();if(c>=
f)return j!=(l=i[i.length-1])&&this.activate(l);if(j&&c<h[0]){this.activeTarget=null;return this.clear()}for(l=h.length;l--;)j!=i[l]&&c>=h[l]&&(h[l+1]===undefined||c<h[l+1])&&this.activate(i[l])};g.prototype.activate=function(c){this.activeTarget=c;this.clear();c=d(this.selector+'[data-target="'+c+'"],'+this.selector+'[href="'+c+'"]').parents("li").addClass("active");if(c.parent(".dropdown-menu").length)c=c.closest("li.dropdown").addClass("active");c.trigger("activate.bs.scrollspy")};g.prototype.clear=
function(){d(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var a=d.fn.scrollspy;d.fn.scrollspy=e;d.fn.scrollspy.Constructor=g;d.fn.scrollspy.noConflict=function(){d.fn.scrollspy=a;return this};d(window).on("load.bs.scrollspy.data-api",function(){d('[data-spy="scroll"]').each(function(){var c=d(this);e.call(c,c.data())})})})(jQuery);
(function(d){function g(b){return this.each(function(){var f=d(this),h=f.data("bs.tab");h||f.data("bs.tab",h=new e(this));if(typeof b=="string")h[b]()})}var e=function(b){this.element=d(b)};e.VERSION="3.3.7";e.TRANSITION_DURATION=150;e.prototype.show=function(){var b=this.element,f=b.closest("ul:not(.dropdown-menu)"),h=b.data("target");h||(h=(h=b.attr("href"))&&h.replace(/.*(?=#[^\s]*$)/,""));if(!b.parent("li").hasClass("active")){var i=f.find(".active:last a"),j=d.Event("hide.bs.tab",{relatedTarget:b[0]}),
l=d.Event("show.bs.tab",{relatedTarget:i[0]});i.trigger(j);b.trigger(l);if(!(l.isDefaultPrevented()||j.isDefaultPrevented())){h=d(h);this.activate(b.closest("li"),f);this.activate(h,h.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:b[0]});b.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}};e.prototype.activate=function(b,f,h){function i(){j.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);
b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);l?b.addClass("in"):b.removeClass("fade");b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true);h&&h()}var j=f.find("> .active"),l=h&&d.support.transition&&(j.length&&j.hasClass("fade")||!!f.find("> .fade").length);j.length&&l?j.one("bsTransitionEnd",i).emulateTransitionEnd(e.TRANSITION_DURATION):i();j.removeClass("in")};var a=d.fn.tab;d.fn.tab=
g;d.fn.tab.Constructor=e;d.fn.tab.noConflict=function(){d.fn.tab=a;return this};var c=function(b){b.preventDefault();g.call(d(this),"show")};d(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',c).on("click.bs.tab.data-api",'[data-toggle="pill"]',c)})(jQuery);
(function(d){function g(c){return this.each(function(){var b=d(this),f=b.data("bs.affix"),h=typeof c=="object"&&c;f||b.data("bs.affix",f=new e(this,h));if(typeof c=="string")f[c]()})}var e=function(c,b){this.options=d.extend({},e.DEFAULTS,b);this.$target=d(this.options.target).on("scroll.bs.affix.data-api",d.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",d.proxy(this.checkPositionWithEventLoop,this));this.$element=d(c);this.pinnedOffset=this.unpin=this.affixed=null;this.checkPosition()};
e.VERSION="3.3.7";e.RESET="affix affix-top affix-bottom";e.DEFAULTS={offset:0,target:window};e.prototype.getState=function(c,b,f,h){var i=this.$target.scrollTop(),j=this.$element.offset(),l=this.$target.height();if(f!=null&&this.affixed=="top")return i<f?"top":false;if(this.affixed=="bottom"){if(f!=null)return i+this.unpin<=j.top?false:"bottom";return i+l<=c-h?false:"bottom"}var m=this.affixed==null;j=m?i:j.top;if(f!=null&&i<=f)return"top";if(h!=null&&j+(m?l:b)>=c-h)return"bottom";return false};e.prototype.getPinnedOffset=
function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var c=this.$target.scrollTop();return this.pinnedOffset=this.$element.offset().top-c};e.prototype.checkPositionWithEventLoop=function(){setTimeout(d.proxy(this.checkPosition,this),1)};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=this.$element.height(),b=this.options.offset,f=b.top,h=b.bottom,i=Math.max(d(document).height(),d(document.body).height());if(typeof b!=
"object")h=f=b;if(typeof f=="function")f=b.top(this.$element);if(typeof h=="function")h=b.bottom(this.$element);b=this.getState(i,c,f,h);if(this.affixed!=b){this.unpin!=null&&this.$element.css("top","");f="affix"+(b?"-"+b:"");var j=d.Event(f+".bs.affix");this.$element.trigger(j);if(j.isDefaultPrevented())return;this.affixed=b;this.unpin=b=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(e.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}b=="bottom"&&this.$element.offset({top:i-
c-h})}};var a=d.fn.affix;d.fn.affix=g;d.fn.affix.Constructor=e;d.fn.affix.noConflict=function(){d.fn.affix=a;return this};d(window).on("load",function(){d('[data-spy="affix"]').each(function(){var c=d(this),b=c.data();b.offset=b.offset||{};if(b.offsetBottom!=null)b.offset.bottom=b.offsetBottom;if(b.offsetTop!=null)b.offset.top=b.offsetTop;g.call(c,b)})})})(jQuery);
(function(d){typeof define==="function"&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){d.extend(d.fn,{validate:function(a){if(this.length){var c=d.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new d.validator(a,this[0]);d.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(b){if(c.settings.submitHandler)c.submitButton=b.target;if(d(b.target).hasClass("cancel"))c.cancelSubmit=true;if(d(b.target).attr("formnovalidate")!==
undefined)c.cancelSubmit=true});this.submit(function(b){function f(){var h,i;if(c.settings.submitHandler){if(c.submitButton)h=d("<input type='hidden'/>").attr("name",c.submitButton.name).val(d(c.submitButton).val()).appendTo(c.currentForm);i=c.settings.submitHandler.call(c,c.currentForm,b);c.submitButton&&h.remove();if(i!==undefined)return i;return false}return true}c.settings.debug&&b.preventDefault();if(c.cancelSubmit){c.cancelSubmit=false;return f()}if(c.form()){if(c.pendingRequest){c.formSubmitted=
true;return false}return f()}else{c.focusInvalid();return false}})}return c}else a&&a.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var a,c;if(d(this[0]).is("form"))a=this.validate().form();else{a=true;c=d(this[0].form).validate();this.each(function(){a=c.element(this)&&a})}return a},removeAttrs:function(a){var c={},b=this;d.each(a.split(/\s/),function(f,h){c[h]=b.attr(h);b.removeAttr(h)});return c},rules:function(a,c){var b=this[0],
f,h,i,j;if(a){f=d.data(b.form,"validator").settings;h=f.rules;i=d.validator.staticRules(b);switch(a){case "add":d.extend(i,d.validator.normalizeRule(c));delete i.messages;h[b.name]=i;if(c.messages)f.messages[b.name]=d.extend(f.messages[b.name],c.messages);break;case "remove":if(!c){delete h[b.name];return i}j={};d.each(c.split(/\s/),function(l,m){j[m]=i[m];delete i[m];m==="required"&&d(b).removeAttr("aria-required")});return j}}f=d.validator.normalizeRules(d.extend({},d.validator.classRules(b),d.validator.attributeRules(b),
d.validator.dataRules(b),d.validator.staticRules(b)),b);if(f.required){h=f.required;delete f.required;f=d.extend({required:h},f);d(b).attr("aria-required","true")}if(f.remote){h=f.remote;delete f.remote;f=d.extend(f,{remote:h})}return f}});d.extend(d.expr[":"],{blank:function(a){return!d.trim(""+d(a).val())},filled:function(a){return!!d.trim(""+d(a).val())},unchecked:function(a){return!d(a).prop("checked")}});d.validator=function(a,c){this.settings=d.extend(true,{},d.validator.defaults,a);this.currentForm=
c;this.init()};d.validator.format=function(a,c){if(arguments.length===1)return function(){var b=d.makeArray(arguments);b.unshift(a);return d.validator.format.apply(this,b)};if(arguments.length>2&&c.constructor!==Array)c=d.makeArray(arguments).slice(1);if(c.constructor!==Array)c=[c];d.each(c,function(b,f){a=a.replace(RegExp("\\{"+b+"\\}","g"),function(){return f})});return a};d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:false,
focusInvalid:true,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.hideThese(this.errorsFor(a))}},onfocusout:function(a){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))this.element(a)},onkeyup:function(a,c){if(!(c.which===9&&this.elementValue(a)===
""))if(a.name in this.submitted||a===this.lastElement)this.element(a)},onclick:function(a){if(a.name in this.submitted)this.element(a);else a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,b){a.type==="radio"?this.findByName(a.name).addClass(c).removeClass(b):d(a).addClass(c).removeClass(b)},unhighlight:function(a,c,b){a.type==="radio"?this.findByName(a.name).removeClass(c).addClass(b):d(a).removeClass(c).addClass(b)}},setDefaults:function(a){d.extend(d.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:d.validator.format("Please enter no more than {0} characters."),minlength:d.validator.format("Please enter at least {0} characters."),
rangelength:d.validator.format("Please enter a value between {0} and {1} characters long."),range:d.validator.format("Please enter a value between {0} and {1}."),max:d.validator.format("Please enter a value less than or equal to {0}."),min:d.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function a(f){var h=d.data(this[0].form,"validator"),i="on"+f.type.replace(/^validate/,""),j=h.settings;j[i]&&!this.is(j.ignore)&&j[i].call(h,
this[0],f)}this.labelContainer=d(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm);this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={},b;d.each(this.settings.groups,function(f,h){if(typeof h==="string")h=h.split(/\s/);d.each(h,function(i,j){c[j]=f})});b=this.settings.rules;
d.each(b,function(f,h){b[f]=d.validator.normalizeRule(h)});d(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",a).validateDelegate("select, option, [type='radio'], [type='checkbox']",
"click",a);this.settings.invalidHandler&&d(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);d(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();d.extend(this.submitted,this.errorMap);this.invalid=d.extend({},this.errorMap);this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=
this.elements();c[a];a++)this.check(c[a]);return this.valid()},element:function(a){var c=this.clean(a),b=this.validationTargetFor(c),f=true;this.lastElement=b;if(b===undefined)delete this.invalid[c.name];else{this.prepareElement(b);this.currentElements=d(b);if(f=this.check(b)!==false)delete this.invalid[b.name];else this.invalid[b.name]=true}d(a).attr("aria-invalid",!f);if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return f},showErrors:function(a){if(a){d.extend(this.errorMap,
a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});this.successList=d.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},
numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var c=0,b;for(b in a)c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text("");this.addWrapper(a).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},
findLastActive:function(){var a=this.lastActive;return a&&d.grep(this.errorList,function(c){return c.element.name===a.name}).length===1&&a},elements:function(){var a=this,c={};return d(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){!this.name&&a.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!a.objectLength(d(this).rules()))return false;return c[this.name]=
true})},clean:function(a){return d(a)[0]},errors:function(){var a=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+a,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=d([]);this.toHide=d([]);this.currentElements=d([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(a){var c=d(a),
b=a.type;if(b==="radio"||b==="checkbox")return d("input[name='"+a.name+"']:checked").val();else if(b==="number"&&typeof a.validity!=="undefined")return a.validity.badInput?false:c.val();a=c.val();if(typeof a==="string")return a.replace(/\r/g,"");return a},check:function(a){a=this.validationTargetFor(this.clean(a));var c=d(a).rules(),b=d.map(c,function(s,x){return x}).length,f=false,h=this.elementValue(a),i,j,l;for(j in c){l={method:j,parameters:c[j]};try{i=d.validator.methods[j].call(this,h,a,l.parameters);
if(i==="dependency-mismatch"&&b===1)f=true;else{f=false;if(i==="pending"){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!i){this.formatAndAdd(a,l);return false}}}catch(m){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+a.id+", check the '"+l.method+"' method.",m);throw m;}}if(!f){this.objectLength(c)&&this.successList.push(a);return true}},customDataMessage:function(a,c){return d(a).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||
d(a).data("msg")},customMessage:function(a,c){var b=this.settings.messages[a];return b&&(b.constructor===String?b:b[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customDataMessage(a,c),!this.settings.ignoreTitle&&a.title||undefined,d.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,c){var b=
this.defaultMessage(a,c.method),f=/\$?\{(\d+)\}/g;if(typeof b==="function")b=b.call(this,c.parameters,a);else if(f.test(b))b=d.validator.format(b.replace(f,"{$1}"),c.parameters);this.errorList.push({message:b,element:a,method:c.method});this.errorMap[a.name]=b;this.submitted[a.name]=b},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){var a,c;for(a=0;this.errorList[a];a++){c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,
c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},
validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var b,f,h=this.errorsFor(a),i=this.idOrName(a),j=d(a).attr("aria-describedby");if(h.length){h.removeClass(this.settings.validClass).addClass(this.settings.errorClass);h.html(c)}else{b=h=d("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||"");if(this.settings.wrapper)b=
h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();if(this.labelContainer.length)this.labelContainer.append(b);else this.settings.errorPlacement?this.settings.errorPlacement(b,d(a)):b.insertAfter(a);if(h.is("label"))h.attr("for",i);else if(h.parents("label[for='"+i+"']").length===0){b=h.attr("id").replace(/(:|\.|\[|\])/g,"\\$1");if(j)j.match(RegExp("\\b"+b+"\\b"))||(j+=" "+b);else j=b;d(a).attr("aria-describedby",j);(f=this.groups[a.name])&&d.each(this.groups,function(l,m){m===f&&d("[name='"+
l+"']",this.currentForm).attr("aria-describedby",h.attr("id"))})}}if(!c&&this.settings.success){h.text("");typeof this.settings.success==="string"?h.addClass(this.settings.success):this.settings.success(h,a)}this.toShow=this.toShow.add(h)},errorsFor:function(a){var c=this.idOrName(a);a=d(a).attr("aria-describedby");c="label[for='"+c+"'], label[for='"+c+"'] *";if(a)c=c+", #"+a.replace(/\s+/g,", #");return this.errors().filter(c)},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?
a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a))a=this.findByName(a.name);return d(a).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){return d(this.currentForm).find("[name='"+a+"']")},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return d("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,
c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):true},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!d(a,c.form).length},"function":function(a,c){return a(c)}},optional:function(a){var c=this.elementValue(a);return!d.validator.methods.required.call(this,c,a)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(a,c){this.pendingRequest--;if(this.pendingRequest<
0)this.pendingRequest=0;delete this.pending[a.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){d(this.currentForm).submit();this.formSubmitted=false}else if(!c&&this.pendingRequest===0&&this.formSubmitted){d(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(a){return d.data(a,"previousValue")||d.data(a,"previousValue",{old:null,valid:true,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:true},
email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(a,c){if(a.constructor===String)this.classRuleSettings[a]=c;else d.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=d(a).attr("class"))&&d.each(a.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(c,d.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={},b=d(a),f=a.getAttribute("type"),
h,i;for(h in d.validator.methods){if(h==="required"){i=a.getAttribute(h);if(i==="")i=true;i=!!i}else i=b.attr(h);if(/min|max/.test(h)&&(f===null||/number|range|text/.test(f)))i=Number(i);if(i||i===0)c[h]=i;else if(f===h&&f!=="range")c[h]=true}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},dataRules:function(a){var c,b={},f=d(a);for(c in d.validator.methods){a=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase());if(a!==undefined)b[c]=a}return b},
staticRules:function(a){var c={},b=d.data(a.form,"validator");if(b.settings.rules)c=d.validator.normalizeRule(b.settings.rules[a.name])||{};return c},normalizeRules:function(a,c){d.each(a,function(b,f){if(f===false)delete a[b];else if(f.param||f.depends){var h=true;switch(typeof f.depends){case "string":h=!!d(f.depends,c.form).length;break;case "function":h=f.depends.call(c,c)}if(h)a[b]=f.param!==undefined?f.param:true;else delete a[b]}});d.each(a,function(b,f){a[b]=d.isFunction(f)?f(c):f});d.each(["minlength",
"maxlength"],function(){if(a[this])a[this]=Number(a[this])});d.each(["rangelength","range"],function(){var b;if(a[this])if(d.isArray(a[this]))a[this]=[Number(a[this][0]),Number(a[this][1])];else if(typeof a[this]==="string"){b=a[this].replace(/[\[\]]/g,"").split(/[\s,]+/);a[this]=[Number(b[0]),Number(b[1])]}});if(d.validator.autoCreateRanges){if(a.min!=null&&a.max!=null){a.range=[a.min,a.max];delete a.min;delete a.max}if(a.minlength!=null&&a.maxlength!=null){a.rangelength=[a.minlength,a.maxlength];
delete a.minlength;delete a.maxlength}}return a},normalizeRule:function(a){if(typeof a==="string"){var c={};d.each(a.split(/\s/),function(){c[this]=true});a=c}return a},addMethod:function(a,c,b){d.validator.methods[a]=c;d.validator.messages[a]=b!==undefined?b:d.validator.messages[a];c.length<3&&d.validator.addClassRules(a,d.validator.normalizeRule(a))},methods:{required:function(a,c,b){if(!this.depend(b,c))return"dependency-mismatch";if(c.nodeName.toLowerCase()==="select")return(a=d(c).val())&&a.length>
0;if(this.checkable(c))return this.getLength(a,c)>0;return d.trim(a).length>0},email:function(a,c){return this.optional(c)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,c){return this.optional(c)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return this.optional(c)||!/Invalid|NaN/.test((new Date(a)).toString())},dateISO:function(a,c){return this.optional(c)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},creditcard:function(a,c){if(this.optional(c))return"dependency-mismatch";if(/[^0-9 \-]+/.test(a))return false;var b=0,f=0,h=false,
i;a=a.replace(/\D/g,"");if(a.length<13||a.length>19)return false;for(i=a.length-1;i>=0;i--){f=a.charAt(i);f=parseInt(f,10);if(h)if((f*=2)>9)f-=9;b+=f;h=!h}return b%10===0},minlength:function(a,c,b){a=d.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a>=b},maxlength:function(a,c,b){a=d.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a<=b},rangelength:function(a,c,b){a=d.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a>=b[0]&&a<=b[1]},min:function(a,
c,b){return this.optional(c)||a>=b},max:function(a,c,b){return this.optional(c)||a<=b},range:function(a,c,b){return this.optional(c)||a>=b[0]&&a<=b[1]},equalTo:function(a,c,b){b=d(b);this.settings.onfocusout&&b.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){d(c).valid()});return a===b.val()},remote:function(a,c,b){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c),h,i;this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=
this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=f.message;b=typeof b==="string"&&{url:b}||b;if(f.old===a)return f.valid;f.old=a;h=this;this.startRequest(c);i={};i[c.name]=a;d.ajax(d.extend(true,{url:b,mode:"abort",port:"validate"+c.name,dataType:"json",data:i,context:h.currentForm,success:function(j){var l=j===true||j==="true",m;h.settings.messages[c.name].remote=f.originalMessage;if(l){m=h.formSubmitted;h.prepareElement(c);h.formSubmitted=m;h.successList.push(c);delete h.invalid[c.name];
h.showErrors()}else{m={};j=j||h.defaultMessage(c,"remote");m[c.name]=f.message=d.isFunction(j)?j(a):j;h.invalid[c.name]=true;h.showErrors(m)}f.valid=l;h.stopRequest(c,l)}},b));return"pending"}}});d.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead.";};var g={},e;if(d.ajaxPrefilter)d.ajaxPrefilter(function(a,c,b){c=a.port;if(a.mode==="abort"){g[c]&&g[c].abort();g[c]=b}});else{e=d.ajax;d.ajax=function(a){var c=("port"in a?a:d.ajaxSettings).port;if(("mode"in
a?a:d.ajaxSettings).mode==="abort"){g[c]&&g[c].abort();g[c]=e.apply(this,arguments);return g[c]}return e.apply(this,arguments)}}d.extend(d.fn,{validateDelegate:function(a,c,b){return this.bind(c,function(f){var h=d(f.target);if(h.is(a))return b.apply(h,arguments)})}})});
(function(d){if(typeof exports==="object"&&typeof module!=="undefined")module.exports=d();else if(typeof define==="function"&&define.amd)define([],d);else(typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:this).ProgressBar=d()})(function(){return function d(g,e,a){function c(h,i){if(!e[h]){if(!g[h]){var j=typeof require=="function"&&require;if(!i&&j)return j(h,true);if(b)return b(h,true);j=Error("Cannot find module '"+h+"'");throw j.code="MODULE_NOT_FOUND",
j;}j=e[h]={exports:{}};g[h][0].call(j.exports,function(l){var m=g[h][1][l];return c(m?m:l)},j,j.exports,d,g,e,a)}return e[h].exports}for(var b=typeof require=="function"&&require,f=0;f<a.length;f++)c(a[f]);return c}({1:[function(d,g,e){(function(){var a=this||Function("return this")(),c=function(){function b(){}function f(k,n){for(var o in k)Object.hasOwnProperty.call(k,o)&&n(o)}function h(k,n){f(n,function(o){k[o]=n[o]});return k}function i(k,n){f(n,function(o){if(typeof k[o]==="undefined")k[o]=
n[o]})}function j(k,n,o,p,r,q,t){k=k<q?0:(k-q)/r;for(var A in n)if(n.hasOwnProperty(A)){r=t[A];r=typeof r==="function"?r:E[r];n[A]=l(o[A],p[A],r,k)}return n}function l(k,n,o,p){return k+(n-k)*o(p)}function m(k,n){var o=u.prototype.filter,p=k._filterArgs;f(o,function(r){typeof o[r][n]!=="undefined"&&o[r][n].apply(k,p)})}function s(k,n,o,p,r,q,t,A,H,I,J){B=n+o+p;v=Math.min(J||y(),B);z=v>=B;w=p-(B-v);if(k.isPlaying())if(z){H(t,k._attachment,w);k.stop(true)}else{k._scheduleId=I(k._timeoutHandler,C);m(k,
"beforeTween");v<n+o?j(1,r,q,t,1,1,A):j(v,r,q,t,p,n+o,A);m(k,"afterTween");H(r,k._attachment,w)}}function x(k,n){var o={},p=typeof n;p==="string"||p==="function"?f(k,function(r){o[r]=n}):f(k,function(r){o[r]||(o[r]=n[r]||G)});return o}function u(k,n){this._currentState=k||{};this._configured=false;this._scheduleFunction=D;typeof n!=="undefined"&&this.setConfig(n)}var E,D,G="linear",C=1E3/60,F=Date.now?Date.now:function(){return+new Date},y=typeof SHIFTY_DEBUG_NOW!=="undefined"?SHIFTY_DEBUG_NOW:F;
D=typeof window!=="undefined"?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var B,v,z,w;u.prototype.tween=function(k){if(this._isTweening)return this;if(k!==undefined||!this._configured)this.setConfig(k);this._timestamp=y();this._start(this.get(),this._attachment);return this.resume()};u.prototype.setConfig=function(k){k=k||
{};this._configured=true;this._attachment=k.attachment;this._scheduleId=this._pausedAtTime=null;this._delay=k.delay||0;this._start=k.start||b;this._step=k.step||b;this._finish=k.finish||b;this._duration=k.duration||500;this._currentState=h({},k.from)||this.get();this._originalState=this.get();this._targetState=h({},k.to)||this.get();var n=this;this._timeoutHandler=function(){s(n,n._timestamp,n._delay,n._duration,n._currentState,n._originalState,n._targetState,n._easing,n._step,n._scheduleFunction)};
var o=this._currentState,p=this._targetState;i(p,o);this._easing=x(o,k.easing||G);this._filterArgs=[o,this._originalState,p,this._easing];m(this,"tweenCreated");return this};u.prototype.get=function(){return h({},this._currentState)};u.prototype.set=function(k){this._currentState=k};u.prototype.pause=function(){this._pausedAtTime=y();this._isPaused=true;return this};u.prototype.resume=function(){if(this._isPaused)this._timestamp+=y()-this._pausedAtTime;this._isPaused=false;this._isTweening=true;this._timeoutHandler();
return this};u.prototype.seek=function(k){k=Math.max(k,0);var n=y();if(this._timestamp+k===0)return this;this._timestamp=n-k;if(!this.isPlaying()){this._isTweening=true;this._isPaused=false;s(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,n);this.pause()}return this};u.prototype.stop=function(k){this._isPaused=this._isTweening=false;this._timeoutHandler=b;(a.cancelAnimationFrame||a.webkitCancelAnimationFrame||
a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.mozCancelRequestAnimationFrame||a.clearTimeout)(this._scheduleId);if(k){m(this,"beforeTween");j(1,this._currentState,this._originalState,this._targetState,1,0,this._easing);m(this,"afterTween");m(this,"afterTweenEnd");this._finish.call(this,this._currentState,this._attachment)}return this};u.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused};u.prototype.setScheduleFunction=function(k){this._scheduleFunction=k};u.prototype.dispose=
function(){for(var k in this)this.hasOwnProperty(k)&&delete this[k]};u.prototype.filter={};u.prototype.formula={linear:function(k){return k}};E=u.prototype.formula;h(u,{now:y,each:f,tweenProps:j,tweenProp:l,applyFilter:m,shallowCopy:h,defaults:i,composeEasingObject:x});if(typeof SHIFTY_DEBUG_NOW==="function")a.timeoutHandler=s;if(typeof e==="object")g.exports=u;else if(typeof a.Tweenable==="undefined")a.Tweenable=u;return u}();(function(){c.shallowCopy(c.prototype.formula,{easeInQuad:function(b){return Math.pow(b,
2)},easeOutQuad:function(b){return-(Math.pow(b-1,2)-1)},easeInOutQuad:function(b){if((b/=0.5)<1)return 0.5*Math.pow(b,2);return-0.5*((b-=2)*b-2)},easeInCubic:function(b){return Math.pow(b,3)},easeOutCubic:function(b){return Math.pow(b-1,3)+1},easeInOutCubic:function(b){if((b/=0.5)<1)return 0.5*Math.pow(b,3);return 0.5*(Math.pow(b-2,3)+2)},easeInQuart:function(b){return Math.pow(b,4)},easeOutQuart:function(b){return-(Math.pow(b-1,4)-1)},easeInOutQuart:function(b){if((b/=0.5)<1)return 0.5*Math.pow(b,
4);return-0.5*((b-=2)*Math.pow(b,3)-2)},easeInQuint:function(b){return Math.pow(b,5)},easeOutQuint:function(b){return Math.pow(b-1,5)+1},easeInOutQuint:function(b){if((b/=0.5)<1)return 0.5*Math.pow(b,5);return 0.5*(Math.pow(b-2,5)+2)},easeInSine:function(b){return-Math.cos(b*(Math.PI/2))+1},easeOutSine:function(b){return Math.sin(b*(Math.PI/2))},easeInOutSine:function(b){return-0.5*(Math.cos(Math.PI*b)-1)},easeInExpo:function(b){return b===0?0:Math.pow(2,10*(b-1))},easeOutExpo:function(b){return b===
1?1:-Math.pow(2,-10*b)+1},easeInOutExpo:function(b){if(b===0)return 0;if(b===1)return 1;if((b/=0.5)<1)return 0.5*Math.pow(2,10*(b-1));return 0.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return-(Math.sqrt(1-b*b)-1)},easeOutCirc:function(b){return Math.sqrt(1-Math.pow(b-1,2))},easeInOutCirc:function(b){if((b/=0.5)<1)return-0.5*(Math.sqrt(1-b*b)-1);return 0.5*(Math.sqrt(1-(b-=2)*b)+1)},easeOutBounce:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*
(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},easeInBack:function(b){return b*b*(2.70158*b-1.70158)},easeOutBack:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},easeInOutBack:function(b){var f=1.70158;if((b/=0.5)<1)return 0.5*b*b*(((f*=1.525)+1)*b-f);return 0.5*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)},elastic:function(b){return-1*Math.pow(4,-8*b)*Math.sin((b*6-1)*2*Math.PI/2)+1},swingFromTo:function(b){var f=1.70158;return(b/=0.5)<1?0.5*b*b*(((f*=1.525)+1)*b-f):0.5*((b-=2)*b*(((f*=1.525)+
1)*b+f)+2)},swingFrom:function(b){return b*b*(2.70158*b-1.70158)},swingTo:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},bounce:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},bouncePast:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?2-(7.5625*(b-=1.5/2.75)*b+0.75):b<2.5/2.75?2-(7.5625*(b-=2.25/2.75)*b+0.9375):2-(7.5625*(b-=2.625/2.75)*b+0.984375)},easeFromTo:function(b){if((b/=0.5)<1)return 0.5*
Math.pow(b,4);return-0.5*((b-=2)*Math.pow(b,3)-2)},easeFrom:function(b){return Math.pow(b,4)},easeTo:function(b){return Math.pow(b,0.25)}})})();(function(){function b(h,i,j,l,m,s){function x(y,B){var v,z,w,k;w=y;for(z=0;z<8;z++){k=((u*w+E)*w+D)*w-y;if((k>=0?k:0-k)<B)return w;v=(3*u*w+2*E)*w+D;if((v>=0?v:0-v)<1.0E-6)break;w-=k/v}v=0;z=1;w=y;if(w<v)return v;if(w>z)return z;for(;v<z;){k=((u*w+E)*w+D)*w;if((k-y>=0?k-y:0-(k-y))<B)break;if(y>k)v=w;else z=w;w=(z-v)*0.5+v}return w}var u=0,E=0,D=0,G=0,C=0,
F=0;D=3*i;E=3*(l-i)-D;u=1-D-E;F=3*j;C=3*(m-j)-F;G=1-F-C;return function(y,B){var v=x(y,B);return((G*v+C)*v+F)*v}(h,1/(200*s))}function f(h,i,j,l){return function(m){return b(m,h,i,j,l,1)}}c.setBezierFunction=function(h,i,j,l,m){var s=f(i,j,l,m);s.displayName=h;s.x1=i;s.y1=j;s.x2=l;s.y2=m;return c.prototype.formula[h]=s};c.unsetBezierFunction=function(h){delete c.prototype.formula[h]}})();(function(){var b=new c;b._filterArgs=[];c.interpolate=function(f,h,i,j,l){var m=c.shallowCopy({},f);l=l||0;j=
c.composeEasingObject(f,j||"linear");b.set({});var s=b._filterArgs;s.length=0;s[0]=m;s[1]=f;s[2]=h;s[3]=j;c.applyFilter(b,"tweenCreated");c.applyFilter(b,"beforeTween");f=c.tweenProps(i,m,f,h,1,l,j);c.applyFilter(b,"afterTween");return f}})();(function(b){function f(k){b.each(k,function(n){var o=k[n];if(typeof o==="string"&&o.match(B))k[n]=j(B,o,h)})}function h(k){k=k.replace(/#/,"");if(k.length===3){k=k.split("");k=k[0]+k[0]+k[1]+k[1]+k[2]+k[2]}z[0]=i(k.substr(0,2));z[1]=i(k.substr(2,2));z[2]=i(k.substr(4,
2));k=z;return"rgb("+k[0]+","+k[1]+","+k[2]+")"}function i(k){return parseInt(k,16)}function j(k,n,o){var p=n.match(k);k=n.replace(k,v);if(p){n=p.length;for(var r,q=0;q<n;q++){r=p.shift();k=k.replace(v,o(r))}}return k}function l(k){var n=k.match(C),o=n.length;k=k.match(y)[0];for(var p=0;p<o;p++)k+=parseInt(n[p],10)+",";return k.slice(0,-1)+")"}function m(k){var n={};b.each(k,function(o){var p=k[o];if(typeof p==="string"){var r=p.match(C),q=p.match(G);if(q){if(q.length===1||p[0].match(D))q.unshift("")}else q=
["",""];p=q.join(v);q=[];r=r.length;var t;for(t=0;t<r;t++)q.push("_"+o+"_"+t);n[o]={formatString:p,chunkNames:q}}});return n}function s(k,n){b.each(n,function(o){for(var p=k[o].match(C),r=p.length,q=0;q<r;q++)k[n[o].chunkNames[q]]=+p[q];delete k[o]})}function x(k,n){b.each(n,function(o){var p=k[o],r=n[o].chunkNames;p={};for(var q,t=r.length,A=0;A<t;A++){q=r[A];p[q]=k[q];delete k[q]}r=n[o].chunkNames;w.length=0;q=r.length;for(t=0;t<q;t++)w.push(p[r[t]]);p=w;r=n[o].formatString;q=p.length;for(t=0;t<
q;t++)r=r.replace(v,+p[t].toFixed(4));k[o]=j(F,r,l)})}function u(k,n){b.each(n,function(o){var p=n[o].chunkNames,r=p.length,q=k[o],t;if(typeof q==="string"){q=q.split(" ");var A=q[q.length-1];for(t=0;t<r;t++)k[p[t]]=q[t]||A}else for(t=0;t<r;t++)k[p[t]]=q;delete k[o]})}function E(k,n){b.each(n,function(o){var p=n[o].chunkNames,r=p.length,q=k[p[0]];if(typeof q==="string"){q="";for(var t=0;t<r;t++){q+=" "+k[p[t]];delete k[p[t]]}k[o]=q.substr(1)}else k[o]=q})}var D=/(\d|\-|\.)/,G=/([^\-0-9\.]+)/g,C=/[0-9.\-]+/g,
F=RegExp("rgb\\("+C.source+/,\s*/.source+C.source+/,\s*/.source+C.source+"\\)","g"),y=/^.*\(/,B=/#([0-9]|[a-f]){3,6}/gi,v="VAL",z=[],w=[];b.prototype.filter.token={tweenCreated:function(k,n,o){f(k);f(n);f(o);this._tokenData=m(k)},beforeTween:function(k,n,o,p){u(p,this._tokenData);s(k,this._tokenData);s(n,this._tokenData);s(o,this._tokenData)},afterTween:function(k,n,o,p){x(k,this._tokenData);x(n,this._tokenData);x(o,this._tokenData);E(p,this._tokenData)}}})(c)}).call(null)},{}],2:[function(d,g){var e=
d("./shape"),a=d("./utils"),c=function(){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}";this.containerAspectRatio=1;e.apply(this,arguments)};c.prototype=new e;c.prototype.constructor=c;c.prototype._pathString=function(b){var f=b.strokeWidth;if(b.trailWidth&&b.trailWidth>b.strokeWidth)f=b.trailWidth;b=50-f/2;return a.render(this._pathTemplate,{radius:b,"2radius":b*2})};c.prototype._trailString=function(b){return this._pathString(b)};
g.exports=c},{"./shape":7,"./utils":8}],3:[function(d,g){var e=d("./shape"),a=d("./utils"),c=function(){this._pathTemplate="M 0,{center} L 100,{center}";e.apply(this,arguments)};c.prototype=new e;c.prototype.constructor=c;c.prototype._initializeSvg=function(b,f){b.setAttribute("viewBox","0 0 100 "+f.strokeWidth);b.setAttribute("preserveAspectRatio","none")};c.prototype._pathString=function(b){return a.render(this._pathTemplate,{center:b.strokeWidth/2})};c.prototype._trailString=function(b){return this._pathString(b)};
g.exports=c},{"./shape":7,"./utils":8}],4:[function(d,g){g.exports={Line:d("./line"),Circle:d("./circle"),SemiCircle:d("./semicircle"),Path:d("./path"),Shape:d("./shape"),utils:d("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(d,g){var e=d("shifty"),a=d("./utils"),c={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},b=function f(h,i){if(!(this instanceof f))throw Error("Constructor was called without new keyword");i=a.extend({duration:800,
easing:"linear",from:{},to:{},step:function(){}},i);this.path=a.isString(h)?document.querySelector(h):h;this._opts=i;this._tweenable=null;var j=this.path.getTotalLength();this.path.style.strokeDasharray=j+" "+j;this.set(0)};b.prototype.value=function(){var f=this._getComputedDashOffset(),h=this.path.getTotalLength();return parseFloat((1-f/h).toFixed(6),10)};b.prototype.set=function(f){this.stop();this.path.style.strokeDashoffset=this._progressToOffset(f);var h=this._opts.step;if(a.isFunction(h)){var i=
this._easing(this._opts.easing);f=this._calculateTo(f,i);h(f,this._opts.shape||this,this._opts.attachment)}};b.prototype.stop=function(){this._stopTween();this.path.style.strokeDashoffset=this._getComputedDashOffset()};b.prototype.animate=function(f,h,i){h=h||{};if(a.isFunction(h)){i=h;h={}}var j=a.extend({},h),l=a.extend({},this._opts);h=a.extend(l,h);l=this._easing(h.easing);j=this._resolveFromAndTo(f,l,j);this.stop();this.path.getBoundingClientRect();var m=this._getComputedDashOffset();f=this._progressToOffset(f);
var s=this;this._tweenable=new e;this._tweenable.tween({from:a.extend({offset:m},j.from),to:a.extend({offset:f},j.to),duration:h.duration,easing:l,step:function(x){s.path.style.strokeDashoffset=x.offset;h.step(x,h.shape||s,h.attachment)},finish:function(){a.isFunction(i)&&i()}})};b.prototype._getComputedDashOffset=function(){var f=window.getComputedStyle(this.path,null);return parseFloat(f.getPropertyValue("stroke-dashoffset"),10)};b.prototype._progressToOffset=function(f){var h=this.path.getTotalLength();
return h-f*h};b.prototype._resolveFromAndTo=function(f,h,i){if(i.from&&i.to)return{from:i.from,to:i.to};return{from:this._calculateFrom(h),to:this._calculateTo(f,h)}};b.prototype._calculateFrom=function(f){return e.interpolate(this._opts.from,this._opts.to,this.value(),f)};b.prototype._calculateTo=function(f,h){return e.interpolate(this._opts.from,this._opts.to,f,h)};b.prototype._stopTween=function(){if(this._tweenable!==null){this._tweenable.stop();this._tweenable=null}};b.prototype._easing=function(f){if(c.hasOwnProperty(f))return c[f];
return f};g.exports=b},{"./utils":8,shifty:1}],6:[function(d,g){var e=d("./shape"),a=d("./circle"),c=d("./utils"),b=function(){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0";this.containerAspectRatio=2;e.apply(this,arguments)};b.prototype=new e;b.prototype.constructor=b;b.prototype._initializeSvg=function(f){f.setAttribute("viewBox","0 0 100 50")};b.prototype._initializeTextContainer=function(f,h,i){if(f.text.style){i.style.top="auto";i.style.bottom="0";f.text.alignToBottom?
c.setStyle(i,"transform","translate(-50%, 0)"):c.setStyle(i,"transform","translate(-50%, 50%)")}};b.prototype._pathString=a.prototype._pathString;b.prototype._trailString=a.prototype._trailString;g.exports=b},{"./circle":2,"./shape":7,"./utils":8}],7:[function(d,g){var e=d("./path"),a=d("./utils"),c=function b(f,h){if(!(this instanceof b))throw Error("Constructor was called without new keyword");if(arguments.length!==0){this._opts=a.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,
fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:true,value:"translate(-50%, -50%)"}},autoStyleContainer:true,alignToBottom:true,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:false},h,true);if(a.isObject(h)&&h.svgStyle!==undefined)this._opts.svgStyle=h.svgStyle;if(a.isObject(h)&&a.isObject(h.text)&&h.text.style!==undefined)this._opts.text.style=h.text.style;var i=this._createSvgView(this._opts),
j;j=a.isString(f)?document.querySelector(f):f;if(!j)throw Error("Container does not exist: "+f);this._container=j;this._container.appendChild(i.svg);this._opts.warnings&&this._warnContainerAspectRatio(this._container);this._opts.svgStyle&&a.setStyles(i.svg,this._opts.svgStyle);this.svg=i.svg;this.path=i.path;this.trail=i.trail;this.text=null;j=a.extend({attachment:undefined,shape:this},this._opts);this._progressPath=new e(i.path,j);a.isObject(this._opts.text)&&this._opts.text.value!==null&&this.setText(this._opts.text.value)}};
c.prototype.animate=function(b,f,h){if(this._progressPath===null)throw Error("Object is destroyed");this._progressPath.animate(b,f,h)};c.prototype.stop=function(){if(this._progressPath===null)throw Error("Object is destroyed");this._progressPath!==undefined&&this._progressPath.stop()};c.prototype.destroy=function(){if(this._progressPath===null)throw Error("Object is destroyed");this.stop();this.svg.parentNode.removeChild(this.svg);this._progressPath=this.trail=this.path=this.svg=null;if(this.text!==
null){this.text.parentNode.removeChild(this.text);this.text=null}};c.prototype.set=function(b){if(this._progressPath===null)throw Error("Object is destroyed");this._progressPath.set(b)};c.prototype.value=function(){if(this._progressPath===null)throw Error("Object is destroyed");if(this._progressPath===undefined)return 0;return this._progressPath.value()};c.prototype.setText=function(b){if(this._progressPath===null)throw Error("Object is destroyed");if(this.text===null){this.text=this._createTextContainer(this._opts,
this._container);this._container.appendChild(this.text)}if(a.isObject(b)){a.removeChildren(this.text);this.text.appendChild(b)}else this.text.innerHTML=b};c.prototype._createSvgView=function(b){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(f,b);var h=null;if(b.trailColor||b.trailWidth){h=this._createTrail(b);f.appendChild(h)}b=this._createPath(b);f.appendChild(b);return{svg:f,path:b,trail:h}};c.prototype._initializeSvg=function(b){b.setAttribute("viewBox",
"0 0 100 100")};c.prototype._createPath=function(b){return this._createPathElement(this._pathString(b),b)};c.prototype._createTrail=function(b){var f=this._trailString(b);b=a.extend({},b);if(!b.trailColor)b.trailColor="#eee";if(!b.trailWidth)b.trailWidth=b.strokeWidth;b.color=b.trailColor;b.strokeWidth=b.trailWidth;b.fill=null;return this._createPathElement(f,b)};c.prototype._createPathElement=function(b,f){var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",b);
h.setAttribute("stroke",f.color);h.setAttribute("stroke-width",f.strokeWidth);f.fill?h.setAttribute("fill",f.fill):h.setAttribute("fill-opacity","0");return h};c.prototype._createTextContainer=function(b,f){var h=document.createElement("div");h.className=b.text.className;var i=b.text.style;if(i){if(b.text.autoStyleContainer)f.style.position="relative";a.setStyles(h,i);if(!i.color)h.style.color=b.color}this._initializeTextContainer(b,f,h);return h};c.prototype._initializeTextContainer=function(){};
c.prototype._pathString=function(){throw Error("Override this function for each progress bar");};c.prototype._trailString=function(){throw Error("Override this function for each progress bar");};c.prototype._warnContainerAspectRatio=function(b){if(this.containerAspectRatio){var f=window.getComputedStyle(b,null),h=parseFloat(f.getPropertyValue("width"),10),i=parseFloat(f.getPropertyValue("height"),10);if(!a.floatEquals(this.containerAspectRatio,h/i)){console.warn("Incorrect aspect ratio of container",
"#"+b.id,"detected:",f.getPropertyValue("width")+"(width)","/",f.getPropertyValue("height")+"(height)","=",h/i);console.warn("Aspect ratio of should be",this.containerAspectRatio)}}};g.exports=c},{"./path":5,"./utils":8}],8:[function(d,g){function e(i,j,l){i=i||{};j=j||{};l=l||false;for(var m in j)if(j.hasOwnProperty(m)){var s=i[m],x=j[m];i[m]=l&&b(s)&&b(x)?e(s,x,l):x}return i}function a(i,j,l){i=i.style;for(var m=0;m<h.length;++m)i[h[m]+c(j)]=l;i[j]=l}function c(i){return i.charAt(0).toUpperCase()+
i.slice(1)}function b(i){if(Object.prototype.toString.call(i)==="[object Array]")return false;return typeof i==="object"&&!!i}function f(i,j){for(var l in i)i.hasOwnProperty(l)&&j(i[l],l)}var h="Webkit Moz O ms".split(" ");g.exports={extend:e,render:function(i,j){var l=i,m;for(m in j)if(j.hasOwnProperty(m))l=l.replace(RegExp("\\{"+m+"\\}","g"),j[m]);return l},setStyle:a,setStyles:function(i,j){f(j,function(l,m){if(!(l===null||l===undefined))if(b(l)&&l.prefix===true)a(i,m,l.value);else i.style[m]=
l})},capitalize:c,isString:function(i){return typeof i==="string"||i instanceof String},isFunction:function(i){return typeof i==="function"},isObject:b,forEachObject:f,floatEquals:function(i,j){return Math.abs(i-j)<0.001},removeChildren:function(i){for(;i.firstChild;)i.removeChild(i.firstChild)}}},{}]},{},[4])(4)});
(function(d){if(typeof define==="function"&&define.amd)define(["jquery"],d);else if(typeof exports!=="undefined")module.exports=d(require("jquery"));else d(jQuery)})(function(d){var g=window.Slick||{};g=function(){var e=0;return function(a,c){var b;this.defaults={accessibility:true,adaptiveHeight:false,appendArrows:d(a),appendDots:d(a),arrows:true,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',
nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:false,autoplaySpeed:3E3,centerMode:false,centerPadding:"50px",cssEase:"ease",customPaging:function(f,h){return d('<button type="button" data-role="none" role="button" tabindex="0" ></button>').text(h+1)},dots:false,dotsClass:"slick-dots",draggable:true,easing:"linear",edgeFriction:0.35,fade:false,focusOnSelect:false,infinite:true,initialSlide:0,lazyLoad:"ondemand",mobileFirst:false,
pauseOnHover:true,pauseOnFocus:true,pauseOnDotsHover:false,respondTo:"window",responsive:null,rows:1,rtl:false,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,useTransform:true,variableWidth:false,vertical:false,verticalSwiping:false,waitForAnimate:true,zIndex:1E3};this.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,
listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:false,unslicked:false};d.extend(this,this.initials);this.animProp=this.animType=this.activeBreakpoint=null;this.breakpoints=[];this.breakpointSettings=[];this.interrupted=this.focussed=this.cssTransitions=false;this.hidden="hidden";this.paused=true;this.respondTo=this.positionProp=null;this.rowCount=
1;this.shouldClick=true;this.$slider=d(a);this.transitionType=this.transformType=this.$slidesCache=null;this.visibilityChange="visibilitychange";this.windowWidth=0;this.windowTimer=null;b=d(a).data("slick")||{};this.options=d.extend({},this.defaults,c,b);this.currentSlide=this.options.initialSlide;this.originalSettings=this.options;if(typeof document.mozHidden!=="undefined"){this.hidden="mozHidden";this.visibilityChange="mozvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){this.hidden=
"webkitHidden";this.visibilityChange="webkitvisibilitychange"}this.autoPlay=d.proxy(this.autoPlay,this);this.autoPlayClear=d.proxy(this.autoPlayClear,this);this.autoPlayIterator=d.proxy(this.autoPlayIterator,this);this.changeSlide=d.proxy(this.changeSlide,this);this.clickHandler=d.proxy(this.clickHandler,this);this.selectHandler=d.proxy(this.selectHandler,this);this.setPosition=d.proxy(this.setPosition,this);this.swipeHandler=d.proxy(this.swipeHandler,this);this.dragHandler=d.proxy(this.dragHandler,
this);this.keyHandler=d.proxy(this.keyHandler,this);this.instanceUid=e++;this.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;this.registerBreakpoints();this.init(true)}}();g.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};g.prototype.addSlide=g.prototype.slickAdd=function(e,a,c){if(typeof a==="boolean"){c=a;a=null}else if(a<0||a>=this.slideCount)return false;this.unload();if(typeof a==="number")if(a===
0&&this.$slides.length===0)d(e).appendTo(this.$slideTrack);else c?d(e).insertBefore(this.$slides.eq(a)):d(e).insertAfter(this.$slides.eq(a));else c===true?d(e).prependTo(this.$slideTrack):d(e).appendTo(this.$slideTrack);this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slides.each(function(b,f){d(f).attr("data-slick-index",b)});this.$slidesCache=this.$slides;this.reinit()};g.prototype.animateHeight=
function(){this.options.slidesToShow===1&&this.options.adaptiveHeight===true&&this.options.vertical===false&&this.$list.animate({height:this.$slides.eq(this.currentSlide).outerHeight(true)},this.options.speed)};g.prototype.animateSlide=function(e,a){var c={},b=this;b.animateHeight();if(b.options.rtl===true&&b.options.vertical===false)e=-e;if(b.transformsEnabled===false)b.options.vertical===false?b.$slideTrack.animate({left:e},b.options.speed,b.options.easing,a):b.$slideTrack.animate({top:e},b.options.speed,
b.options.easing,a);else if(b.cssTransitions===false){if(b.options.rtl===true)b.currentLeft=-b.currentLeft;d({animStart:b.currentLeft}).animate({animStart:e},{duration:b.options.speed,easing:b.options.easing,step:function(f){f=Math.ceil(f);c[b.animType]=b.options.vertical===false?"translate("+f+"px, 0px)":"translate(0px,"+f+"px)";b.$slideTrack.css(c)},complete:function(){a&&a.call()}})}else{b.applyTransition();e=Math.ceil(e);c[b.animType]=b.options.vertical===false?"translate3d("+e+"px, 0px, 0px)":
"translate3d(0px,"+e+"px, 0px)";b.$slideTrack.css(c);a&&setTimeout(function(){b.disableTransition();a.call()},b.options.speed)}};g.prototype.getNavTarget=function(){var e=this.options.asNavFor;if(e&&e!==null)e=d(e).not(this.$slider);return e};g.prototype.asNavFor=function(e){var a=this.getNavTarget();a!==null&&typeof a==="object"&&a.each(function(){var c=d(this).slick("getSlick");c.unslicked||c.slideHandler(e,true)})};g.prototype.applyTransition=function(e){var a={};a[this.transitionType]=this.options.fade===
false?this.transformType+" "+this.options.speed+"ms "+this.options.cssEase:"opacity "+this.options.speed+"ms "+this.options.cssEase;this.options.fade===false?this.$slideTrack.css(a):this.$slides.eq(e).css(a)};g.prototype.autoPlay=function(){this.autoPlayClear();if(this.slideCount>this.options.slidesToShow)this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed)};g.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)};g.prototype.autoPlayIterator=
function(){var e=this.currentSlide+this.options.slidesToScroll;if(!this.paused&&!this.interrupted&&!this.focussed){if(this.options.infinite===false)if(this.direction===1&&this.currentSlide+1===this.slideCount-1)this.direction=0;else if(this.direction===0){e=this.currentSlide-this.options.slidesToScroll;if(this.currentSlide-1===0)this.direction=1}this.slideHandler(e)}};g.prototype.buildArrows=function(){if(this.options.arrows===true){this.$prevArrow=d(this.options.prevArrow).addClass("slick-arrow");
this.$nextArrow=d(this.options.nextArrow).addClass("slick-arrow");if(this.slideCount>this.options.slidesToShow){this.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");this.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.prependTo(this.options.appendArrows);this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.appendTo(this.options.appendArrows);this.options.infinite!==true&&this.$prevArrow.addClass("slick-disabled").attr("aria-disabled",
"true")}else this.$prevArrow.add(this.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"})}};g.prototype.buildDots=function(){var e,a;if(this.options.dots===true&&this.slideCount>this.options.slidesToShow){this.$slider.addClass("slick-dotted");a=d("<ul ></ul>").addClass(this.options.dotsClass);for(e=0;e<=this.getDotCount();e+=1)a.append(d("<li ></li>").append(this.options.customPaging.call(this,this,e)));this.$dots=a.appendTo(this.options.appendDots);this.$dots.find("li").first().addClass("slick-active").attr("aria-hidden",
"false")}};g.prototype.buildOut=function(){this.$slides=this.$slider.children(this.options.slide+":not(.slick-cloned)").addClass("slick-slide");this.slideCount=this.$slides.length;this.$slides.each(function(e,a){d(a).attr("data-slick-index",e).data("originalStyling",d(a).attr("style")||"")});this.$slider.addClass("slick-slider");this.$slideTrack=this.slideCount===0?d('<div class="slick-track"></div>').appendTo(this.$slider):this.$slides.wrapAll('<div class="slick-track"></div>').parent();this.$list=this.$slideTrack.wrap('<div aria-live="polite" class="slick-list"></div>').parent();
this.$slideTrack.css("opacity",0);if(this.options.centerMode===true||this.options.swipeToSlide===true)this.options.slidesToScroll=1;d("img[data-lazy]",this.$slider).not("[src]").addClass("slick-loading");this.setupInfinite();this.buildArrows();this.buildDots();this.updateDots();this.setSlideClasses(typeof this.currentSlide==="number"?this.currentSlide:0);this.options.draggable===true&&this.$list.addClass("draggable")};g.prototype.buildRows=function(){var e,a,c,b,f,h,i;b=document.createDocumentFragment();
h=this.$slider.children();if(this.options.rows>1){i=this.options.slidesPerRow*this.options.rows;f=Math.ceil(h.length/i);for(e=0;e<f;e++){var j=document.createElement("div");for(a=0;a<this.options.rows;a++){var l=document.createElement("div");for(c=0;c<this.options.slidesPerRow;c++){var m=e*i+(a*this.options.slidesPerRow+c);h.get(m)&&l.appendChild(h.get(m))}j.appendChild(l)}b.appendChild(j)}this.$slider.empty().append(b);this.$slider.children().children().children().css({width:100/this.options.slidesPerRow+
"%",display:"inline-block"})}};g.prototype.checkResponsive=function(e,a){var c,b,f,h=false;b=this.$slider.width();var i=window.innerWidth||d(window).width();if(this.respondTo==="window")f=i;else if(this.respondTo==="slider")f=b;else if(this.respondTo==="min")f=Math.min(i,b);if(this.options.responsive&&this.options.responsive.length&&this.options.responsive!==null){b=null;for(c in this.breakpoints)if(this.breakpoints.hasOwnProperty(c))if(this.originalSettings.mobileFirst===false){if(f<this.breakpoints[c])b=
this.breakpoints[c]}else if(f>this.breakpoints[c])b=this.breakpoints[c];if(b!==null)if(this.activeBreakpoint!==null){if(b!==this.activeBreakpoint||a){this.activeBreakpoint=b;if(this.breakpointSettings[b]==="unslick")this.unslick(b);else{this.options=d.extend({},this.originalSettings,this.breakpointSettings[b]);if(e===true)this.currentSlide=this.options.initialSlide;this.refresh(e)}h=b}}else{this.activeBreakpoint=b;if(this.breakpointSettings[b]==="unslick")this.unslick(b);else{this.options=d.extend({},
this.originalSettings,this.breakpointSettings[b]);if(e===true)this.currentSlide=this.options.initialSlide;this.refresh(e)}h=b}else if(this.activeBreakpoint!==null){this.activeBreakpoint=null;this.options=this.originalSettings;if(e===true)this.currentSlide=this.options.initialSlide;this.refresh(e);h=b}!e&&h!==false&&this.$slider.trigger("breakpoint",[this,h])}};g.prototype.changeSlide=function(e,a){var c=d(e.currentTarget),b;c.is("a")&&e.preventDefault();c.is("li")||(c=c.closest("li"));b=this.slideCount%
this.options.slidesToScroll!==0?0:(this.slideCount-this.currentSlide)%this.options.slidesToScroll;switch(e.data.message){case "previous":c=b===0?this.options.slidesToScroll:this.options.slidesToShow-b;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide-c,false,a);break;case "next":c=b===0?this.options.slidesToScroll:b;this.slideCount>this.options.slidesToShow&&this.slideHandler(this.currentSlide+c,false,a);break;case "index":this.slideHandler(this.checkNavigable(e.data.index===
0?0:e.data.index||c.index()*this.options.slidesToScroll),false,a);c.children().trigger("focus")}};g.prototype.checkNavigable=function(e){var a,c;a=this.getNavigableIndexes();c=0;if(e>a[a.length-1])e=a[a.length-1];else for(var b in a){if(e<a[b]){e=c;break}c=a[b]}return e};g.prototype.cleanUpEvents=function(){this.options.dots&&this.$dots!==null&&d("li",this.$dots).off("click.slick",this.changeSlide).off("mouseenter.slick",d.proxy(this.interrupt,this,true)).off("mouseleave.slick",d.proxy(this.interrupt,
this,false));this.$slider.off("focus.slick blur.slick");if(this.options.arrows===true&&this.slideCount>this.options.slidesToShow){this.$prevArrow&&this.$prevArrow.off("click.slick",this.changeSlide);this.$nextArrow&&this.$nextArrow.off("click.slick",this.changeSlide)}this.$list.off("touchstart.slick mousedown.slick",this.swipeHandler);this.$list.off("touchmove.slick mousemove.slick",this.swipeHandler);this.$list.off("touchend.slick mouseup.slick",this.swipeHandler);this.$list.off("touchcancel.slick mouseleave.slick",
this.swipeHandler);this.$list.off("click.slick",this.clickHandler);d(document).off(this.visibilityChange,this.visibility);this.cleanUpSlideEvents();this.options.accessibility===true&&this.$list.off("keydown.slick",this.keyHandler);this.options.focusOnSelect===true&&d(this.$slideTrack).children().off("click.slick",this.selectHandler);d(window).off("orientationchange.slick.slick-"+this.instanceUid,this.orientationChange);d(window).off("resize.slick.slick-"+this.instanceUid,this.resize);d("[draggable!=true]",
this.$slideTrack).off("dragstart",this.preventDefault);d(window).off("load.slick.slick-"+this.instanceUid,this.setPosition);d(document).off("ready.slick.slick-"+this.instanceUid,this.setPosition)};g.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",d.proxy(this.interrupt,this,true));this.$list.off("mouseleave.slick",d.proxy(this.interrupt,this,false))};g.prototype.cleanUpRows=function(){var e;if(this.options.rows>1){e=this.$slides.children().children();e.removeAttr("style");
this.$slider.empty().append(e)}};g.prototype.clickHandler=function(e){if(this.shouldClick===false){e.stopImmediatePropagation();e.stopPropagation();e.preventDefault()}};g.prototype.destroy=function(e){this.autoPlayClear();this.touchObject={};this.cleanUpEvents();d(".slick-cloned",this.$slider).detach();this.$dots&&this.$dots.remove();if(this.$prevArrow&&this.$prevArrow.length){this.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",
"");this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove()}if(this.$nextArrow&&this.$nextArrow.length){this.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove()}if(this.$slides){this.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){d(this).attr("style",
d(this).data("originalStyling"))});this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.detach();this.$list.detach();this.$slider.append(this.$slides)}this.cleanUpRows();this.$slider.removeClass("slick-slider");this.$slider.removeClass("slick-initialized");this.$slider.removeClass("slick-dotted");this.unslicked=true;e||this.$slider.trigger("destroy",[this])};g.prototype.disableTransition=function(e){var a={};a[this.transitionType]="";this.options.fade===false?this.$slideTrack.css(a):
this.$slides.eq(e).css(a)};g.prototype.fadeSlide=function(e,a){var c=this;if(c.cssTransitions===false){c.$slides.eq(e).css({zIndex:c.options.zIndex});c.$slides.eq(e).animate({opacity:1},c.options.speed,c.options.easing,a)}else{c.applyTransition(e);c.$slides.eq(e).css({opacity:1,zIndex:c.options.zIndex});a&&setTimeout(function(){c.disableTransition(e);a.call()},c.options.speed)}};g.prototype.fadeSlideOut=function(e){if(this.cssTransitions===false)this.$slides.eq(e).animate({opacity:0,zIndex:this.options.zIndex-
2},this.options.speed,this.options.easing);else{this.applyTransition(e);this.$slides.eq(e).css({opacity:0,zIndex:this.options.zIndex-2})}};g.prototype.filterSlides=g.prototype.slickFilter=function(e){if(e!==null){this.$slidesCache=this.$slides;this.unload();this.$slideTrack.children(this.options.slide).detach();this.$slidesCache.filter(e).appendTo(this.$slideTrack);this.reinit()}};g.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",
function(a){a.stopImmediatePropagation();var c=d(this);setTimeout(function(){if(e.options.pauseOnFocus){e.focussed=c.is(":focus");e.autoPlay()}},0)})};g.prototype.getCurrent=g.prototype.slickCurrentSlide=function(){return this.currentSlide};g.prototype.getDotCount=function(){var e=0,a=0,c=0;if(this.options.infinite===true)for(;e<this.slideCount;){++c;e=a+this.options.slidesToScroll;a+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow}else if(this.options.centerMode===
true)c=this.slideCount;else if(this.options.asNavFor)for(;e<this.slideCount;){++c;e=a+this.options.slidesToScroll;a+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow}else c=1+Math.ceil((this.slideCount-this.options.slidesToShow)/this.options.slidesToScroll);return c-1};g.prototype.getLeft=function(e){var a,c=0;this.slideOffset=0;a=this.$slides.first().outerHeight(true);if(this.options.infinite===true){if(this.slideCount>this.options.slidesToShow){this.slideOffset=
this.slideWidth*this.options.slidesToShow*-1;c=a*this.options.slidesToShow*-1}if(this.slideCount%this.options.slidesToScroll!==0)if(e+this.options.slidesToScroll>this.slideCount&&this.slideCount>this.options.slidesToShow)if(e>this.slideCount){this.slideOffset=(this.options.slidesToShow-(e-this.slideCount))*this.slideWidth*-1;c=(this.options.slidesToShow-(e-this.slideCount))*a*-1}else{this.slideOffset=this.slideCount%this.options.slidesToScroll*this.slideWidth*-1;c=this.slideCount%this.options.slidesToScroll*
a*-1}}else if(e+this.options.slidesToShow>this.slideCount){this.slideOffset=(e+this.options.slidesToShow-this.slideCount)*this.slideWidth;c=(e+this.options.slidesToShow-this.slideCount)*a}if(this.slideCount<=this.options.slidesToShow)c=this.slideOffset=0;if(this.options.centerMode===true&&this.options.infinite===true)this.slideOffset+=this.slideWidth*Math.floor(this.options.slidesToShow/2)-this.slideWidth;else if(this.options.centerMode===true){this.slideOffset=0;this.slideOffset+=this.slideWidth*
Math.floor(this.options.slidesToShow/2)}a=this.options.vertical===false?e*this.slideWidth*-1+this.slideOffset:e*a*-1+c;if(this.options.variableWidth===true){c=this.slideCount<=this.options.slidesToShow||this.options.infinite===false?this.$slideTrack.children(".slick-slide").eq(e):this.$slideTrack.children(".slick-slide").eq(e+this.options.slidesToShow);a=this.options.rtl===true?c[0]?(this.$slideTrack.width()-c[0].offsetLeft-c.width())*-1:0:c[0]?c[0].offsetLeft*-1:0;if(this.options.centerMode===true){c=
this.slideCount<=this.options.slidesToShow||this.options.infinite===false?this.$slideTrack.children(".slick-slide").eq(e):this.$slideTrack.children(".slick-slide").eq(e+this.options.slidesToShow+1);a=this.options.rtl===true?c[0]?(this.$slideTrack.width()-c[0].offsetLeft-c.width())*-1:0:c[0]?c[0].offsetLeft*-1:0;a+=(this.$list.width()-c.outerWidth())/2}}return a};g.prototype.getOption=g.prototype.slickGetOption=function(e){return this.options[e]};g.prototype.getNavigableIndexes=function(){var e=0,
a=0,c=[],b;if(this.options.infinite===false)b=this.slideCount;else{e=this.options.slidesToScroll*-1;a=this.options.slidesToScroll*-1;b=this.slideCount*2}for(;e<b;){c.push(e);e=a+this.options.slidesToScroll;a+=this.options.slidesToScroll<=this.options.slidesToShow?this.options.slidesToScroll:this.options.slidesToShow}return c};g.prototype.getSlick=function(){return this};g.prototype.getSlideCount=function(){var e=this,a,c;c=e.options.centerMode===true?e.slideWidth*Math.floor(e.options.slidesToShow/
2):0;if(e.options.swipeToSlide===true){e.$slideTrack.find(".slick-slide").each(function(b,f){if(f.offsetLeft-c+d(f).outerWidth()/2>e.swipeLeft*-1){a=f;return false}});return Math.abs(d(a).attr("data-slick-index")-e.currentSlide)||1}else return e.options.slidesToScroll};g.prototype.goTo=g.prototype.slickGoTo=function(e,a){this.changeSlide({data:{message:"index",index:parseInt(e)}},a)};g.prototype.init=function(e){if(!d(this.$slider).hasClass("slick-initialized")){d(this.$slider).addClass("slick-initialized");
this.buildRows();this.buildOut();this.setProps();this.startLoad();this.loadSlider();this.initializeEvents();this.updateArrows();this.updateDots();this.checkResponsive(true);this.focusHandler()}e&&this.$slider.trigger("init",[this]);this.options.accessibility===true&&this.initADA();if(this.options.autoplay){this.paused=false;this.autoPlay()}};g.prototype.initADA=function(){var e=this;e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});
e.$slideTrack.attr("role","listbox");e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(a){d(this).attr({role:"option","aria-describedby":"slick-slide"+e.instanceUid+a+""})});e.$dots!==null&&e.$dots.attr("role","tablist").find("li").each(function(a){d(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+e.instanceUid+a+"",id:"slick-slide"+e.instanceUid+a+""})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role",
"toolbar");e.activateADA()};g.prototype.initArrowEvents=function(){if(this.options.arrows===true&&this.slideCount>this.options.slidesToShow){this.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},this.changeSlide);this.$nextArrow.off("click.slick").on("click.slick",{message:"next"},this.changeSlide)}};g.prototype.initDotEvents=function(){if(this.options.dots===true&&this.slideCount>this.options.slidesToShow)d("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide);
if(this.options.dots===true&&this.options.pauseOnDotsHover===true)d("li",this.$dots).on("mouseenter.slick",d.proxy(this.interrupt,this,true)).on("mouseleave.slick",d.proxy(this.interrupt,this,false))};g.prototype.initSlideEvents=function(){if(this.options.pauseOnHover){this.$list.on("mouseenter.slick",d.proxy(this.interrupt,this,true));this.$list.on("mouseleave.slick",d.proxy(this.interrupt,this,false))}};g.prototype.initializeEvents=function(){this.initArrowEvents();this.initDotEvents();this.initSlideEvents();
this.$list.on("touchstart.slick mousedown.slick",{action:"start"},this.swipeHandler);this.$list.on("touchmove.slick mousemove.slick",{action:"move"},this.swipeHandler);this.$list.on("touchend.slick mouseup.slick",{action:"end"},this.swipeHandler);this.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},this.swipeHandler);this.$list.on("click.slick",this.clickHandler);d(document).on(this.visibilityChange,d.proxy(this.visibility,this));if(this.options.accessibility===true)this.$list.on("keydown.slick",
this.keyHandler);if(this.options.focusOnSelect===true)d(this.$slideTrack).children().on("click.slick",this.selectHandler);d(window).on("orientationchange.slick.slick-"+this.instanceUid,d.proxy(this.orientationChange,this));d(window).on("resize.slick.slick-"+this.instanceUid,d.proxy(this.resize,this));d("[draggable!=true]",this.$slideTrack).on("dragstart",this.preventDefault);d(window).on("load.slick.slick-"+this.instanceUid,this.setPosition);d(document).on("ready.slick.slick-"+this.instanceUid,this.setPosition)};
g.prototype.initUI=function(){if(this.options.arrows===true&&this.slideCount>this.options.slidesToShow){this.$prevArrow.show();this.$nextArrow.show()}this.options.dots===true&&this.slideCount>this.options.slidesToShow&&this.$dots.show()};g.prototype.keyHandler=function(e){if(!e.target.tagName.match("TEXTAREA|INPUT|SELECT"))if(e.keyCode===37&&this.options.accessibility===true)this.changeSlide({data:{message:this.options.rtl===true?"next":"previous"}});else if(e.keyCode===39&&this.options.accessibility===
true)this.changeSlide({data:{message:this.options.rtl===true?"previous":"next"}})};g.prototype.lazyLoad=function(){function e(f){d("img[data-lazy]",f).each(function(){var h=d(this),i=d(this).attr("data-lazy"),j=document.createElement("img");j.onload=function(){h.animate({opacity:0},100,function(){h.attr("src",i).animate({opacity:1},200,function(){h.removeAttr("data-lazy").removeClass("slick-loading")});a.$slider.trigger("lazyLoaded",[a,h,i])})};j.onerror=function(){h.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");
a.$slider.trigger("lazyLoadError",[a,h,i])};j.src=i})}var a=this,c,b;if(a.options.centerMode===true)if(a.options.infinite===true){c=a.currentSlide+(a.options.slidesToShow/2+1);b=c+a.options.slidesToShow+2}else{c=Math.max(0,a.currentSlide-(a.options.slidesToShow/2+1));b=2+(a.options.slidesToShow/2+1)+a.currentSlide}else{c=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide;b=Math.ceil(c+a.options.slidesToShow);if(a.options.fade===true){c>0&&c--;b<=a.slideCount&&b++}}c=a.$slider.find(".slick-slide").slice(c,
b);e(c);if(a.slideCount<=a.options.slidesToShow){c=a.$slider.find(".slick-slide");e(c)}else if(a.currentSlide>=a.slideCount-a.options.slidesToShow){c=a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow);e(c)}else if(a.currentSlide===0){c=a.$slider.find(".slick-cloned").slice(a.options.slidesToShow*-1);e(c)}};g.prototype.loadSlider=function(){this.setPosition();this.$slideTrack.css({opacity:1});this.$slider.removeClass("slick-loading");this.initUI();this.options.lazyLoad==="progressive"&&
this.progressiveLazyLoad()};g.prototype.next=g.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})};g.prototype.orientationChange=function(){this.checkResponsive();this.setPosition()};g.prototype.pause=g.prototype.slickPause=function(){this.autoPlayClear();this.paused=true};g.prototype.play=g.prototype.slickPlay=function(){this.autoPlay();this.options.autoplay=true;this.interrupted=this.focussed=this.paused=false};g.prototype.postSlide=function(e){if(!this.unslicked){this.$slider.trigger("afterChange",
[this,e]);this.animating=false;this.setPosition();this.swipeLeft=null;this.options.autoplay&&this.autoPlay();this.options.accessibility===true&&this.initADA()}};g.prototype.prev=g.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})};g.prototype.preventDefault=function(e){e.preventDefault()};g.prototype.progressiveLazyLoad=function(e){e=e||1;var a=this,c=d("img[data-lazy]",a.$slider),b,f;if(c.length){b=c.first();f=b.attr("data-lazy");c=document.createElement("img");c.onload=
function(){b.attr("src",f).removeAttr("data-lazy").removeClass("slick-loading");a.options.adaptiveHeight===true&&a.setPosition();a.$slider.trigger("lazyLoaded",[a,b,f]);a.progressiveLazyLoad()};c.onerror=function(){if(e<3)setTimeout(function(){a.progressiveLazyLoad(e+1)},500);else{b.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");a.$slider.trigger("lazyLoadError",[a,b,f]);a.progressiveLazyLoad()}};c.src=f}else a.$slider.trigger("allImagesLoaded",[a])};g.prototype.refresh=
function(e){var a;a=this.slideCount-this.options.slidesToShow;if(!this.options.infinite&&this.currentSlide>a)this.currentSlide=a;if(this.slideCount<=this.options.slidesToShow)this.currentSlide=0;a=this.currentSlide;this.destroy(true);d.extend(this,this.initials,{currentSlide:a});this.init();e||this.changeSlide({data:{message:"index",index:a}},false)};g.prototype.registerBreakpoints=function(){var e=this,a,c,b,f=e.options.responsive||null;if(d.type(f)==="array"&&f.length){e.respondTo=e.options.respondTo||
"window";for(a in f){b=e.breakpoints.length-1;c=f[a].breakpoint;if(f.hasOwnProperty(a)){for(;b>=0;){e.breakpoints[b]&&e.breakpoints[b]===c&&e.breakpoints.splice(b,1);b--}e.breakpoints.push(c);e.breakpointSettings[c]=f[a].settings}}e.breakpoints.sort(function(h,i){return e.options.mobileFirst?h-i:i-h})}};g.prototype.reinit=function(){this.$slides=this.$slideTrack.children(this.options.slide).addClass("slick-slide");this.slideCount=this.$slides.length;if(this.currentSlide>=this.slideCount&&this.currentSlide!==
0)this.currentSlide-=this.options.slidesToScroll;if(this.slideCount<=this.options.slidesToShow)this.currentSlide=0;this.registerBreakpoints();this.setProps();this.setupInfinite();this.buildArrows();this.updateArrows();this.initArrowEvents();this.buildDots();this.updateDots();this.initDotEvents();this.cleanUpSlideEvents();this.initSlideEvents();this.checkResponsive(false,true);if(this.options.focusOnSelect===true)d(this.$slideTrack).children().on("click.slick",this.selectHandler);this.setSlideClasses(typeof this.currentSlide===
"number"?this.currentSlide:0);this.setPosition();this.focusHandler();this.paused=!this.options.autoplay;this.autoPlay();this.$slider.trigger("reInit",[this])};g.prototype.resize=function(){var e=this;if(d(window).width()!==e.windowWidth){clearTimeout(e.windowDelay);e.windowDelay=window.setTimeout(function(){e.windowWidth=d(window).width();e.checkResponsive();e.unslicked||e.setPosition()},50)}};g.prototype.removeSlide=g.prototype.slickRemove=function(e,a,c){e=typeof e==="boolean"?e===true?0:this.slideCount-
1:a===true?--e:e;if(this.slideCount<1||e<0||e>this.slideCount-1)return false;this.unload();c===true?this.$slideTrack.children().remove():this.$slideTrack.children(this.options.slide).eq(e).remove();this.$slides=this.$slideTrack.children(this.options.slide);this.$slideTrack.children(this.options.slide).detach();this.$slideTrack.append(this.$slides);this.$slidesCache=this.$slides;this.reinit()};g.prototype.setCSS=function(e){var a={},c,b;if(this.options.rtl===true)e=-e;c=this.positionProp=="left"?Math.ceil(e)+
"px":"0px";b=this.positionProp=="top"?Math.ceil(e)+"px":"0px";a[this.positionProp]=e;if(this.transformsEnabled!==false){a={};a[this.animType]=this.cssTransitions===false?"translate("+c+", "+b+")":"translate3d("+c+", "+b+", 0px)"}this.$slideTrack.css(a)};g.prototype.setDimensions=function(){if(this.options.vertical===false)this.options.centerMode===true&&this.$list.css({padding:"0px "+this.options.centerPadding});else{this.$list.height(this.$slides.first().outerHeight(true)*this.options.slidesToShow);
this.options.centerMode===true&&this.$list.css({padding:this.options.centerPadding+" 0px"})}this.listWidth=this.$list.width();this.listHeight=this.$list.height();if(this.options.vertical===false&&this.options.variableWidth===false){this.slideWidth=Math.ceil(this.listWidth/this.options.slidesToShow);this.$slideTrack.width(Math.ceil(this.slideWidth*this.$slideTrack.children(".slick-slide").length))}else if(this.options.variableWidth===true)this.$slideTrack.width(5E3*this.slideCount);else{this.slideWidth=
Math.ceil(this.listWidth);this.$slideTrack.height(Math.ceil(this.$slides.first().outerHeight(true)*this.$slideTrack.children(".slick-slide").length))}var e=this.$slides.first().outerWidth(true)-this.$slides.first().width();this.options.variableWidth===false&&this.$slideTrack.children(".slick-slide").width(this.slideWidth-e)};g.prototype.setFade=function(){var e=this,a;e.$slides.each(function(c,b){a=e.slideWidth*c*-1;e.options.rtl===true?d(b).css({position:"relative",right:a,top:0,zIndex:e.options.zIndex-
2,opacity:0}):d(b).css({position:"relative",left:a,top:0,zIndex:e.options.zIndex-2,opacity:0})});e.$slides.eq(e.currentSlide).css({zIndex:e.options.zIndex-1,opacity:1})};g.prototype.setHeight=function(){this.options.slidesToShow===1&&this.options.adaptiveHeight===true&&this.options.vertical===false&&this.$list.css("height",this.$slides.eq(this.currentSlide).outerHeight(true))};g.prototype.setOption=g.prototype.slickSetOption=function(e,a,c){var b=this,f,h,i,j=false,l;if(d.type(e)==="object"){h=e;
j=a;l="multiple"}else if(d.type(e)==="string"){h=e;i=a;j=c;if(e==="responsive"&&d.type(a)==="array")l="responsive";else if(typeof a!=="undefined")l="single"}if(l==="single")b.options[h]=i;else if(l==="multiple")d.each(h,function(m,s){b.options[m]=s});else if(l==="responsive")for(f in i)if(d.type(b.options.responsive)!=="array")b.options.responsive=[i[f]];else{for(e=b.options.responsive.length-1;e>=0;){b.options.responsive[e].breakpoint===i[f].breakpoint&&b.options.responsive.splice(e,1);e--}b.options.responsive.push(i[f])}if(j){b.unload();
b.reinit()}};g.prototype.setPosition=function(){this.setDimensions();this.setHeight();this.options.fade===false?this.setCSS(this.getLeft(this.currentSlide)):this.setFade();this.$slider.trigger("setPosition",[this])};g.prototype.setProps=function(){var e=document.body.style;this.positionProp=this.options.vertical===true?"top":"left";this.positionProp==="top"?this.$slider.addClass("slick-vertical"):this.$slider.removeClass("slick-vertical");if(e.WebkitTransition!==undefined||e.MozTransition!==undefined||
e.msTransition!==undefined)if(this.options.useCSS===true)this.cssTransitions=true;if(this.options.fade)if(typeof this.options.zIndex==="number"){if(this.options.zIndex<3)this.options.zIndex=3}else this.options.zIndex=this.defaults.zIndex;if(e.OTransform!==undefined){this.animType="OTransform";this.transformType="-o-transform";this.transitionType="OTransition";if(e.perspectiveProperty===undefined&&e.webkitPerspective===undefined)this.animType=false}if(e.MozTransform!==undefined){this.animType="MozTransform";
this.transformType="-moz-transform";this.transitionType="MozTransition";if(e.perspectiveProperty===undefined&&e.MozPerspective===undefined)this.animType=false}if(e.webkitTransform!==undefined){this.animType="webkitTransform";this.transformType="-webkit-transform";this.transitionType="webkitTransition";if(e.perspectiveProperty===undefined&&e.webkitPerspective===undefined)this.animType=false}if(e.msTransform!==undefined){this.animType="msTransform";this.transformType="-ms-transform";this.transitionType=
"msTransition";if(e.msTransform===undefined)this.animType=false}if(e.transform!==undefined&&this.animType!==false){this.transformType=this.animType="transform";this.transitionType="transition"}this.transformsEnabled=this.options.useTransform&&this.animType!==null&&this.animType!==false};g.prototype.setSlideClasses=function(e){var a,c,b;c=this.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");this.$slides.eq(e).addClass("slick-current");
if(this.options.centerMode===true){a=Math.floor(this.options.slidesToShow/2);if(this.options.infinite===true){if(e>=a&&e<=this.slideCount-1-a)this.$slides.slice(e-a,e+a+1).addClass("slick-active").attr("aria-hidden","false");else{b=this.options.slidesToShow+e;c.slice(b-a+1,b+a+2).addClass("slick-active").attr("aria-hidden","false")}if(e===0)c.eq(c.length-1-this.options.slidesToShow).addClass("slick-center");else e===this.slideCount-1&&c.eq(this.options.slidesToShow).addClass("slick-center")}this.$slides.eq(e).addClass("slick-center")}else if(e>=
0&&e<=this.slideCount-this.options.slidesToShow)this.$slides.slice(e,e+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false");else if(c.length<=this.options.slidesToShow)c.addClass("slick-active").attr("aria-hidden","false");else{a=this.slideCount%this.options.slidesToShow;b=this.options.infinite===true?this.options.slidesToShow+e:e;this.options.slidesToShow==this.options.slidesToScroll&&this.slideCount-e<this.options.slidesToShow?c.slice(b-(this.options.slidesToShow-a),b+
a).addClass("slick-active").attr("aria-hidden","false"):c.slice(b,b+this.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")}this.options.lazyLoad==="ondemand"&&this.lazyLoad()};g.prototype.setupInfinite=function(){var e,a,c;if(this.options.fade===true)this.options.centerMode=false;if(this.options.infinite===true&&this.options.fade===false){a=null;if(this.slideCount>this.options.slidesToShow){c=this.options.centerMode===true?this.options.slidesToShow+1:this.options.slidesToShow;
for(e=this.slideCount;e>this.slideCount-c;e-=1){a=e-1;d(this.$slides[a]).clone(true).attr("id","").attr("data-slick-index",a-this.slideCount).prependTo(this.$slideTrack).addClass("slick-cloned")}for(e=0;e<c;e+=1){a=e;d(this.$slides[a]).clone(true).attr("id","").attr("data-slick-index",a+this.slideCount).appendTo(this.$slideTrack).addClass("slick-cloned")}this.$slideTrack.find(".slick-cloned").find("[id]").each(function(){d(this).attr("id","")})}}};g.prototype.interrupt=function(e){e||this.autoPlay();
this.interrupted=e};g.prototype.selectHandler=function(e){e=d(e.target).is(".slick-slide")?d(e.target):d(e.target).parents(".slick-slide");(e=parseInt(e.attr("data-slick-index")))||(e=0);if(this.slideCount<=this.options.slidesToShow){this.setSlideClasses(e);this.asNavFor(e)}else this.slideHandler(e)};g.prototype.slideHandler=function(e,a,c){var b,f,h=null,i=this;if(!(i.animating===true&&i.options.waitForAnimate===true))if(!(i.options.fade===true&&i.currentSlide===e))if(!(i.slideCount<=i.options.slidesToShow)){(a||
false)===false&&i.asNavFor(e);b=e;h=i.getLeft(b);a=i.getLeft(i.currentSlide);i.currentLeft=i.swipeLeft===null?a:i.swipeLeft;if(i.options.infinite===false&&i.options.centerMode===false&&(e<0||e>i.getDotCount()*i.options.slidesToScroll)){if(i.options.fade===false){b=i.currentSlide;c!==true?i.animateSlide(a,function(){i.postSlide(b)}):i.postSlide(b)}}else if(i.options.infinite===false&&i.options.centerMode===true&&(e<0||e>i.slideCount-i.options.slidesToScroll)){if(i.options.fade===false){b=i.currentSlide;
c!==true?i.animateSlide(a,function(){i.postSlide(b)}):i.postSlide(b)}}else{i.options.autoplay&&clearInterval(i.autoPlayTimer);f=b<0?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+b:b>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:b-i.slideCount:b;i.animating=true;i.$slider.trigger("beforeChange",[i,i.currentSlide,f]);e=i.currentSlide;i.currentSlide=f;i.setSlideClasses(i.currentSlide);if(i.options.asNavFor){a=i.getNavTarget();a=
a.slick("getSlick");a.slideCount<=a.options.slidesToShow&&a.setSlideClasses(i.currentSlide)}i.updateDots();i.updateArrows();if(i.options.fade===true){if(c!==true){i.fadeSlideOut(e);i.fadeSlide(f,function(){i.postSlide(f)})}else i.postSlide(f);i.animateHeight()}else c!==true?i.animateSlide(h,function(){i.postSlide(f)}):i.postSlide(f)}}};g.prototype.startLoad=function(){if(this.options.arrows===true&&this.slideCount>this.options.slidesToShow){this.$prevArrow.hide();this.$nextArrow.hide()}this.options.dots===
true&&this.slideCount>this.options.slidesToShow&&this.$dots.hide();this.$slider.addClass("slick-loading")};g.prototype.swipeDirection=function(){var e;e=Math.round(Math.atan2(this.touchObject.startY-this.touchObject.curY,this.touchObject.startX-this.touchObject.curX)*180/Math.PI);if(e<0)e=360-Math.abs(e);if(e<=45&&e>=0)return this.options.rtl===false?"left":"right";if(e<=360&&e>=315)return this.options.rtl===false?"left":"right";if(e>=135&&e<=225)return this.options.rtl===false?"right":"left";if(this.options.verticalSwiping===
true)return e>=35&&e<=135?"down":"up";return"vertical"};g.prototype.swipeEnd=function(){var e,a;this.interrupted=this.dragging=false;this.shouldClick=this.touchObject.swipeLength>10?false:true;if(this.touchObject.curX===undefined)return false;this.touchObject.edgeHit===true&&this.$slider.trigger("edge",[this,this.swipeDirection()]);if(this.touchObject.swipeLength>=this.touchObject.minSwipe){a=this.swipeDirection();switch(a){case "left":case "down":e=this.options.swipeToSlide?this.checkNavigable(this.currentSlide+
this.getSlideCount()):this.currentSlide+this.getSlideCount();this.currentDirection=0;break;case "right":case "up":e=this.options.swipeToSlide?this.checkNavigable(this.currentSlide-this.getSlideCount()):this.currentSlide-this.getSlideCount();this.currentDirection=1}if(a!="vertical"){this.slideHandler(e);this.touchObject={};this.$slider.trigger("swipe",[this,a])}}else if(this.touchObject.startX!==this.touchObject.curX){this.slideHandler(this.currentSlide);this.touchObject={}}};g.prototype.swipeHandler=
function(e){if(!(this.options.swipe===false||"ontouchend"in document&&this.options.swipe===false))if(!(this.options.draggable===false&&e.type.indexOf("mouse")!==-1)){this.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==undefined?e.originalEvent.touches.length:1;this.touchObject.minSwipe=this.listWidth/this.options.touchThreshold;if(this.options.verticalSwiping===true)this.touchObject.minSwipe=this.listHeight/this.options.touchThreshold;switch(e.data.action){case "start":this.swipeStart(e);
break;case "move":this.swipeMove(e);break;case "end":this.swipeEnd(e)}}};g.prototype.swipeMove=function(e){var a,c,b;c=e.originalEvent!==undefined?e.originalEvent.touches:null;if(!this.dragging||c&&c.length!==1)return false;a=this.getLeft(this.currentSlide);this.touchObject.curX=c!==undefined?c[0].pageX:e.clientX;this.touchObject.curY=c!==undefined?c[0].pageY:e.clientY;this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curX-this.touchObject.startX,2)));if(this.options.verticalSwiping===
true)this.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(this.touchObject.curY-this.touchObject.startY,2)));c=this.swipeDirection();if(c!=="vertical"){e.originalEvent!==undefined&&this.touchObject.swipeLength>4&&e.preventDefault();b=(this.options.rtl===false?1:-1)*(this.touchObject.curX>this.touchObject.startX?1:-1);if(this.options.verticalSwiping===true)b=this.touchObject.curY>this.touchObject.startY?1:-1;e=this.touchObject.swipeLength;this.touchObject.edgeHit=false;if(this.options.infinite===
false)if(this.currentSlide===0&&c==="right"||this.currentSlide>=this.getDotCount()&&c==="left"){e=this.touchObject.swipeLength*this.options.edgeFriction;this.touchObject.edgeHit=true}this.swipeLeft=this.options.vertical===false?a+e*b:a+e*(this.$list.height()/this.listWidth)*b;if(this.options.verticalSwiping===true)this.swipeLeft=a+e*b;if(this.options.fade===true||this.options.touchMove===false)return false;if(this.animating===true){this.swipeLeft=null;return false}this.setCSS(this.swipeLeft)}};g.prototype.swipeStart=
function(e){var a;this.interrupted=true;if(this.touchObject.fingerCount!==1||this.slideCount<=this.options.slidesToShow){this.touchObject={};return false}if(e.originalEvent!==undefined&&e.originalEvent.touches!==undefined)a=e.originalEvent.touches[0];this.touchObject.startX=this.touchObject.curX=a!==undefined?a.pageX:e.clientX;this.touchObject.startY=this.touchObject.curY=a!==undefined?a.pageY:e.clientY;this.dragging=true};g.prototype.unfilterSlides=g.prototype.slickUnfilter=function(){if(this.$slidesCache!==
null){this.unload();this.$slideTrack.children(this.options.slide).detach();this.$slidesCache.appendTo(this.$slideTrack);this.reinit()}};g.prototype.unload=function(){d(".slick-cloned",this.$slider).remove();this.$dots&&this.$dots.remove();this.$prevArrow&&this.htmlExpr.test(this.options.prevArrow)&&this.$prevArrow.remove();this.$nextArrow&&this.htmlExpr.test(this.options.nextArrow)&&this.$nextArrow.remove();this.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden",
"true").css("width","")};g.prototype.unslick=function(e){this.$slider.trigger("unslick",[this,e]);this.destroy()};g.prototype.updateArrows=function(){if(this.options.arrows===true&&this.slideCount>this.options.slidesToShow&&!this.options.infinite){this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false");this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false");if(this.currentSlide===0){this.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true");this.$nextArrow.removeClass("slick-disabled").attr("aria-disabled",
"false")}else if(this.currentSlide>=this.slideCount-this.options.slidesToShow&&this.options.centerMode===false){this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}else if(this.currentSlide>=this.slideCount-1&&this.options.centerMode===true){this.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");this.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")}}};g.prototype.updateDots=
function(){if(this.$dots!==null){this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true");this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false")}};g.prototype.visibility=function(){if(this.options.autoplay)this.interrupted=document[this.hidden]?true:false};d.fn.slick=function(){var e=arguments[0],a=Array.prototype.slice.call(arguments,1),c=this.length,b,f;for(b=0;b<c;b++){if(typeof e=="object"||typeof e==
"undefined")this[b].slick=new g(this[b],e);else f=this[b].slick[e].apply(this[b].slick,a);if(typeof f!="undefined")return f}return this}});


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.riot=t.riot||{})}(this,function(t){"use strict";function e(t){return Ft.test(t)}function n(t){return typeof t===Pt}function r(t){return t&&typeof t===Rt}function i(t){return typeof t===It}function o(t){return typeof t===St}function a(t){return i(t)||null===t||""===t}function s(t){return Array.isArray(t)||t instanceof Array}function u(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return i(t[e])||n&&n.writable}function l(t){return Ut.test(t)}function c(t,e){return Array.prototype.slice.call((e||document).querySelectorAll(t))}function p(t,e){return(e||document).querySelector(t)}function f(){return document.createDocumentFragment()}function h(){return document.createTextNode("")}function d(t){return document.createElement(t)}function g(t,e){if(i(t.innerHTML)){var n=(new DOMParser).parseFromString(e,"application/xml"),r=t.ownerDocument.importNode(n.documentElement,!0);t.appendChild(r)}else t.innerHTML=e}function m(t,e){t.style.display=e?"":"none",t.hidden=!e}function v(t,e){t.removeAttribute(e)}function y(t){return Object.keys(t).reduce(function(e,n){return e+" "+n+": "+t[n]+";"},"")}function b(t,e){return t.getAttribute(e)}function x(t,e,n){var r=$t.exec(e);r&&r[1]?t.setAttributeNS(Ht,r[1],n):t.setAttribute(e,n)}function _(t,e,n){t.insertBefore(e,n.parentNode&&n)}function w(t,e){if(t)for(var n;n=zt.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function N(t,e,n){if(t){var r,i=e(t,n);if(!1===i)return;for(t=t.firstChild;t;)r=t.nextSibling,N(t,e,i),t=r}}function O(t,e){for(var n=t?t.length:0,r=0;r<n;++r)e(t[r],r);return t}function C(t,e){return-1!==t.indexOf(e)}function j(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function T(t,e){return t.slice(0,e.length)===e}function E(t,e,n,r){return Object.defineProperty(t,e,L({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function L(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)u(t,i)&&(t[i]=e[i]);return t}function A(t,e,n){var r=this.__.parent,i=this.__.item;if(!i)for(;r&&!i;)i=r.__.item,r=r.__.parent;if(u(n,"currentTarget")&&(n.currentTarget=t),u(n,"target")&&(n.target=n.srcElement),u(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=i,e.call(this,n),!n.preventUpdate){var o=ut(this);o.isMounted&&o.update()}}function M(t,e,n,r){var i,o=A.bind(r,n,e);n[t]=null,i=t.replace(Bt,""),C(r.__.listeners,n)||r.__.listeners.push(n),n[kt]||(n[kt]={}),n[kt][t]&&n.removeEventListener(i,n[kt][t]),n[kt][t]=o,n.addEventListener(i,o,!1)}function k(t,e,n){var r,i,a,s;if(t.tag&&t.tagName===n)return void t.tag.update();i="VIRTUAL"===t.dom.tagName,t.tag&&(i&&(a=t.tag.__.head,s=h(),a.parentNode.insertBefore(s,a)),t.tag.unmount(!0)),o(n)&&(t.impl=wt[n],r={root:t.dom,parent:e,hasImpl:!0,tagName:n},t.tag=st(t.impl,r,t.dom.innerHTML,e),O(t.attrs,function(e){return x(t.tag.root,e.name,e.value)}),t.tagName=n,t.tag.mount(),i&&gt(t.tag,s||t.tag.root),e.__.onUnmount=function(){var e=t.tag.opts.dataIs,n=t.tag.parent.tags,r=t.tag.__.parent.tags;ht(n,e,t.tag),ht(r,e,t.tag),t.tag.unmount()})}function S(t){return t?(t=t.replace(Ot,""),Dt[t]&&(t=Dt[t]),t):null}function R(t){if(!this.root||!b(this.root,"virtualized")){var e,i,o,s=t.dom,u=S(t.attr),l=C([At,Mt],u),c=t.root&&"VIRTUAL"===t.root.tagName,p=s&&(t.parent||s.parentNode),f="style"===u,h="class"===u;if(t._riot_id)return void(t.isMounted?t.update():(t.mount(),c&&gt(t,t.root)));if(t.update)return t.update();if(o=Yt(t.expr,l?L(Object.create(this.parent),this):this),e=!a(o),i=r(o),i&&(i=!h&&!f,h?o=Yt(JSON.stringify(o),this):f&&(o=y(o))),!t.attr||t.isAttrRemoved&&e||(v(s,t.attr),t.isAttrRemoved=!0),t.bool&&(o=!!o&&u),t.isRtag)return k(t,this,o);if((!t.wasParsedOnce||t.value!==o)&&(t.value=o,t.wasParsedOnce=!0,!i||l)){if(a(o)&&(o=""),!u)return o+="",void(p&&(t.parent=p,"TEXTAREA"===p.tagName?(p.value=o,Kt||(s.nodeValue=o)):s.nodeValue=o));n(o)?M(u,o,s,this):l?m(s,u===Mt?!o:o):(t.bool&&(s[u]=o),"value"===u&&s.value!==o&&(s.value=o),e&&!1!==o&&x(s,u,o),f&&s.hidden&&m(s,!1))}}}function I(t){O(t,R.bind(this))}function P(t,e,n,r){var i=r?Object.create(r):{};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function H(t,e){for(var n=e.length,r=t.length;n>r;)n--,$.apply(e[n],[e,n])}function $(t,e){t.splice(e,1),this.unmount(),ht(this.parent,this,this.__.tagName,!0)}function V(t){var e=this;O(Object.keys(this.tags),function(n){at.apply(e.tags[n],[n,t])})}function B(t,e,n){n?vt.apply(this,[t,e]):_(t,this.root,e.root)}function U(t,e,n){n?mt.apply(this,[t,e]):_(t,this.root,e.root)}function z(t,e){e?mt.call(this,t):t.appendChild(this.root)}function D(t,e,n){v(t,Et);var r,i=typeof b(t,Lt)!==St||v(t,Lt),a=ct(t),u=wt[a],l=t.parentNode,c=h(),p=it(t),d=b(t,Tt),g=[],m=[],y=!wt[a],x="VIRTUAL"===t.tagName;return n=Yt.loopKeys(n),n.isLoop=!0,d&&v(t,Tt),l.insertBefore(c,t),l.removeChild(t),n.update=function(){n.value=Yt(n.val,e);var l=f(),h=n.value,v=!s(h)&&!o(h),b=c.parentNode;b&&(v?(r=h||!1,h=r?Object.keys(h).map(function(t){return P(n,h[t],t)}):[]):r=!1,d&&(h=h.filter(function(t,r){return n.key&&!v?!!Yt(d,P(n,t,r,e)):!!Yt(d,L(Object.create(e),t))})),O(h,function(o,s){var c=i&&typeof o===Rt&&!r,f=m.indexOf(o),d=-1===f,v=!d&&c?f:s,_=g[v],w=s>=m.length,N=c&&d||!c&&!_;o=!r&&n.key?P(n,o,s):o,N?(_=new rt(u,{parent:e,isLoop:!0,isAnonymous:y,tagName:a,root:t.cloneNode(y),item:o,index:s},t.innerHTML),_.mount(),w?z.apply(_,[l||b,x]):U.apply(_,[b,g[s],x]),w||m.splice(s,0,o),g.splice(s,0,_),p&&ft(e.tags,a,_,!0)):v!==s&&c&&(C(h,m[v])&&(B.apply(_,[b,g[s],x]),g.splice(s,0,g.splice(v,1)[0]),m.splice(s,0,m.splice(v,1)[0])),n.pos&&(_[n.pos]=s),!p&&_.tags&&V.call(_,s)),_.__.item=o,_.__.index=s,_.__.parent=e,N||_.update(o)}),H(h,g),m=h.slice(),b.insertBefore(l,c))},n.unmount=function(){O(g,function(t){t.unmount()})},n}function F(t,e,n){var r=this,i={parent:{children:e}};N(t,function(e,i){var o,a,s,u=e.nodeType,l=i.parent;if(!n&&e===t)return{parent:l};if(3===u&&"STYLE"!==e.parentNode.tagName&&Yt.hasExpr(e.nodeValue)&&l.children.push({dom:e,expr:e.nodeValue}),1!==u)return i;var c="VIRTUAL"===e.tagName;if(o=b(e,Et))return c&&x(e,"loopVirtual",!0),l.children.push(D(e,r,o)),!1;if(o=b(e,Tt))return l.children.push(Object.create(re).init(e,r,o)),!1;if((a=b(e,jt))&&Yt.hasExpr(a))return l.children.push({isRtag:!0,expr:a,dom:e,attrs:[].slice.call(e.attributes)}),!1;if(s=it(e),c&&(b(e,"virtualized")&&e.parentElement.removeChild(e),s||b(e,"virtualized")||b(e,"loopVirtual")||(s={tmpl:e.outerHTML})),s&&(e!==t||n)){if(!c||b(e,jt)){var p={root:e,parent:r,hasImpl:!0};return l.children.push(st(s,p,e.innerHTML,r)),!1}x(e,"virtualized",!0);var f=new rt({tmpl:e.outerHTML},{root:e,parent:r},e.innerHTML);l.children.push(f)}return K.apply(r,[e,e.attributes,function(t,e){e&&l.children.push(e)}]),{parent:l}},i)}function K(t,n,r){var i=this;O(n,function(n){var o,a=n.name,s=e(a);C(Ct,a)?o=Object.create(ie).init(t,i,a,n.value):Yt.hasExpr(n.value)&&(o={dom:t,expr:n.value,attr:a,bool:s}),r(n,o)})}function W(t,e,n){var r="o"===n[0],i=r?"select>":"table>";if(t.innerHTML="<"+i+e.trim()+"</"+i,i=t.firstChild,r)i.selectedIndex=-1;else{var o=le[n];o&&1===i.childElementCount&&(i=p(o,i))}return i}function q(t,e){if(!oe.test(t))return t;var n={};return e=e&&e.replace(se,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(ue,function(t,e,r){return n[e]||r||""}).replace(ae,function(t,n){return e||n||""})}function Z(t,e){var n=t&&t.match(/^\s*<([-\w]+)/),r=n&&n[1].toLowerCase(),i=d(pe);return t=q(t,e),ce.test(r)?i=W(i,t,r):g(i,t),i}function Q(t,e){var n=this,r=n.name,i=n.tmpl,o=n.css,a=n.attrs,s=n.onCreate;return wt[r]||(G(r,i,o,a,s),wt[r].class=this.constructor),dt(t,r,e,this),o&&Jt.inject(),this}function G(t,e,r,i,o){return n(i)&&(o=i,/^[\w\-]+\s?=/.test(r)?(i=r,r=""):i=""),r&&(n(r)?o=r:Jt.add(r)),t=t.toLowerCase(),wt[t]={name:t,tmpl:e,attrs:i,fn:o},t}function J(t,e,n,r,i){return n&&Jt.add(n,t),wt[t]={name:t,tmpl:e,attrs:r,fn:i},t}function X(t,e,n){function i(t){if(t.tagName){var r=b(t,jt);e&&r!==e&&(r=e,x(t,jt,e));var o=dt(t,r||t.tagName.toLowerCase(),n);o&&a.push(o)}else t.length&&O(t,i)}var a=[];Jt.inject(),r(e)&&(n=e,e=0);var s,u;if(o(t)?(t="*"===t?u=yt():t+yt(t.split(/, */)),s=t?c(t):[]):s=t,"*"===e){if(e=u||yt(),s.tagName)s=c(e,s);else{var l=[];O(s,function(t){return l.push(c(e,t))}),s=l}e=0}return i(s),a}function Y(t,e,o){if(r(t))return void Y("__unnamed_"+de++,t,!0);var a=o?he:fe;if(!e){if(i(a[t]))throw new Error("Unregistered mixin: "+t);return a[t]}a[t]=n(e)?L(e.prototype,a[t]||{})&&e:L(a[t]||{},e)}function tt(){return O(_t,function(t){return t.update()})}function et(t){delete wt[t]}function nt(t,e,n,r,i){if(!t||!n){var o=!n&&t?this:e||this;O(i,function(t){t.expr&&I.call(o,[t.expr]),r[j(t.name).replace(Ot,"")]=t.expr?t.expr.value:t.value})}}function rt(t,e,r){void 0===t&&(t={}),void 0===e&&(e={});var i,a=L({},e.opts),s=e.parent,u=e.isLoop,l=!!e.isAnonymous,c=ne.skipAnonymousTags&&l,p=pt(e.item),f=e.index,h=[],d=[],m=[],y=e.root,b=e.tagName||ct(y),_="virtual"===b,N=[];c||te(this),t.name&&y._tag&&y._tag.unmount(!0),this.isMounted=!1,E(this,"__",{isAnonymous:l,instAttrs:h,innerHTML:r,tagName:b,index:f,isLoop:u,listeners:[],virts:[],tail:null,head:null,parent:null,item:null}),E(this,"_riot_id",++me),E(this,"root",y),L(this,{opts:a},p),E(this,"parent",s||null),E(this,"tags",{}),E(this,"refs",{}),i=u&&l?y:Z(t.tmpl,r,u),E(this,"update",function(t){var e={},r=this.isMounted&&!c;return t=pt(t),L(this,t),nt.apply(this,[u,s,l,e,h]),r&&this.isMounted&&n(this.shouldUpdate)&&!this.shouldUpdate(t,e)?this:(u&&l&&ot.apply(this,[this.parent,N]),L(a,e),r&&this.trigger("update",t),I.call(this,m),r&&this.trigger("updated"),this)}.bind(this)),E(this,"mixin",function(){var t=this;return O(arguments,function(e){var r,i,a=[],s=["init","__proto__"];e=o(e)?Y(e):e,r=n(e)?new e:e;var u=Object.getPrototypeOf(r);do{a=a.concat(Object.getOwnPropertyNames(i||r))}while(i=Object.getPrototypeOf(i||r));O(a,function(e){if(!C(s,e)){var i=Object.getOwnPropertyDescriptor(r,e)||Object.getOwnPropertyDescriptor(u,e),o=i&&(i.get||i.set);!t.hasOwnProperty(e)&&o?Object.defineProperty(t,e,i):t[e]=n(r[e])?r[e].bind(t):r[e]}}),r.init&&r.init.bind(t)()}),this}.bind(this)),E(this,"mount",function(){var e=this;y._tag=this,K.apply(s,[y,y.attributes,function(t,n){!l&&ie.isPrototypeOf(n)&&(n.tag=e),t.expr=n,h.push(t)}]),d=[],w(t.attrs,function(t,e){d.push({name:t,value:e})}),K.apply(this,[y,d,function(t,e){e?m.push(e):x(y,t.name,t.value)}]),nt.apply(this,[u,s,l,a,h]);var n=Y(Nt);if(n&&!c)for(var r in n)n.hasOwnProperty(r)&&e.mixin(n[r]);if(t.fn&&t.fn.call(this,a),c||this.trigger("before-mount"),F.apply(this,[i,m,l]),this.update(p),!l)for(;i.firstChild;)y.appendChild(i.firstChild);if(E(this,"root",y),E(this,"isMounted",!0),!c){if(this.parent){var o=ut(this.parent);o.one(o.isMounted?"updated":"mount",function(){e.trigger("mount")})}else this.trigger("mount");return this}}.bind(this)),E(this,"unmount",function(e){var n,r=this,i=this.root,o=i.parentNode,a=_t.indexOf(this);return c||this.trigger("before-unmount"),w(t.attrs,function(t){T(t,Ot)&&(t=t.slice(Ot.length)),v(y,t)}),this.__.listeners.forEach(function(t){Object.keys(t[kt]).forEach(function(e){t.removeEventListener(e,t[kt][e])})}),-1!==a&&_t.splice(a,1),(o||_)&&(s?(n=ut(s),_?Object.keys(this.tags).forEach(function(t){ht(n.tags,t,r.tags[t])}):(ht(n.tags,b,this),s!==n&&ht(s.tags,b,this))):g(i,""),o&&!e&&o.removeChild(i)),this.__.virts&&O(this.__.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),lt(m),O(h,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),this.__.onUnmount&&this.__.onUnmount(),c||(this.trigger("unmount"),this.off("*")),E(this,"isMounted",!1),delete this.root._tag,this}.bind(this))}function it(t){return t.tagName&&wt[b(t,jt)||b(t,jt)||t.tagName.toLowerCase()]}function ot(t,e){var n=this;O(Object.keys(t),function(r){var o=!l(r)&&C(e,r);(i(n[r])||o)&&(o||e.push(r),n[r]=t[r])})}function at(t,e){var n,r=this.parent;r&&(n=r.tags[t],s(n)?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):ft(r.tags,t,this))}function st(t,e,n,r){var i=new rt(t,e,n),o=e.tagName||ct(e.root,!0),a=ut(r);return E(i,"parent",a),i.__.parent=r,ft(a.tags,o,i),a!==r&&ft(r.tags,o,i),e.root.innerHTML="",i}function ut(t){for(var e=t;e.__.isAnonymous&&e.parent;)e=e.parent;return e}function lt(t){O(t,function(t){t instanceof rt?t.unmount(!0):t.tagName?t.tag.unmount(!0):t.unmount&&t.unmount()})}function ct(t,e){var n=it(t),r=!e&&b(t,jt);return r&&!Yt.hasExpr(r)?r:n?n.name:t.tagName.toLowerCase()}function pt(t){if(!(t instanceof rt||t&&n(t.trigger)))return t;var e={};for(var r in t)Ut.test(r)||(e[r]=t[r]);return e}function ft(t,e,n,r,o){var a=t[e],u=s(a),l=!i(o);if(!a||a!==n)if(!a&&r)t[e]=[n];else if(a)if(u){var c=a.indexOf(n);if(c===o)return;-1!==c&&a.splice(c,1),l?a.splice(o,0,n):a.push(n)}else t[e]=[a,n];else t[e]=n}function ht(t,e,n,r){if(s(t[e])){var i=t[e].indexOf(n);-1!==i&&t[e].splice(i,1),t[e].length?1!==t[e].length||r||(t[e]=t[e][0]):delete t[e]}else delete t[e]}function dt(t,e,n,r){var i=wt[e],o=wt[e].class,a=r||(o?Object.create(o.prototype):{}),s=t._innerHTML=t._innerHTML||t.innerHTML;t.innerHTML="";var u=L({root:t,opts:n},{parent:n?n.parent:null});return i&&t&&rt.apply(a,[i,u,s]),a&&a.mount&&(a.mount(!0),C(_t,a)||_t.push(a)),a}function gt(t,e){var n=f();mt.call(t,n),e.parentNode.replaceChild(n,e)}function mt(t,e){var n,r,i=this,o=h(),a=h(),s=f();for(this.root.insertBefore(o,this.root.firstChild),this.root.appendChild(a),this.__.head=r=o,this.__.tail=a;r;)n=r.nextSibling,s.appendChild(r),i.__.virts.push(r),r=n;e?t.insertBefore(s,e.__.head):t.appendChild(s)}function vt(t,e){for(var n,r=this,i=this.__.head,o=f();i;)if(n=i.nextSibling,o.appendChild(i),(i=n)===r.__.tail){o.appendChild(i),t.insertBefore(o,e.__.head);break}}function yt(t){if(!t){var e=Object.keys(wt);return e+yt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+",["+jt+'="'+n+'"]'},"")}var bt,xt,_t=[],wt={},Nt="__global_mixin",Ot="riot-",Ct=["ref","data-ref"],jt="data-is",Tt="if",Et="each",Lt="no-reorder",At="show",Mt="hide",kt="__riot-events__",St="string",Rt="object",It="undefined",Pt="function",Ht="http://www.w3.org/1999/xlink",$t=/^xlink:(\w+)/,Vt=typeof window===It?void 0:window,Bt=/^on/,Ut=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/,zt=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,Dt={viewbox:"viewBox"},Ft=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,Kt=0|(Vt&&Vt.document||{}).documentMode,Wt=Object.freeze({isBoolAttr:e,isFunction:n,isObject:r,isUndefined:i,isString:o,isBlank:a,isArray:s,isWritable:u,isReservedName:l}),qt=Object.freeze({$$:c,$:p,createFrag:f,createDOMPlaceholder:h,mkEl:d,setInnerHTML:g,toggleVisibility:m,remAttr:v,styleObjectToString:y,getAttr:b,setAttr:x,safeInsert:_,walkAttrs:w,walkNodes:N}),Zt={},Qt=[],Gt=!1;Vt&&(bt=function(){var t=d("style");x(t,"type","text/css");var e=p("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),xt=bt.styleSheet);var Jt={styleNode:bt,add:function(t,e){e?Zt[e]=t:Qt.push(t),Gt=!0},inject:function(){if(Vt&&Gt){Gt=!1;var t=Object.keys(Zt).map(function(t){return Zt[t]}).concat(Qt).join("\n");xt?xt.cssText=t:bt.innerHTML=t}}},Xt=function(t){function e(t){return t}function n(t,e){return e||(e=y),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?l:"")}function r(t){if(t===g)return m;var e=t.split(" ");if(2!==e.length||f.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(h,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:m[4],e),e[5]=n(t.length>3?/\\({|})/g:m[5],e),e[6]=n(m[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+p,l),e[8]=t,e}function i(t){return t instanceof RegExp?s(t):y[t]}function o(t){(t||(t=g))!==y[8]&&(y=r(t),s=t===g?e:n,y[9]=s(m[9])),v=t}function a(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return v},enumerable:!0}),u=t,o(e)}var s,u,l="g",c=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,p=c.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,f=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),h=/(?=[[\]()*+?.^$|])/g,d={"(":RegExp("([()])|"+p,l),"[":RegExp("([[\\]])|"+p,l),"{":RegExp("([{}])|"+p,l)},g="{ }",m=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,l),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],v=void 0,y=[];return i.split=function(t,e,n){function r(t){e||o?u.push(t&&t.replace(n[5],"$1")):u.push(t)}n||(n=y);var i,o,a,s,u=[],l=n[6];for(o=a=l.lastIndex=0;i=l.exec(t);){if(s=i.index,o){if(i[2]){l.lastIndex=function(t,e,n){var r,i=d[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}(t,i[2],l.lastIndex);continue}if(!i[3])continue}i[1]||(r(t.slice(a,s)),a=l.lastIndex,l=n[6+(o^=1)],l.lastIndex=a)}return t&&a<t.length&&r(t.slice(a)),u},i.hasExpr=function(t){return y[4].test(t)},i.loopKeys=function(t){var e=t.match(y[9]);return e?{key:e[1],pos:e[2],val:y[0]+e[3].trim()+y[1]}:{val:t.trim()}},i.array=function(t){return t?r(t):y},Object.defineProperty(i,"settings",{set:a,get:function(){return u}}),i.settings="undefined"!=typeof riot&&riot.settings||{},i.set=o,i.R_STRINGS=c,i.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,i.S_QBLOCKS=p,i}(),Yt=function(){function t(t,r){return t?(a[t]||(a[t]=n(t))).call(r,e):t}function e(e,n){e.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id},t.errorHandler?t.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(e.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName),console.error(e))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,n=[],r=Xt.split(t.replace(c,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)(e=r[o])&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=e);e=a<2?s[0]:"["+s.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(p,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){if(t=t.replace(l,function(t,e){return t.length>2&&!e?s+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var r,i=[],a=0;t&&(r=t.match(u))&&!r.index;){var c,p,h=/,|([[{(])|$/g;for(t=RegExp.rightContext,c=r[2]?n[r[2]].slice(1,-1).trim().replace(/\s+/g," "):r[1];p=(r=h.exec(t))[1];)!function(e,n){var r,i=1,o=f[e];for(o.lastIndex=n.lastIndex;r=o.exec(t);)if(r[0]===e)++i;else if(!--i)break;n.lastIndex=i?t.length:o.lastIndex}(p,h);p=t.slice(0,r.index),t=RegExp.rightContext,i[a++]=o(p,1,c)}t=a?a>1?"["+i.join(",")+'].join(" ").trim()':i[0]:o(t,e)}return t}function o(t,e,n){var r;return t=t.replace(d,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+h+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!g.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};t.hasExpr=Xt.hasExpr,t.loopKeys=Xt.loopKeys,t.clearCache=function(){a={}},t.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,l=RegExp(Xt.S_QBLOCKS,"g"),c=/\u2057/g,p=/\u2057(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},h='"in this?this:'+("object"!=typeof window?"global":"window")+").",d=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,g=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=Xt.version="v3.0.3",t}(),te=function(t){t=t||{};var e={},n=Array.prototype.slice;return Object.defineProperties(t,{on:{value:function(n,r){return"function"==typeof r&&(e[n]=e[n]||[]).push(r),t},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var i,o=e[n],a=0;i=o&&o[a];++a)i==r&&o.splice(a--,1);else delete e[n];else e={};return t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,n){function r(){t.off(e,r),n.apply(t,arguments)}return t.on(e,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var i,o,a,s=arguments,u=arguments.length-1,l=new Array(u);for(a=0;a<u;a++)l[a]=s[a+1];for(i=n.call(e[r]||[],0),a=0;o=i[a];++a)o.apply(t,l);return e["*"]&&"*"!=r&&t.trigger.apply(t,["*",r].concat(l)),t},enumerable:!1,writable:!1,configurable:!1}}),t},ee=Object.freeze({each:O,contains:C,toCamel:j,startsWith:T,defineProperty:E,extend:L}),ne=L(Object.create(Xt.settings),{skipAnonymousTags:!0}),re={init:function(t,e,n){v(t,Tt),this.tag=e,this.expr=n,this.stub=document.createTextNode(""),this.pristine=t;var r=t.parentNode;return r.insertBefore(this.stub,t),r.removeChild(t),this},update:function(){this.value=Yt(this.expr,this.tag),this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],F.apply(this.tag,[this.current,this.expressions,!0])):!this.value&&this.current&&(lt(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),this.value&&I.call(this.tag,this.expressions)},unmount:function(){lt(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},ie={init:function(t,e,n,r){return this.dom=t,this.attr=n,this.rawValue=r,this.parent=e,this.hasExp=Yt.hasExpr(r),this},update:function(){var t=this.value,e=this.parent&&ut(this.parent),n=this.tag||this.dom;this.value=this.hasExp?Yt(this.rawValue,this.parent):this.rawValue,!a(t)&&e&&ht(e.refs,t,n),a(this.value)||e&&ft(e.refs,this.value,n,null,this.parent.__.index),t||v(this.dom,this.attr)},unmount:function(){var t=this.tag||this.dom,e=this.parent&&ut(this.parent);!a(this.value)&&e&&ht(e.refs,this.value,t),delete this.dom,delete this.parent}},oe=/<yield\b/i,ae=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,se=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,ue=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,le={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},ce=Kt&&Kt<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,pe="div",fe={},he=fe[Nt]={},de=0,ge=Object.freeze({Tag:Q,tag:G,tag2:J,mount:X,mixin:Y,update:tt,unregister:et,version:"v3.4.4"}),me=0,ve=Object.freeze({getTag:it,inheritFrom:ot,moveChildTag:at,initChildTag:st,getImmediateCustomParentTag:ut,unmountAll:lt,getTagName:ct,cleanUpData:pt,arrayishAdd:ft,arrayishRemove:ht,mountTo:dt,makeReplaceVirtual:gt,makeVirtual:mt,moveVirtual:vt,selectTags:yt}),ye=ne,be={tmpl:Yt,brackets:Xt,styleManager:Jt,vdom:_t,styleNode:Jt.styleNode,dom:qt,check:Wt,misc:ee,tags:ve},xe=Q,_e=G,we=J,Ne=X,Oe=Y,Ce=tt,je=et,Te=te,Ee=L({},ge,{observable:te,settings:ye,util:be});t.settings=ye,t.util=be,t.Tag=xe,t.tag=_e,t.tag2=we,t.mount=Ne,t.mixin=Oe,t.update=Ce,t.unregister=je,t.version="WIP",t.observable=Te,t.default=Ee,Object.defineProperty(t,"__esModule",{value:!0})});

var route=function(){"use strict";var e=function(e){e=e||{};var t={},r=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(r,n){if(typeof n=="function"){(t[r]=t[r]||[]).push(n)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(r,n){if(r=="*"&&!n){t={}}else{if(n){var i=t[r];for(var a=0,f;f=i&&i[a];++a){if(f==n){i.splice(a--,1)}}}else{delete t[r]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,r){function n(){e.off(t,n);r.apply(e,arguments)}return e.on(t,n)},enumerable:false,writable:false,configurable:false},trigger:{value:function(n){var i=arguments;var a=arguments.length-1,f=new Array(a),u,o,l;for(l=0;l<a;l++){f[l]=i[l+1]}u=r.call(t[n]||[],0);for(l=0;o=u[l];++l){o.apply(e,f)}if(t["*"]&&n!="*"){e.trigger.apply(e,["*",n].concat(f))}return e},enumerable:false,writable:false,configurable:false}});return e};var t=/^.+?\/\/+[^\/]+/;var r="EventListener";var n="remove"+r;var i="add"+r;var a="hasAttribute";var f="popstate";var u="hashchange";var o="trigger";var l=3;var c=typeof window!="undefined"&&window;var s=typeof document!="undefined"&&document;var v=c&&history;var h=c&&(v.location||c.location);var p=P.prototype;var d=s&&s.ontouchstart?"touchstart":"click";var m=e();var b=false;var g=false;var y;var w;var $;var A;var x;var K=[];var N=0;function O(e){return e.split(/[\/?#]/)}function S(e,t){var r=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*");var n=new RegExp("^"+r+"$");var i=e.match(n);if(i){return i.slice(1)}}function T(e,t){var r;return function(){clearTimeout(r);r=setTimeout(e,t)}}function E(e){y=T(L,1);c[i](f,y);c[i](u,y);s[i](d,R);if(e){L(true)}}function P(){this.$=[];e(this);m.on("stop",this.s.bind(this));m.on("emit",this.e.bind(this))}function j(e){return e.replace(/^\/|\/$/,"")}function k(e){return typeof e=="string"}function q(e){return(e||h.href).replace(t,"")}function D(e){return w[0]==="#"?(e||h.href||"").split(w)[1]||"":(h?q(e):e||"").replace(w,"")}function L(e){var t=N===0;if(l<=N){return}N++;K.push(function(){var t=D();if(e||t!==$){m[o]("emit",t);$=t}});if(t){var r;while(r=K.shift()){r()}N=0}}function R(e){if(e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented){return}var r=e.target;while(r&&r.nodeName!=="A"){r=r.parentNode}if(!r||r.nodeName!=="A"||r[a]("download")||!r[a]("href")||r.target&&r.target!=="_self"||r.href.indexOf(h.href.match(t)[0])===-1){return}if(r.href!==h.href&&(r.href.split("#")[0]===h.href.split("#")[0]||w[0]!=="#"&&q(r.href).indexOf(w)!==0||w[0]==="#"&&r.href.split(w)[0]!==h.href.split(w)[0]||!_(D(r.href),r.title||s.title))){return}e.preventDefault()}function _(e,t,r){if(!v){return m[o]("emit",D(e))}e=w+j(e);t=t||s.title;r?v.replaceState(null,t,e):v.pushState(null,t,e);s.title=t;g=false;L();return g}p.m=function(e,t,r){if(k(e)&&(!t||k(t))){_(e,t,r||false)}else if(t){this.r(e,t)}else{this.r("@",e)}};p.s=function(){this.off("*");this.$=[]};p.e=function(e){this.$.concat("@").some(function(t){var r=(t==="@"?A:x)(j(e),j(t));if(typeof r!="undefined"){this[o].apply(null,[t].concat(r));return g=true}},this)};p.r=function(e,t){if(e!=="@"){e="/"+j(e);this.$.push(e)}this.on(e,t)};var z=new P;var B=z.m.bind(z);B.create=function(){var e=new P;var t=e.m.bind(e);t.stop=e.s.bind(e);return t};B.base=function(e){w=e||"#";$=D()};B.exec=function(){L(true)};B.parser=function(e,t){if(!e&&!t){A=O;x=S}if(e){A=e}if(t){x=t}};B.query=function(){var e={};var t=h.href||$;t.replace(/[?&](.+?)=([^&]*)/g,function(t,r,n){e[r]=n});return e};B.stop=function(){if(b){if(c){c[n](f,y);c[n](u,y);s[n](d,R)}m[o]("stop");b=false}};B.start=function(e){if(!b){if(c){if(document.readyState==="complete"){E(e)}else{c[i]("load",function(){setTimeout(function(){E(e)},1)})}}b=true}};B.base();B.parser();return B}();

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n)}:e(window.jQuery)}(function(e){var t=function(n,r){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof r&&r));var i=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[i]=e.FE.OPTS_MAPPING[i]||this.id,this.sid=e.FE.OPTS_MAPPING[i],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var a=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",function(){e(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){e(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy(function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy(function(){this.image.edit(e(t.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this)),this.events.trigger("initializationDelayed")):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(a),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.6.4",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName");this.$oel.closest("label").length;var n=e.proxy(function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),r=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),n()},this),i=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),a=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),o=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?o():"TEXTAREA"==t?r():"A"==t?i():"IMG"==t?a():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,o()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);if("string"==typeof n){var a=[];return this.each(function(){var t=e(this).data("froala.editor");if(t){var i,o;if(n.indexOf(".")>0&&t[n.split(".")[0]]?(t[n.split(".")[0]]&&(i=t[n.split(".")[0]]),o=n.split(".")[1]):(i=t,o=n.split(".")[0]),!i[o])return e.error("Method "+n+" does not exist in Froala Editor.");var s=i[o].apply(t,r.slice(1));void 0===s?a.push(this):0===a.length&&a.push(s)}}),1==a.length?a[0]:a}if("object"==typeof n||!n)return this.each(function(){e(this).data("froala.editor")||new t(this,n)})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3;var n="a-z\\u0080-\\u009f\\u00a1-\\uffff0-9";if(e.FE.LinkRegExCommon="((["+n+"])|(["+n+"](\\.|-|_))){1,}["+n+"]{1,}",e.FE.LinkRegExEnd="((:[0-9]{1,5})|())((\\/[a-z\\u00a1-\\uffff0-9@?^=%&amp;/~+#-_{}]*)|())",e.FE.LinkRegExTLD="(("+e.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",e.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/(www\\.)?"+e.FE.LinkRegExCommon+")",e.FE.LinkRegExAuth="((ftp|http|https):\\/\\/(www\\.)?[\\u0021-\\uffff]{1,}@"+e.FE.LinkRegExCommon+")",e.FE.LinkRegExWWW="(((ftp|http|https):\\/\\/)?www\\."+e.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",e.FE.LinkRegEx="("+e.FE.LinkRegExTLD+"|"+e.FE.LinkRegExHTTP+"|"+e.FE.LinkRegExAuth+"|"+e.FE.LinkRegExWWW+")"+e.FE.LinkRegExEnd,e.FE.MAIL_REGEX=/.+@.+\..+/i,e.FE.MODULES.helpers=function(t){function n(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}function r(){var e={},t=n();if(t>0)e.msie=!0;else{var r=navigator.userAgent.toLowerCase(),i=/(edge)[ \/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],a={browser:i[1]||"",version:i[2]||"0"};i[1]&&(e[a.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function i(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!s()}function a(){return/(Android)/g.test(navigator.userAgent)&&!s()}function o(){return/(Blackberry)/g.test(navigator.userAgent)}function s(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(e){return parseInt(e,10)||0}function d(t){return!!/^(https?:|ftps?:|)\/\//i.test(t)&&(t=String(t).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),new RegExp("^"+e.FE.LinkRegEx+"$","gi").test(t))}function c(){function e(e,t){var i=e[t];e[t]=function(e){var t,a=!1,o=!1;if(e&&e.match(r)){e=e.replace(r,""),this.parentNode||(n.appendChild(this),o=!0);var s=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),a=!0),t=i.call(s,"#"+this.id+" "+e),a&&(this.id=""),o&&n.removeChild(this),t}return i.call(this,e)}}var n=t.o_doc.createElement("div");try{n.querySelectorAll(":scope *")}catch(t){var r=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll"),e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}var f,p=null;return{_init:function(){t.browser=r(),c()},isIOS:i,isMac:function(){return null==p&&(p=navigator.platform.toUpperCase().indexOf("MAC")>=0),p},isAndroid:a,isBlackberry:o,isWindowsPhone:s,isMobile:function(){return a()||i()||o()},requestAnimationFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},getPX:l,screenSize:function(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body:first"),n=l(t.css("margin-left"));return t.remove(),n},isTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},sanitizeURL:function(e){if(/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(e))return e;if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!d(e)&&!d("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");return e},isArray:function(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length},RGBToHex:function(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(e){return null}},HEXtoRGB:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""},isURL:d,getAlignment:function(n){var r=(n.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(r)<0){if(!f){var i=e('<div dir="'+("rtl"==t.opts.direction?"rtl":"auto")+'" style="text-align: '+t.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body:first").append(i);var a=i.find("#s1").get(0).getBoundingClientRect().left,o=i.find("#s2").get(0).getBoundingClientRect().left;i.remove(),f=a<o?"left":"right"}r=f}return r},scrollTop:function(){return t.o_win.pageYOffset?t.o_win.pageYOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollTop?t.o_doc.documentElement.scrollTop:t.o_doc.body.scrollTop?t.o_doc.body.scrollTop:0},scrollLeft:function(){return t.o_win.pageXOffset?t.o_win.pageXOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollLeft?t.o_doc.documentElement.scrollLeft:t.o_doc.body.scrollLeft?t.o_doc.body.scrollLeft:0}}},e.FE.MODULES.events=function(t){function n(e,t,n){m(e,t,n)}function r(){n(t.$el,"cut copy paste beforepaste",function(e){E(e.type,[e])})}function i(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){E(e.type,[e])}),g("mousedown",function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})}function a(){n(t.$el,"keydown keypress keyup input",function(e){E(e.type,[e])})}function o(){n(t.$win,t._mousedown,function(e){E("window.mousedown",[e]),u()}),n(t.$win,t._mouseup,function(e){E("window.mouseup",[e])}),n(t.$win,"cut copy keydown keyup touchmove touchend",function(e){E("window."+e.type,[e])})}function s(){n(t.$doc,"dragend drop",function(e){E("document."+e.type,[e])})}function l(n){if(void 0===n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var r=t.$win.scrollTop();return t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.browser.msie&&t.$wp&&t.$wp.css("overflow","visible"),t.$el.focus(),t.browser.msie&&t.$box&&t.$box.css("position",""),t.browser.msie&&t.$wp&&t.$wp.css("overflow","auto"),r!=t.$win.scrollTop()&&t.$win.scrollTop(r),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;if(t.selection.info(t.el).atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var i=t.markers.insert();if(i&&!t.node.blockParent(i)){e(i).remove();var a=t.$el.find(t.html.blockTagsQuery()).get(0);a&&(e(a).prepend(e.FE.MARKERS),t.selection.restore())}else i&&e(i).remove()}}function d(){n(t.$el,"focus",function(e){h()&&(l(!1),!1===C&&E(e.type,[e]))}),n(t.$el,"blur",function(e){h()&&!0===C&&(E(e.type,[e]),u())}),g("focus",function(){C=!0}),g("blur",function(){C=!1})}function c(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function f(n){var r=e(n.currentTarget);return t.edit.isDisabled()||t.node.hasClass(r.get(0),"fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===r.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),r.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[r]))}function p(n,r){var i=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(i.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(i.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(i.get(0),"fr-selected"))return t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(t.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),i.data("dragging")||i.attr("disabled"))return i.removeData("dragging"),!1;var a=i.data("timeout");a&&(clearTimeout(a),i.removeData("timeout")),r.apply(t,[n])}else i.data("timeout")||i.data("timeout",setTimeout(function(){i.data("dragging",!0)},100))}function u(){A=!0}function h(){return A}function g(e,n,r){var i=e.split(" ");if(i.length>1){for(var a=0;a<i.length;a++)g(i[a],n,r);return!0}void 0===r&&(r=!1);var o;o=0!==e.indexOf("shared.")?S[e]=S[e]||[]:t.shared._events[e]=t.shared._events[e]||[],r?o.unshift(n):o.push(n)}function m(e,n,r,i,a){"function"==typeof r&&(a=i,i=r,r=!1);var o=a?t.shared.$_events:R,s=a?t.sid:t.id;r?e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,r,i):e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,i),o.indexOf(e.get(0))<0&&o.push(e.get(0))}function v(t,n){for(var r=0;r<t.length;r++)e(t[r]).off(".ed"+n)}function E(n,r,i){if(!t.edit.isDisabled()||i){var a;if(0!==n.indexOf("shared."))a=S[n];else{if(t.shared.count>0)return!1;a=t.shared._events[n]}var o;if(a)for(var s=0;s<a.length;s++)if(!1===(o=a[s].apply(t,r)))return!1;return!1!==(o=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],r||[])))&&o}}function b(){for(var e in S)S.hasOwnProperty(e)&&delete S[e]}function T(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}var A,S={},C=!1,R=[];return{_init:function(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},c(),i(),o(),s(),a(),d(),u(),r(),g("destroy",b),g("shared.destroy",T)},on:g,trigger:E,bindClick:function(e,n,r){m(e,t._mousedown,n,function(e){t.edit.isDisabled()||f(e)},!0),m(e,t._mouseup+" "+t._move,n,function(e){t.edit.isDisabled()||p(e,r)},!0),m(e,"mousedown click mouseup",n,function(e){t.edit.isDisabled()||e.stopPropagation()},!0),g("window.mouseup",function(){t.edit.isDisabled()||(e.find(n).removeClass("fr-selected"),u())})},disableBlur:function(){A=!1},enableBlur:u,blurActive:h,focus:l,chainTrigger:function(n,r,i){if(!t.edit.isDisabled()||i){var a;if(0!==n.indexOf("shared."))a=S[n];else{if(t.shared.count>0)return!1;a=t.shared._events[n]}var o;if(a)for(var s=0;s<a.length;s++)void 0!==(o=a[s].apply(t,[r]))&&(r=o);return void 0!==(o=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[r])))&&(r=o),r}},$on:m,$off:function(){v(R,t.id),R=[],0===t.shared.count&&(v(t.shared.$_events,t.sid),t.shared.$_events=null)}}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function r(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function i(e){var t={},n=e.attributes;if(n)for(var r=0;r<n.length;r++){var i=n[r];t[i.nodeName]=i.value}return t}function a(e){for(var t="",n=i(e),r=Object.keys(n).sort(),a=0;a<r.length;a++){var o=r[a],s=n[o];s.indexOf("'")<0&&s.indexOf('"')>=0?t+=" "+o+"='"+s+"'":s.indexOf('"')>=0&&s.indexOf("'")>=0?(s=s.replace(/"/g,"&quot;"),t+=" "+o+'="'+s+'"'):t+=" "+o+'="'+s+'"'}return t}function o(e,n){void 0===n&&(n=!0);for(var r=e.previousSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&o(r)}function s(e,n){void 0===n&&(n=!0);for(var r=e.nextSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&s(r)}function l(e){return e===t.el}return{isBlock:r,isEmpty:function(i,a){if(!i)return!0;if(i.querySelector("table"))return!1;var o=n(i);1==o.length&&r(o[0])&&(o=n(o[0]));for(var s=!1,l=0;l<o.length;l++){var d=o[l];if(!(a&&t.node.hasClass(d,"fr-marker")||d.nodeType==Node.TEXT_NODE&&0===d.textContent.length)){if("BR"!=d.tagName&&(d.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(s)return!1;"BR"==d.tagName&&(s=!0)}}return!(i.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-i.querySelectorAll("br").length||i.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||i.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||i.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))},blockParent:function(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(e=e.parentNode,r(e))return e;return null},deepestParent:function(n,i,a){if(void 0===i&&(i=[]),void 0===a&&(a=!0),i.push(t.el),i.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&a)return null;for(;i.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!a)&&(!r(n)||!r(n.parentNode)||!a);)n=n.parentNode;return n},rawAttributes:i,attributes:a,clearAttributes:function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var r=t[n];e.removeAttribute(r.nodeName)}},openTagString:function(e){return"<"+e.tagName.toLowerCase()+a(e)+">"},closeTagString:function(e){return"</"+e.tagName.toLowerCase()+">"},isFirstSibling:o,isLastSibling:s,isList:function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},isLink:function(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()},isElement:l,contents:n,isVoid:function(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0},hasFocus:function(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(l(e)||e.type||e.href||~e.tabIndex)},isEditable:function(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},isDeletable:function(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0},hasClass:function(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)},filter:function(e){return t.browser.msie?e:{acceptNode:e}}}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,r){return e('<span class="fr-marker" data-id="'+r+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function r(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),r=n.commonAncestorContainer;if(r!=t.el&&0===t.$el.find(r).length)return null;var i=n.cloneRange(),a=n.cloneRange();i.collapse(!0);var o=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(i.insertNode(o),o=t.$el.find("span.fr-marker").get(0)){for(var s=o.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(a),o}return null}catch(e){}}function i(){t.$el.find(".fr-marker").remove()}return{place:function(r,i,a){var o,s,l;try{var d=r.cloneRange();if(d.collapse(i),d.insertNode(n(i,a)),!0===i)for(o=t.$el.find('span.fr-marker[data-type="true"][data-id="'+a+'"]').get(0),l=o.nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=o.nextSibling;if(!0===i&&!r.collapsed){for(;!t.node.isElement(o.parentNode)&&!l;)e(o.parentNode).after(o),l=o.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){s=[l];do{l=s[0],s=t.node.contents(l)}while(s[0]&&t.node.isBlock(s[0]));e(l).prepend(e(o))}}if(!1===i&&!r.collapsed){if(o=t.$el.find('span.fr-marker[data-type="false"][data-id="'+a+'"]').get(0),(l=o.previousSibling)&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){s=[l];do{l=s[s.length-1],s=t.node.contents(l)}while(s[s.length-1]&&t.node.isBlock(s[s.length-1]));e(l).append(e(o))}o.parentNode&&["TD","TH"].indexOf(o.parentNode.tagName)>=0&&o.parentNode.previousSibling&&!o.previousSibling&&e(o.parentNode.previousSibling).append(o)}var c=t.$el.find('span.fr-marker[data-type="'+i+'"][data-id="'+a+'"]').get(0);return c&&(c.style.display="none"),c}catch(e){return null}},insert:r,split:function(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=r()),null==n)return null;var i=t.node.deepestParent(n);if(i||(i=t.node.blockParent(n))&&"LI"!=i.tagName&&(i=null),i)if(t.node.isBlock(i)&&t.node.isEmpty(i))"LI"!=i.tagName||i.parentNode.firstElementChild!=i||t.node.isEmpty(i.parentNode)?e(i).replaceWith('<span class="fr-marker"></span>'):e(i).append('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(n,i))e(i).before('<span class="fr-marker"></span>'),e(n).remove();else if(t.cursor.isAtEnd(n,i))e(i).after('<span class="fr-marker"></span>'),e(n).remove();else{var a=n,o="",s="";do{a=a.parentNode,o+=t.node.closeTagString(a),s=t.node.openTagString(a)+s}while(a!=i);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);l=l.replace(/<span id="fr-break"><\/span>/g,o+'<span class="fr-marker"></span>'+s),e(i).replaceWith(l)}return t.$el.find(".fr-marker").get(0)},insertAtPoint:function(e){var n=e.clientX,a=e.clientY;i();var o,s=null;if(void 0!==t.doc.caretPositionFromPoint?(o=t.doc.caretPositionFromPoint(n,a),(s=t.doc.createRange()).setStart(o.offsetNode,o.offset),s.setEnd(o.offsetNode,o.offset)):void 0!==t.doc.caretRangeFromPoint&&(o=t.doc.caretRangeFromPoint(n,a),(s=t.doc.createRange()).setStart(o.startContainer,o.startOffset),s.setEnd(o.startContainer,o.startOffset)),null!==s&&void 0!==t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(s)}else if(void 0!==t.doc.body.createTextRange)try{(s=t.doc.body.createTextRange()).moveToPoint(n,a);var d=s.duplicate();d.moveToPoint(n,a),s.setEndPoint("EndToEnd",d),s.select()}catch(e){return!1}r()},remove:i}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function r(){return t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function i(e){var n=r(),i=[];if(n&&n.getRangeAt&&n.rangeCount){i=[];for(var a=0;a<n.rangeCount;a++)i.push(n.getRangeAt(a))}else i=t.doc.createRange?[t.doc.createRange()]:[];return void 0!==e?i[e]:i}function a(){var e=r();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(e){}}function o(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function s(){if(t.$wp){t.markers.remove();var n,r,a=i(),o=[];for(r=0;r<a.length;r++)if(a[r].startContainer!==t.doc||t.browser.msie){var s=(n=a[r]).collapsed,l=t.markers.place(n,!0,r),d=t.markers.place(n,!1,r);void 0!==l&&l||!s||(e(".fr-marker").remove(),t.selection.setAtEnd(t.el)),t.el.normalize(),t.browser.safari&&!s&&((n=t.doc.createRange()).setStartAfter(l),n.setEndBefore(d),o.push(n))}if(t.browser.safari&&o.length)for(t.selection.clear(),r=0;r<o.length;r++)t.selection.get().addRange(o[r])}}function l(){var n,i=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===i.length)return!1;if(t.browser.msie||t.browser.edge)for(n=0;n<i.length;n++)i[n].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),a();var o=r();for(n=0;n<i.length;n++){var s=e(i[n]).data("id"),l=i[n],c=t.doc.createRange(),f=t.$el.find('.fr-marker[data-type="false"][data-id="'+s+'"]');(t.browser.msie||t.browser.edge)&&f.css("display","inline-block");var p=null;if(f.length>0){f=f[0];try{for(var u,h=!1,g=l.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0===g.textContent.length;)u=g,g=g.nextSibling,e(u).remove();for(var m=f.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0===m.textContent.length;)u=m,m=m.nextSibling,e(u).remove();if(l.nextSibling==f||f.nextSibling==l){for(var v=l.nextSibling==f?l:f,E=v==l?f:l,b=v.previousSibling;b&&b.nodeType==Node.TEXT_NODE&&0===b.length;)u=b,b=b.previousSibling,e(u).remove();if(b&&b.nodeType==Node.TEXT_NODE)for(;b&&b.previousSibling&&b.previousSibling.nodeType==Node.TEXT_NODE;)b.previousSibling.textContent=b.previousSibling.textContent+b.textContent,b=b.previousSibling,e(b.nextSibling).remove();for(var T=E.nextSibling;T&&T.nodeType==Node.TEXT_NODE&&0===T.length;)u=T,T=T.nextSibling,e(u).remove();if(T&&T.nodeType==Node.TEXT_NODE)for(;T&&T.nextSibling&&T.nextSibling.nodeType==Node.TEXT_NODE;)T.nextSibling.textContent=T.textContent+T.nextSibling.textContent,T=T.nextSibling,e(T.previousSibling).remove();if(b&&(t.node.isVoid(b)||t.node.isBlock(b))&&(b=null),T&&(t.node.isVoid(T)||t.node.isBlock(T))&&(T=null),b&&T&&b.nodeType==Node.TEXT_NODE&&T.nodeType==Node.TEXT_NODE){e(l).remove(),e(f).remove();var A=b.textContent.length;b.textContent=b.textContent+T.textContent,e(T).remove(),t.spaces.normalize(b),c.setStart(b,A),c.setEnd(b,A),h=!0}else!b&&T&&T.nodeType==Node.TEXT_NODE?(e(l).remove(),e(f).remove(),t.spaces.normalize(T),p=e(t.doc.createTextNode("")),e(T).before(p),c.setStart(T,0),c.setEnd(T,0),h=!0):!T&&b&&b.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(f).remove(),t.spaces.normalize(b),p=e(t.doc.createTextNode("")),e(b).after(p),c.setStart(b,b.textContent.length),c.setEnd(b,b.textContent.length),h=!0)}if(!h){var S,C;(t.browser.chrome||t.browser.edge)&&l.nextSibling==f?(S=d(f,c,!0)||c.setStartAfter(f),C=d(l,c,!1)||c.setEndBefore(l)):(l.previousSibling==f&&(l=f,f=l.nextSibling),f.nextSibling&&"BR"===f.nextSibling.tagName||!f.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",f.style.display="inline",p=e(t.doc.createTextNode(""))),S=d(l,c,!0)||e(l).before(p)&&c.setStartBefore(l),C=d(f,c,!1)||e(f).after(p)&&c.setEndAfter(f)),"function"==typeof S&&S(),"function"==typeof C&&C()}}catch(e){}}p&&p.remove();try{o.addRange(c)}catch(e){}}t.markers.remove()}function d(n,r,i){var a,o=n.previousSibling,s=n.nextSibling;return o&&s&&o.nodeType==Node.TEXT_NODE&&s.nodeType==Node.TEXT_NODE?(a=o.textContent.length,i?(s.textContent=o.textContent+s.textContent,e(o).remove(),e(n).remove(),t.spaces.normalize(s),function(){r.setStart(s,a)}):(o.textContent=o.textContent+s.textContent,e(s).remove(),e(n).remove(),t.spaces.normalize(o),function(){r.setEnd(o,a)})):o&&!s&&o.nodeType==Node.TEXT_NODE?(a=o.textContent.length,i?(t.spaces.normalize(o),function(){r.setStart(o,a)}):(t.spaces.normalize(o),function(){r.setEnd(o,a)})):!(!s||o||s.nodeType!=Node.TEXT_NODE)&&(i?(t.spaces.normalize(s),function(){r.setStart(s,0)}):(t.spaces.normalize(s),function(){r.setEnd(s,0)}))}function c(){return!0}function f(){for(var e=i(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function p(e){var n,r,i=!1,a=!1;if(t.win.getSelection){var o=t.win.getSelection();o.rangeCount&&(n=o.getRangeAt(0),(r=n.cloneRange()).selectNodeContents(e),r.setEnd(n.startContainer,n.startOffset),i=""===r.toString(),r.selectNodeContents(e),r.setStart(n.endContainer,n.endOffset),a=""===r.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(n=t.doc.selection.createRange(),(r=n.duplicate()).moveToElementText(e),r.setEndPoint("EndToStart",n),i=""===r.text,r.moveToElementText(e),r.setEndPoint("StartToEnd",n),a=""===r.text);return{atStart:i,atEnd:a}}function u(n,r){void 0===r&&(r=!0);var i=e(n).html();i&&i.replace(/\u200b/g,"").length!=i.length&&e(n).html(i.replace(/\u200b/g,""));for(var a=t.node.contents(n),o=0;o<a.length;o++)a[o].nodeType!=Node.ELEMENT_NODE?e(a[o]).remove():(u(a[o],0===o),0===o&&(r=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):r&&e(n).attr("data-first",!0)}function h(){return 0===e(this).find("fr-inner").length}function g(n,r){var i=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(i[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var a=0;a<i.length;a++){var o=i[a];t.node.hasClass(o,"fr-marker")?r=(r+1)%2:r?e(o).find(".fr-marker").length>0?r=g(e(o),r):["TD","TH"].indexOf(o.tagName)<0&&!t.node.hasClass(o,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(o).remove():u(o):t.node.hasClass(o,"fr-inner")?0===e(o).find(".fr-inner").length?e(o).html("<br>"):e(o).find(".fr-inner").filter(h).html("<br>"):(e(o).empty(),e(o).attr("data-del-cell",!0)):e(o).find(".fr-marker").length>0&&(r=g(e(o),r))}return r}function m(){try{if(!t.$wp)return!1;for(var e=i(0).commonAncestorContainer;e&&!t.node.isElement(e);)e=e.parentNode;return!!t.node.isElement(e)}catch(e){return!1}}function v(n,r){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var i=n.firstChild;i&&(t.node.isBlock(i)||r&&!t.node.isVoid(i)&&i.nodeType==Node.ELEMENT_NODE);)n=i,i=i.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function E(n,r){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var i=n.lastChild;i&&(t.node.isBlock(i)||r&&!t.node.isVoid(i)&&i.nodeType==Node.ELEMENT_NODE);)n=i,i=i.lastChild;n.innerHTML=n.innerHTML+e.FE.MARKERS}return{text:n,get:r,ranges:i,clear:a,element:function(){var a=r();try{if(a.rangeCount){var o,s=i(0),l=s.startContainer;if(l.nodeType==Node.TEXT_NODE&&s.startOffset==(l.textContent||"").length&&l.nextSibling&&(l=l.nextSibling),l.nodeType==Node.ELEMENT_NODE){var d=!1;if(l.childNodes.length>0&&l.childNodes[s.startOffset]){for(o=l.childNodes[s.startOffset];o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.nextSibling;if(o&&o.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=o,d=!0),!d&&l.childNodes.length>1&&s.startOffset>0&&l.childNodes[s.startOffset-1]){for(o=l.childNodes[s.startOffset-1];o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.nextSibling;o&&o.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=o,d=!0)}}else!s.collapsed&&l.nextSibling&&l.nextSibling.nodeType==Node.ELEMENT_NODE&&(o=l.nextSibling)&&o.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=o,d=!0);!d&&l.childNodes.length>0&&e(l.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(l.childNodes[0].tagName)<0&&(l=l.childNodes[0])}for(;l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!=c.tagName;){if(c==t.el)return l;c=e(c).parent()[0]}}}catch(e){}return t.el},endElement:function(){var a=r();try{if(a.rangeCount){var o,s=i(0),l=s.endContainer;if(l.nodeType==Node.ELEMENT_NODE){var d=!1;l.childNodes.length>0&&l.childNodes[s.endOffset]&&e(l.childNodes[s.endOffset]).text()===n()?(l=l.childNodes[s.endOffset],d=!0):!s.collapsed&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE?(o=l.previousSibling)&&o.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=o,d=!0):!s.collapsed&&l.childNodes.length>0&&l.childNodes[s.endOffset]&&(o=l.childNodes[s.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&o&&o.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(l=o,d=!0),!d&&l.childNodes.length>0&&e(l.childNodes[l.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(l.childNodes[l.childNodes.length-1].tagName)<0&&(l=l.childNodes[l.childNodes.length-1])}for(l.nodeType==Node.TEXT_NODE&&0===s.endOffset&&l.previousSibling&&l.previousSibling.nodeType==Node.ELEMENT_NODE&&(l=l.previousSibling);l.nodeType!=Node.ELEMENT_NODE&&l.parentNode;)l=l.parentNode;for(var c=l;c&&"HTML"!=c.tagName;){if(c==t.el)return l;c=e(c).parent()[0]}}}catch(e){}return t.el},save:s,restore:l,isCollapsed:f,isFull:function(){if(f())return!1;t.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,r=p(t.el);return r.atStart&&r.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n},inEditor:m,remove:function(){if(f())return!0;var n;s();var r=t.$el.find('.fr-marker[data-type="true"]');for(n=0;n<r.length;n++)for(var i=r[n];!function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var r=n;n=n.previousSibling,e(r).remove()}return n}(i)&&!t.node.isBlock(i.parentNode)&&!t.$el.is(i.parentNode);)e(i.parentNode).before(i);var a=t.$el.find('.fr-marker[data-type="false"]');for(n=0;n<a.length;n++){for(var o=a[n];!function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;){var r=n;n=n.nextSibling,e(r).remove()}return n}(o)&&!t.node.isBlock(o.parentNode)&&!t.$el.is(o.parentNode);)e(o.parentNode).after(o);o.parentNode&&t.node.isBlock(o.parentNode)&&t.node.isEmpty(o.parentNode)&&!t.$el.is(o.parentNode)&&t.opts.keepFormatOnDelete&&e(o.parentNode).after(o)}if(c()){g(t.$el,0);var d=t.$el.find('[data-first="true"]');if(d.length)t.$el.find(".fr-marker").remove(),d.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),d.attr("data-text")&&d.replaceWith(d.html());else for(t.$el.find("table").filter(function(){return e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell"),r=t.$el.find('.fr-marker[data-type="true"]'),n=0;n<r.length;n++){var p=r[n],u=p.nextSibling,h=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(p).data("id")+'"]').get(0);if(h){if(p&&(!u||u!=h)){var m=t.node.blockParent(p),v=t.node.blockParent(h),E=!1,b=!1;if(m&&["UL","OL"].indexOf(m.tagName)>=0&&(m=null,E=!0),v&&["UL","OL"].indexOf(v.tagName)>=0&&(v=null,b=!0),e(p).after(h),m!=v)if(null!=m||E)if(null!=v||b||0!==e(m).parentsUntil(t.$el,"table").length)m&&v&&0===e(m).parentsUntil(t.$el,"table").length&&0===e(v).parentsUntil(t.$el,"table").length&&(e(m).append(e(v).html()),e(v).remove());else{for(u=m;!u.nextSibling&&u.parentNode!=t.el;)u=u.parentNode;for(u=u.nextSibling;u&&"BR"!=u.tagName;){var T=u.nextSibling;e(m).append(u),u=T}u&&"BR"==u.tagName&&e(u).remove()}else{var A=t.node.deepestParent(p);A?(e(A).after(e(v).html()),e(v).remove()):0===e(v).parentsUntil(t.$el,"table").length&&(e(p).next().after(e(v).html()),e(v).remove())}}}else h=e(p).clone().attr("data-type",!1),e(p).after(h)}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var S=t.$el.find(".fr-marker:last").get(0),C=t.$el.find(".fr-marker:first").get(0);void 0!==S&&void 0!==C&&!S.nextSibling&&C.previousSibling&&"BR"==C.previousSibling.tagName&&t.node.isElement(S.parentNode)&&t.node.isElement(C.parentNode)&&t.$el.append("<br>"),l()},blocks:function(){var n,a=[],s=r();if(m()&&s.rangeCount){var l=i();for(n=0;n<l.length;n++){var d,c=l[n],f=o(c.startContainer,c.startOffset),p=o(c.endContainer,c.endOffset);t.node.isBlock(f)&&a.indexOf(f)<0&&a.push(f),(d=t.node.blockParent(f))&&a.indexOf(d)<0&&a.push(d);for(var u=[],h=f;h!==p&&h!==t.el;)u.indexOf(h)<0&&h.children&&h.children.length?(u.push(h),h=h.children[0]):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,u.push(h)),t.node.isBlock(h)&&u.indexOf(h)<0&&a.indexOf(h)<0&&(h!==p||c.endOffset>0)&&a.push(h);t.node.isBlock(p)&&a.indexOf(p)<0&&c.endOffset>0&&a.push(p),(d=t.node.blockParent(p))&&a.indexOf(d)<0&&a.push(d)}}for(n=a.length-1;n>0;n--)e(a[n]).find(a).length&&("LI"!=a[n].tagName||1==a[n].children.length&&a.indexOf(a[n].children[0])>=0)&&a.splice(n,1);return a},info:p,setAtEnd:E,setAtStart:v,setBefore:function(n,r){void 0===r&&(r=!0);for(var i=n.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;return i?(t.node.isBlock(i)?E(i):"BR"==i.tagName?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?v(n):e(n).before(e.FE.MARKERS),!0)},setAfter:function(n,r){void 0===r&&(r=!0);for(var i=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.nextSibling;return i?(t.node.isBlock(i)?v(i):e(i).before(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?E(n):e(n).after(e.FE.MARKERS),!0)},rangeElement:o}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var r,i=t.node.contents(e),a=[];for(r=0;r<i.length;r++)i[r].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(i[r])?i[r].nodeType==Node.TEXT_NODE&&(i[r].textContent=i[r].textContent.replace(/\u200b/g,"")):i[r].textContent.replace(/\u200b/g,"").length!=i[r].textContent.length&&n(i[r]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),i=t.node.contents(e),a=e.querySelectorAll(".fr-marker"),i.length-a.length==0)){for(r=0;r<i.length;r++)if((i[r].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(r=0;r<a.length;r++)e.parentNode.insertBefore(a[r].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function r(e,n){if(e.nodeType==Node.COMMENT_NODE)return"\x3c!--"+e.nodeValue+"--\x3e";if(e.nodeType==Node.TEXT_NODE)return n?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var i=document.createElement("div"),a=e.cloneNode(!0);return i.appendChild(a),i.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var o=e.childNodes;if(0===o.length)return e.outerHTML;for(var s="",l=0;l<o.length;l++)"PRE"==e.tagName&&(n=!0),s+=r(o[l],n);return t.node.openTagString(e)+s+t.node.closeTagString(e)}function i(e){return O=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return O.push(e),"[FROALA.EDITOR.SCRIPT "+(O.length-1)+"]"}),e=e.replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(e){return O.push(e),"[FROALA.EDITOR.NOSCRIPT "+(O.length-1)+"]"}),e=e.replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,function(e){return O.push(e),"[FROALA.EDITOR.IFRAME "+(O.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function a(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":O[parseInt(n,10)]}),e=e.replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("noscript")>=0?"":O[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}),e=e.replace(/\[FROALA\.EDITOR\.IFRAME ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("iframe")>=0?"":O[parseInt(n,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function o(e){var t=e.replace(/;;/gi,";");return";"!=(t=t.replace(/^;/gi,"")).charAt(t.length)&&(t+=";"),t}function s(e){var n;for(n in e)if(e.hasOwnProperty(n)){var r=n.match(x),i=null;"style"==n&&t.opts.htmlAllowedStyleProps.length&&(i=e[n].match(w)),r&&i?e[n]=o(i.join(";")):r&&("style"!=n||i)||delete e[n]}for(var a="",s=Object.keys(e).sort(),l=0;l<s.length;l++)n=s[l],e[n].indexOf('"')<0?a+=" "+n+'="'+e[n]+'"':a+=" "+n+"='"+e[n]+"'";return a}function l(e,n,r){if(t.opts.fullPage){var i=t.html.extractDoctype(r),a=s(t.html.extractNodeAttrs(r,"html"));return n=null==n?t.html.extractNode(r,"head")||"<title></title>":n,i+"<html"+a+"><head"+s(t.html.extractNodeAttrs(r,"head"))+">"+n+"</head><body"+s(t.html.extractNodeAttrs(r,"body"))+">"+e+"</body></html>"}return e}function d(n,i){var a,o=e("<div>"+n+"</div>"),s="";if(o){var l=t.node.contents(o.get(0));for(a=0;a<l.length;a++)i(l[a]);for(l=t.node.contents(o.get(0)),a=0;a<l.length;a++)s+=r(l[a])}return s}function c(e,n,r){var o=e=i(e),s=null;return t.opts.fullPage&&(o=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e),r&&(s=t.html.extractNode(e,"head")||"")),o=d(o,n),s&&(s=d(s,n)),a(l(o,s,e))}function f(e){var n=t.doc.createElement("DIV");return n.innerHTML=e,n.textContent}function p(n){if("SPAN"==n.tagName&&(n.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==n.tagName&&h(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&0!==n.getAttribute("data-fr-src").indexOf("blob:")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(f(n.getAttribute("data-fr-src")))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(f(n.getAttribute("href")))),n.getAttribute("src")&&n.setAttribute("src",t.helpers.sanitizeURL(f(n.getAttribute("src")))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0===n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var r=e.FE.HTML5Map[n.tagName],i="<"+r+">"+n.innerHTML+"</"+r+">";n.insertAdjacentHTML("beforebegin",i),(n=n.previousSibling).parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(L))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(_))"svg"===n.tagName?n.parentNode.removeChild(n):t.browser.safari&&"path"==n.tagName&&n.parentNode&&"svg"==n.parentNode.tagName||(n.outerHTML=n.innerHTML);else{var a=n.attributes;if(a)for(var s=a.length-1;s>=0;s--){var l=a[s],d=l.nodeName.match(x),c=null;"style"==l.nodeName&&t.opts.htmlAllowedStyleProps.length&&(c=l.value.match(w)),d&&c?l.value=o(c.join(";")):d&&("style"!=l.nodeName||c)||n.removeAttribute(l.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function u(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&u(n[r]);p(e)}function h(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function g(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var r=e[n].children,i=!0,a=0;a<r.length;a++)if("TH"!=r[a].tagName){i=!1;break}if(!1!==i&&0!==r.length){for(var o=e[n];o&&"TABLE"!=o.tagName&&"THEAD"!=o.tagName;)o=o.parentNode;var s=o;"THEAD"!=s.tagName&&(s=t.doc.createElement("THEAD"),o.insertBefore(s,o.firstChild)),s.appendChild(e[n])}}}function m(){var n=t.html.defaultTag();if(n)for(var r=t.el.querySelectorAll("td > "+n+", th > "+n),i=0;i<r.length;i++)""===t.node.attributes(r[i])&&e(r[i]).replaceWith(r[i].innerHTML+"<br>")}function v(){var e=[];do{if(e.length){var n=e[0],r=t.doc.createElement("ul");n.parentNode.insertBefore(r,n);do{var i=n;n=n.nextSibling,r.appendChild(i)}while(n&&"LI"==n.tagName)}e=[];for(var a=t.el.querySelectorAll("li"),o=0;o<a.length;o++)(function(e){return!t.node.isList(e.parentNode)})(a[o])&&e.push(a[o])}while(e.length>0)}function E(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var r=e[n];if(t.node.isList(r.previousSibling)&&t.node.openTagString(r)==t.node.openTagString(r.previousSibling)){for(var i=t.node.contents(r),a=0;a<i.length;a++)r.previousSibling.appendChild(i[a]);r.parentNode.removeChild(r)}}}function b(){var e,n;do{n=!1;var r=t.el.querySelectorAll("li:empty");for(e=0;e<r.length;e++)r[e].parentNode.removeChild(r[e]);var i=t.el.querySelectorAll("ul, ol");for(e=0;e<i.length;e++)!function(e){e.querySelector("LI")||(n=!0,e.parentNode.removeChild(e))}(i[e])}while(!0===n)}function T(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),r=0;r<n.length;r++){var i=n[r],a=i.previousSibling;a&&("LI"==a.tagName?a.appendChild(i):e(i).wrap("<li></li>"))}}function A(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(i.nextSibling){var a=i.nextSibling,o=e("<li>");e(i.parentNode).after(o);do{var s=a;a=a.nextSibling,o.append(s)}while(a)}}}function S(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(t.node.isFirstSibling(i))e(i).before("<br/>");else if(i.previousSibling&&"BR"==i.previousSibling.tagName){for(var a=i.previousSibling.previousSibling;a&&t.node.hasClass(a,"fr-marker");)a=a.previousSibling;a&&"BR"!=a.tagName&&e(i.previousSibling).remove()}}}function C(){for(var n=t.el.querySelectorAll("li:empty"),r=0;r<n.length;r++)e(n[r]).remove()}function R(){for(var n=t.el.querySelectorAll("ul, ol"),r=0;r<n.length;r++)for(var i=t.node.contents(n[r]),a=null,o=i.length-1;o>=0;o--)"LI"!=i[o].tagName?(a||(a=e("<li>")).insertBefore(i[o]),a.prepend(i[o])):a=null}function y(){if(t.html.defaultTag())for(var n=t.el.querySelectorAll("li > "+t.html.defaultTag()),r=n.length-1;r>=0;r--){var i=n[r];i.previousSibling&&!t.node.isEmpty(i)&&e("<br>").insertAfter(i.previousSibling),i.outerHTML=i.innerHTML}}var _,L,x,w,O=[];return{_init:function(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])},html:function(n,r,i,a){void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===a&&(a=!1),n=n.replace(/<br> */g,"<br>");var o,s=e.merge([],t.opts.htmlAllowedTags);for(o=0;o<r.length;o++)s.indexOf(r[o])>=0&&s.splice(s.indexOf(r[o]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(o=0;o<i.length;o++)l.indexOf(i[o])>=0&&l.splice(l.indexOf(i[o]),1);return l.push("data-fr-.*"),l.push("fr-.*"),_=new RegExp("^"+s.join("$|^")+"$","gi"),x=new RegExp("^"+l.join("$|^")+"$","gi"),L=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),w=t.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+t.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,n=c(n,u,!0)},toHTML5:function(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var r=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),r=!0);for(var i=0;i<n.length;i++)""===t.node.attributes(n[i])&&e(n[i]).replaceWith("<"+e.FE.HTML5Map[n[i].tagName]+">"+n[i].innerHTML+"</"+e.FE.HTML5Map[n[i].tagName]+">");r&&t.selection.restore()}},tables:function(){g(),m()},lists:function(){v(),E(),b(),T(),A(),S(),R(),C(),y()},quotes:function(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),r=0;r<n.length;r++){var i=n[r];t.node.attributes(i)==t.node.attributes(i.previousSibling)&&(e(i).prev().append(e(i).html()),e(i).remove())}},invisibleSpaces:function(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)},exec:c}},e.FE.MODULES.spaces=function(t){function n(n,r){var i=n.previousSibling,a=n.nextSibling,o=n.textContent,s=n.parentNode;if(!t.html.isPreformatted(s)){r&&(o=o.replace(/[\f\n\r\t\v ]{2,}/g," "),a&&"BR"!==a.tagName&&!t.node.isBlock(a)||!t.node.isBlock(s)&&!t.node.isLink(s)||(o=o.replace(/[\f\n\r\t\v ]{1,}$/g,"")),i&&"BR"!==i.tagName&&!t.node.isBlock(i)||!t.node.isBlock(s)&&!t.node.isLink(s)||(o=o.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===o&&(i&&i.nodeType!=Node.TEXT_NODE||a&&a.nodeType!=Node.TEXT_NODE)&&(o="")),o=o.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",d=0;d<o.length;d++)32!=o.charCodeAt(d)||0!==d&&32!=l.charCodeAt(d-1)?l+=o[d]:l+=e.FE.UNICODE_NBSP;(!a&&t.node.isBlock(n.parentNode)||a&&t.node.isBlock(a)||a&&a.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(a)&&"block"==t.win.getComputedStyle(a).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!i||t.node.isVoid(i)||t.node.isBlock(i)||1!==(l=l.replace(/^\u00A0([^ $])/," $1")).length||160!==l.charCodeAt(0)||!a||t.node.isVoid(a)||t.node.isBlock(a)||(l=" "),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}}function r(e,r){if(void 0!==e&&e||(e=t.el),void 0===r&&(r=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,r);else if(e.nodeType==Node.ELEMENT_NODE)for(var i=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){for(var n=e.parentNode;n&&n!==t.el;){if("STYLE"==n.tagName||"IFRAME"==n.tagName)return!1;if("PRE"===n.tagName)return!1;n=n.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")}),!1);i.nextNode();)n(i.currentNode,r)}return{normalize:r,normalizeAroundCursor:function(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),i=0;i<n.length;i++){for(var a=null,o=(a=t.node.blockParent(n[i])||n[i]).nextSibling,s=a.previousSibling;o&&"BR"==o.tagName;)o=o.nextSibling;for(;s&&"BR"==s.tagName;)s=s.previousSibling;a&&e.indexOf(a)<0&&e.push(a),s&&e.indexOf(s)<0&&e.push(s),o&&e.indexOf(o)<0&&e.push(o)}for(var l=0;l<e.length;l++)r(e[l])}}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function r(e){return-1!=["PRE","SCRIPT"].indexOf(e.tagName)}function i(n){var r,i=[],o=[];if(n){var s=t.el.querySelectorAll(".fr-marker");for(r=0;r<s.length;r++){var l=t.node.blockParent(s[r])||s[r];if(l){var d=l.nextSibling,c=l.previousSibling;l&&o.indexOf(l)<0&&t.node.isBlock(l)&&o.push(l),c&&t.node.isBlock(c)&&o.indexOf(c)<0&&o.push(c),d&&t.node.isBlock(d)&&o.indexOf(d)<0&&o.push(d)}}}else o=t.el.querySelectorAll(a());var f=a();for(f+=","+e.FE.VOID_ELEMENTS.join(","),f+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",r=o.length-1;r>=0;r--)if(!(o[r].textContent&&o[r].textContent.replace(/\u200B|\n/g,"").length>0||o[r].querySelectorAll(f).length>0)){for(var p=t.node.contents(o[r]),u=!1,h=0;h<p.length;h++)if(p[h].nodeType!=Node.COMMENT_NODE&&p[h].textContent&&p[h].textContent.replace(/\u200B|\n/g,"").length>0){u=!0;break}u||i.push(o[r])}return i}function a(){return e.FE.BLOCK_TAGS.join(", ")}function o(n){var r=e.merge([],e.FE.VOID_ELEMENTS);r=e.merge(r,t.opts.htmlAllowedEmptyTags),void 0===n&&(r=e.merge(r,e.FE.BLOCK_TAGS));var i,a;i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)");do{a=!1;for(var o=0;o<i.length;o++)0!==i[o].attributes.length&&void 0===i[o].getAttribute("href")||(i[o].parentNode.removeChild(i[o]),a=!0);i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)")}while(i.length&&a)}function s(e,r){var i=n();if(r&&(i="div"),i){for(var a=t.doc.createDocumentFragment(),o=null,s=!1,l=e.firstChild;l;){var d=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))o=null,a.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)o=null,a.appendChild(l);else if("BR"==l.tagName)null==o?(o=t.doc.createElement(i),r&&o.setAttribute("class","fr-temp-div"),o.setAttribute("data-empty",!0),o.appendChild(l),a.appendChild(o)):!1===s&&(o.appendChild(t.doc.createElement("br")),r&&o.setAttribute("class","fr-temp-div"),o.setAttribute("data-empty",!0)),o=null;else{var c=l.textContent;l.nodeType==Node.TEXT_NODE&&0===c.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==o&&(o=t.doc.createElement(i),r&&o.setAttribute("class","fr-temp-div"),a.appendChild(o),s=!1),o.appendChild(l),s||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===c.replace(/ /g,"").length||(s=!0))}l=d}e.innerHTML="",e.appendChild(a)}}function l(e,t){for(var n=0;n<e.length;n++)s(e[n],t)}function d(e,n,r,i){if(!t.$wp)return!1;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1);var a=t.$wp.scrollTop();s(t.el,e),i&&l(t.el.querySelectorAll(".fr-inner"),e),n&&l(t.el.querySelectorAll("td, th"),e),r&&l(t.el.querySelectorAll("blockquote"),e),a!=t.$wp.scrollTop()&&t.$wp.scrollTop(a)}function c(e){if(void 0===e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);n.nextNode();){var i=n.currentNode;if(!r(i.parentNode)){var a=t.node.isBlock(i.parentNode)||t.node.isElement(i.parentNode),o=i.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(a){var s=i.previousSibling,l=i.nextSibling;s&&l&&" "==o?o=t.node.isBlock(s)&&t.node.isBlock(l)?"":"\n":(s||(o=o.replace(/^ */,"")),l||(o=o.replace(/ *$/,"")))}i.textContent=o}}}function f(e,t,n){var r=new RegExp(t,"gi").exec(e);return r?r[n]:null}function p(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function u(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function h(n,r){var i=n.parentNode;if(i&&(t.node.isBlock(i)||t.node.isElement(i))&&["TD","TH"].indexOf(i.tagName)<0){for(var a=n.previousSibling,o=n.nextSibling;a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.replace(/\n|\r/g,"").length;)a=a.previousSibling;a&&i&&"BR"!=a.tagName&&!t.node.isBlock(a)&&!o&&i.textContent.replace(/\u200B/g,"").length>0&&a.textContent.length>0&&!t.node.hasClass(a,"fr-marker")&&(t.el==i&&!o&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(r&&t.selection.save(),n.parentNode.removeChild(n),r&&t.selection.restore()))}else!i||t.node.isBlock(i)||t.node.isElement(i)||n.previousSibling||n.nextSibling||h(n.parentNode,r)}function g(){var e,n,r=t.selection.element(),i=[];if(e=t.node.isBlock(r)?r:t.node.blockParent(r)){var a=e.nextSibling,o=e.previousSibling;e&&i.indexOf(e)<0&&i.push(e),o&&t.node.isBlock(o)&&i.indexOf(o)<0&&i.push(o),a&&t.node.isBlock(a)&&i.indexOf(a)<0&&i.push(a)}var s=[];for(n=0;n<i.length;n++)for(var l=i[n].querySelectorAll("br"),d=0;d<l.length;d++)s.indexOf(l[d])<0&&s.push(l[d]);if(r.parentNode==t.el){var c=t.el.children;for(n=0;n<c.length;n++)"BR"==c[n].tagName&&s.indexOf(c[n])<0&&s.push(c[n])}return s}function m(){t.opts.htmlUntouched||(o(),d()),c(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),v(),t.placeholder.refresh()}function v(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(a())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function E(e,t){return f(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function b(n,r){var i=e("<div "+(f(n,"<"+r+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(i.get(0))}function T(e){return f(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function A(e,n){t.opts.htmlExecuteScripts?e.html(n):e.get(0).innerHTML=n}function S(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,i=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,a=/(:[\w-]+\([^\)]*\))/gi,o=/(:[^\s\+>~\.\[:]+)/g,s=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(r)||[]).length+10*(e.match(a)||[]).length+10*(e.match(o)||[]).length+(e.match(i)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(s)||[]).length}function C(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.getAttribute&&""===e.getAttribute("style")&&e.removeAttribute("style"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""],[style=""]'),r=0;r<n.length;r++){var i=n[r];""===i.getAttribute("class")&&i.removeAttribute("class"),""===i.getAttribute("style")&&i.removeAttribute("style")}}function R(e,t){return e[3]-t[3]}function y(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(a())}function _(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function L(n){var r=null;if(void 0===n&&(r=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var i=r?(r.textContent.match(/\u200B/g)||[]).length-r.querySelectorAll(".fr-marker").length:0;if((t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length==i)return!1;var a,o;do{o=!1,a=t.el.querySelectorAll("*:not(.fr-marker)");for(var s=0;s<a.length;s++){var l=a[s];if(r!=l){var d=l.textContent;0===l.children.length&&1===d.length&&8203==d.charCodeAt(0)&&(e(l).remove(),o=!0)}}}while(o)}return{defaultTag:n,isPreformatted:r,emptyBlocks:i,emptyBlockTagsQuery:function(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"},blockTagsQuery:a,fillEmptyBlocks:function(n){for(var r=i(n),a=0;a<r.length;a++){var o=r[a];"false"===o.getAttribute("contenteditable")||o.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(o)||"TABLE"!=o.tagName&&"TBODY"!=o.tagName&&"TR"!=o.tagName&&o.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.el);s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}},cleanEmptyTags:o,cleanWhiteTags:L,cleanBlankSpaces:c,blocks:function(){return t.$el.get(0).querySelectorAll(a())},getDoctype:u,set:function(n){var r=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var i=E(r,"body")||(r.indexOf("<body")>=0?"":r),a=b(r,"body"),o=E(r,"head")||"<title></title>",s=b(r,"head"),l=e("<div>").append(o).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();o=e("<div>").append(o).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"\x3c!--"+this.nodeValue+"--\x3e":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var d=T(r),c=b(r,"html");A(t.$el,l+"\n"+i),t.node.clearAttributes(t.el),t.$el.attr(a),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),A(t.$head,o),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(s),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(c),t.iframe_document.doctype.parentNode.replaceChild(p(d,t.iframe_document),t.iframe_document.doctype)}else A(t.$el,r);var f=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),m(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),f&&t.edit.off(),t.events.trigger("html.set")},get:function(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var r="";t.events.trigger("html.beforeGet");var i,a,o=[],s={},l=[];if(!t.opts.useClasses&&!n){var d=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(i=0;i<t.doc.styleSheets.length;i++){var c,f=0;try{c=t.doc.styleSheets[i].cssRules,t.doc.styleSheets[i].ownerNode&&"STYLE"==t.doc.styleSheets[i].ownerNode.nodeType&&(f=1)}catch(e){}if(c)for(var p=0,h=c.length;p<h;p++)if(c[p].selectorText&&c[p].style.cssText.length>0){var g,m=c[p].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{g=t.el.querySelectorAll(m)}catch(e){g=[]}for(a=0;a<g.length;a++){!g[a].getAttribute("fr-original-style")&&g[a].getAttribute("style")?(g[a].setAttribute("fr-original-style",g[a].getAttribute("style")),o.push(g[a])):g[a].getAttribute("fr-original-style")||o.push(g[a]),s[g[a]]||(s[g[a]]={});for(var v=1e3*f+S(c[p].selectorText),E=c[p].style.cssText.split(";"),b=0;b<E.length;b++){var T=E[b].trim().split(":")[0];T.match(d)||(s[g[a]][T]||(s[g[a]][T]=0,(g[a].getAttribute("fr-original-style")||"").indexOf(T+":")>=0&&(s[g[a]][T]=1e4)),v>=s[g[a]][T]&&(s[g[a]][T]=v,E[b].trim().length&&l.push([g[a],T.trim(),E[b].trim().split(":")[1].trim(),v])))}}}}for(l.sort(R),i=0;i<l.length;i++){var A=l[i];A[0].style[A[1]]=A[2]}for(i=0;i<o.length;i++)if(o[i].getAttribute("class")&&(o[i].setAttribute("fr-original-class",o[i].getAttribute("class")),o[i].removeAttribute("class")),(o[i].getAttribute("fr-original-style")||"").trim().length>0){var y=o[i].getAttribute("fr-original-style").split(";");for(a=0;a<y.length;a++)y[a].indexOf(":")>0&&(o[i].style[y[a].split(":")[0].trim()]=y[a].split(":")[1].trim())}}if(t.core.isEmpty()?t.opts.fullPage&&(r=u(t.iframe_document),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),t.opts.fullPage?(r=u(t.iframe_document),t.$el.removeClass("fr-view"),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):r=t.$el.html()),!t.opts.useClasses&&!n)for(i=0;i<o.length;i++)o[i].getAttribute("fr-original-class")&&(o[i].setAttribute("class",o[i].getAttribute("fr-original-class")),o[i].removeAttribute("fr-original-class")),o[i].getAttribute("fr-original-style")?(o[i].setAttribute("style",o[i].getAttribute("fr-original-style")),o[i].removeAttribute("fr-original-style")):o[i].removeAttribute("style");t.opts.fullPage&&(r=r.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),r=r.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),r=r.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),r=r.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(r=r.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(r=r.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),r=t.clean.invisibleSpaces(r),r=t.clean.exec(r,C);var _=t.events.chainTrigger("html.get",r);return"string"==typeof _&&(r=_),r=r.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})},getSelected:function(){var n="";if(void 0!==t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var r=t.selection.ranges(),i=0;i<r.length;i++){var a=document.createElement("div");a.appendChild(r[i].cloneContents());var o=a.children;if(o.length){var s=o[o.length-1];("P"==s.tagName&&t.opts.enter==e.FroalaEditor.ENTER_P||"DIV"==s.tagName&&t.opts.enter==e.FroalaEditor.ENTER_DIV)&&t.node.isEmpty(s)&&a.removeChild(s)}(function(n,r){for(;r&&(r.nodeType==Node.TEXT_NODE||!t.node.isBlock(r))&&!t.node.isElement(r);)r&&r.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(r)+t.node.closeTagString(r)),r=r.parentNode;r&&n.innerHTML==r.innerHTML&&(n.innerHTML=r.outerHTML)})(a,function(){var n,r=null;return t.win.getSelection?(n=t.win.getSelection())&&n.rangeCount&&(r=n.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(r=r.parentNode):(n=t.doc.selection)&&"Control"!=n.type&&(r=n.createRange().parentElement()),null!=r&&(e.inArray(t.el,e(r).parents())>=0||r==t.el)?r:null}()),e(a).find(".fr-element").length>0&&(a=t.el),n+=a.innerHTML}}else void 0!==t.doc.selection&&"Text"==t.doc.selection.type&&(n=t.doc.selection.createRange().htmlText);return n},insert:function(n,r,i){t.selection.isCollapsed()||t.selection.remove();var a;if(a=r?n:t.clean.html(n),a=a.replace(/\r|\n/g," "),n.indexOf('class="fr-marker"')<0&&(a=_(a)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete&&y(a))t.el.innerHTML=a;else{var o=t.markers.insert();if(o){t.node.isLastSibling(o)&&e(o).parent().hasClass("fr-deletable")&&e(o).insertAfter(e(o).parent());var s=t.node.blockParent(o);if((y(a)||i)&&(t.node.deepestParent(o)||s&&"LI"==s.tagName)){if(!(o=t.markers.split()))return!1;o.outerHTML=a}else o.outerHTML=a}else t.el.innerHTML=t.el.innerHTML+a}m(),t.keys.positionCaret(),t.events.trigger("html.inserted")},wrap:d,unwrap:function(){t.$el.find("div.fr-temp-div").each(function(){e(this).attr("data-empty")||["LI"].indexOf(this.parentNode.tagName)>=0||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===e(this).attr("class")}).removeAttr("class")},escapeEntities:function(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")},checkIfEmpty:v,extractNode:E,extractNodeAttrs:b,extractDoctype:T,cleanBRs:function(e,n){var r,i=null;if(e)for(i=g(),r=0;r<i.length;r++)h(i[r],n);else for(i=t.el.getElementsByTagName("br"),r=0;r<i.length;r++)h(i[r],n)},_init:function(){if(t.$wp){var e=function(){L(),t.placeholder&&setTimeout(t.placeholder.refresh,0)};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",v)}}}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}return{_init:function(){if(!e.$wp)return!1;n(),e.$iframe&&(e.events.on("keyup keydown",function(){setTimeout(t,0)},!0),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t))},syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){var n;return{_init:function(){e.FE.LANGUAGE&&(n=e.FE.LANGUAGE[t.opts.language]),n&&n.direction&&(t.opts.direction=n.direction)},translate:function(e){return n&&n.translation[e]?n.translation[e]:e}}},e.extend(e.FE.DEFAULTS,{placeholderText:"Copy and Paste your Project Content Here!"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||a();var n=0,r=0,i=0,o=0,s=0,l=0,d=t.node.contents(t.el),c=e(t.selection.element()).css("text-align");if(d.length&&d[0].nodeType==Node.ELEMENT_NODE){var f=e(d[0]);!t.opts.toolbarInline&&t.ready&&(n=t.helpers.getPX(f.css("margin-top")),o=t.helpers.getPX(f.css("padding-top")),r=t.helpers.getPX(f.css("margin-left")),i=t.helpers.getPX(f.css("margin-right")),s=t.helpers.getPX(f.css("padding-left")),l=t.helpers.getPX(f.css("padding-right"))),t.$placeholder.css("font-size",f.css("font-size")),t.$placeholder.css("line-height",f.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),n),paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),o),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),s),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),r),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),l),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),i),textAlign:c}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function r(){t.$wp.removeClass("show-placeholder")}function i(){if(!t.$wp)return!1;t.core.isEmpty()?n():r()}function a(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}return{_init:function(){if(!t.$wp)return!1;t.events.on("init input keydown keyup contentChanged initialized",i)},show:n,hide:r,refresh:i,isVisible:function(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(e){}}function n(){return r}var r=!1;return{_init:function(){e.events.on("focus",function(){n()?e.edit.off():e.edit.on()})},on:function(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),r=!1},off:function(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),r=!0},disableDesign:t,isDisabled:n}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function r(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),n(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var r;try{r=t.o_doc.styleSheets[e].cssRules}catch(e){}if(r)for(var i=0,a=r.length;i<a;i++)!r[i].selectorText||0!==r[i].selectorText.indexOf(".fr-view")&&0!==r[i].selectorText.indexOf(".fr-element")||r[i].style.cssText.length>0&&(0===r[i].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=r[i].selectorText.replace(/\.fr-view/g,"body")+"{"+r[i].style.cssText+"}":t.opts.iframeStyle+=r[i].selectorText.replace(/\.fr-element/g,"body")+"{"+r[i].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"),t.opts.tabIndex=t.opts.tabIndex||t.$oel.attr("tabIndex"),t.opts.tabIndex&&t.$el.attr("tabIndex",t.opts.tabIndex)}function i(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}return{_init:function(){if(e.FE.INSTANCES.push(t),i(),t.$wp){r(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){if(2==e.button)return!1});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()}),t.events.trigger("init")},destroy:function(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null},isEmpty:function(){return t.node.isEmpty(t.el)},getXHR:function(e,n){var r=new XMLHttpRequest;r.open(n,e,!0),t.opts.requestWithCredentials&&(r.withCredentials=!0);for(var i in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,t.opts.requestHeaders[i]);return r},injectStyle:function(n){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+n+"</style>");for(var r=0;r<t.opts.iframeStyleFiles.length;r++){var i=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[r]+'">');i.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(i)}}},hasFocus:function(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0},sameInstance:function(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function r(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}return{_startEnter:function(i){var a,o=n(i),s=o.nextSibling,l=o.previousSibling,d=t.html.defaultTag();if(t.node.isEmpty(o,!0)&&s){for(var c="",f="",p=i.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p),p=p.parentNode;c=t.node.openTagString(p)+c,f+=t.node.closeTagString(p);var u="";for(u=p.parentNode&&"LI"==p.parentNode.tagName?f+"<li>"+e.FE.MARKERS+"<br>"+c:d?f+"<"+d+">"+e.FE.MARKERS+"<br></"+d+">"+c:f+e.FE.MARKERS+"<br>"+c,e(o).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var h=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);h=h.replace(/<span id="fr-break"><\/span>/g,u),e(p).replaceWith(h),t.$el.find("li:empty").remove()}else if(l&&s||!t.node.isEmpty(o,!0)){for(var g="<br>",m=i.parentNode;m&&"LI"!=m.tagName;)g=t.node.openTagString(m)+g+t.node.closeTagString(m),m=m.parentNode;e(o).before("<li>"+g+"</li>"),e(i).remove()}else l?(a=r(o),a.parentNode&&"LI"==a.parentNode.tagName?e(a.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):d?e(a).after("<"+d+">"+e.FE.MARKERS+"<br></"+d+">"):e(a).after(e.FE.MARKERS+"<br>"),e(o).remove()):(a=r(o),a.parentNode&&"LI"==a.parentNode.tagName?s?e(a.parentNode).before(t.node.openTagString(o)+e.FE.MARKERS+"<br></li>"):e(a.parentNode).after(t.node.openTagString(o)+e.FE.MARKERS+"<br></li>"):d?e(a).before("<"+d+">"+e.FE.MARKERS+"<br></"+d+">"):e(a).before(e.FE.MARKERS+"<br>"),e(o).remove())},_middleEnter:function(r){for(var i=n(r),a="",o=r,s="",l="";o!=i;){var d="A"==(o=o.parentNode).tagName&&t.cursor.isAtEnd(r,o)?"fr-to-remove":"";s=t.node.openTagString(e(o).clone().addClass(d).get(0))+s,l=t.node.closeTagString(o)+l}a=l+a+s+e.FE.MARKERS,e(r).replaceWith('<span id="fr-break"></span>');var c=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);c=c.replace(/<span id="fr-break"><\/span>/g,a),e(i).replaceWith(c)},_endEnter:function(r){for(var i=n(r),a=e.FE.MARKERS,o="",s=r,l=!1;s!=i;){var d="A"==(s=s.parentNode).tagName&&t.cursor.isAtEnd(r,s)?"fr-to-remove":"";l||s==i||t.node.isBlock(s)||(l=!0,o+=e.FE.INVISIBLE_SPACE),o=t.node.openTagString(e(s).clone().addClass(d).get(0))+o,a+=t.node.closeTagString(s)}var c=o+a;e(r).remove(),e(i).after(c)},_backspace:function(i){var a=n(i),o=a.previousSibling;if(o){o=e(o).find(t.html.blockTagsQuery()).get(-1)||o,e(i).replaceWith(e.FE.MARKERS);var s=t.node.contents(o);s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,d=t.node.contents(a)[0];d&&!t.node.isList(d);)l=d.nextSibling,e(o).append(d),d=l;for(o=a.previousSibling;d;)l=d.nextSibling,e(o).append(d),d=l;e(a).remove()}else{var c=r(a);if(e(i).replaceWith(e.FE.MARKERS),c.parentNode&&"LI"==c.parentNode.tagName){var f=c.previousSibling;t.node.isBlock(f)?(e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(f).append(e(a).html())):e(c).before(e(a).html())}else{var p=t.html.defaultTag();p&&0===e(a).find(t.html.blockTagsQuery()).length?e(c).before("<"+p+">"+e(a).html()+"</"+p+">"):(e(c).before(e(a).html()),t.html.wrap())}e(a).remove(),0===e(c).find("li").length&&e(c).remove()}},_del:function(r){var i,a=n(r),o=a.nextSibling;if(o){(i=t.node.contents(o)).length&&"BR"==i[0].tagName&&e(i[0]).remove(),e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var s,l=r,d=t.node.contents(o)[0];d&&!t.node.isList(d);)s=d.nextSibling,e(l).after(d),l=d,d=s;for(;d;)s=d.nextSibling,e(a).append(d),d=s;e(r).replaceWith(e.FE.MARKERS),e(o).remove()}else{for(var c=a;!c.nextSibling&&c!=t.el;)c=c.parentNode;if(c==t.el)return!1;if(c=c.nextSibling,t.node.isBlock(c))e.FE.NO_DELETE_TAGS.indexOf(c.tagName)<0&&(e(r).replaceWith(e.FE.MARKERS),(i=t.node.contents(a)).length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(a).append(e(c).html()),e(c).remove());else for((i=t.node.contents(a)).length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(r).replaceWith(e.FE.MARKERS);c&&!t.node.isBlock(c)&&"BR"!=c.tagName;)e(a).append(e(c)),c=c.nextSibling}}}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&n(e.parentNode)))}function r(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?r(e.previousSibling):!e.previousSibling&&r(e.parentNode)))}function i(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?i(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||i(e.parentNode,n)))}function a(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?a(e.nextSibling,n):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==n||a(e.parentNode,n)))}function o(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function s(e,t){var n=new RegExp("(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])"+(t?"":"$"),"i"),r=e.match(n);return r?r[0].length:1}function l(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var a=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);a&&a.previousSibling&&(i=a)}if(null!==i){var o,s=i.previousSibling;if(t.node.isBlock(i)&&t.node.isEditable(i)&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(s))if(t.node.isBlock(s))if(t.node.isEmpty(s)&&!t.node.isList(s))e(s).remove(),e(n).after(t.opts.keepFormatOnDelete?e.FE.INVISIBLE_SPACE:"");else{if(t.node.isList(s)&&(s=e(s).find("li:last").get(0)),(o=t.node.contents(s)).length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(o=t.node.contents(s);o.length&&t.node.isBlock(o[o.length-1]);)s=o[o.length-1],o=t.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(o=t.node.contents(i);o.length&&t.node.isBlock(o[0]);)i=o[0],o=t.node.contents(i);t.node.isEmpty(i)?(e(n).remove(),t.selection.setAtEnd(s,t.opts.keepFormatOnDelete)):(e(n).replaceWith(e.FE.MARKERS),e(s).append(i.innerHTML)),e(i).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==i.tagName&&s.nodeType==Node.ELEMENT_NODE?e(s).remove():(e(s).after(t.node.isEmpty(i)?"":e(i).html()),e(i).remove(),"BR"==s.tagName&&e(s).remove())}}function d(n){for(var r=n;!r.previousSibling;)if(r=r.parentNode,t.node.isElement(r))return!1;r=r.previousSibling;var i;if(!t.node.isBlock(r)&&t.node.isEditable(r)){for(i=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(r)&&i.length&&t.node.isEditable(r);)r=i[i.length-1],i=t.node.contents(r);if(r.nodeType==Node.TEXT_NODE){var a=r.textContent,o=a.length;t.opts.tabSpaces&&a.length>=t.opts.tabSpaces&&0===a.substr(a.length-t.opts.tabSpaces,a.length-1).replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(o=a.length-t.opts.tabSpaces),r.textContent=a.substring(0,o-s(a));var l=a.length!=r.textContent.length;0===r.textContent.length?l&&t.opts.keepFormatOnDelete?e(r).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):(2!=r.parentNode.childNodes.length||r.parentNode!=n.parentNode)&&1!=r.parentNode.childNodes.length||t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode)?(e(r).after(e.FE.MARKERS),t.node.isElement(r.parentNode)&&!n.nextSibling&&r.previousSibling&&"BR"==r.previousSibling.tagName&&e(n).after("<br>"),r.parentNode.removeChild(r)):(e(r.parentNode).after(e.FE.MARKERS),e(r.parentNode).remove()):e(r).after(e.FE.MARKERS)}else t.node.isDeletable(r)?(e(r).after(e.FE.MARKERS),e(r).remove()):n.nextSibling&&"BR"==n.nextSibling.tagName&&t.node.isVoid(r)&&"BR"!=r.tagName?(e(n.nextSibling).remove(),e(n).replaceWith(e.FE.MARKERS)):!1!==t.events.trigger("node.remove",[e(r)])&&(e(r).after(e.FE.MARKERS),e(r).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0&&(t.node.isEditable(r)||t.node.isDeletable(r)))if(t.node.isDeletable(r))e(n).replaceWith(e.FE.MARKERS),e(r).remove();else if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),(i=t.node.contents(r))&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),i=t.node.contents(r);i&&t.node.isBlock(i[i.length-1]);)r=i[i.length-1],i=t.node.contents(r);e(r).append(e.FE.MARKERS);for(var d=n;!d.previousSibling;)d=d.parentNode;for(;d&&"BR"!==d.tagName&&!t.node.isBlock(d);){var c=d;d=d.nextSibling,e(r).append(c)}d&&"BR"==d.tagName&&e(d).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function c(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var a=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);a&&a.nextSibling&&(i=a)}if(null!==i){var o,s=i.nextSibling;if(t.node.isBlock(i)&&(t.node.isEditable(i)||t.node.isDeletable(i))&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(s)&&t.node.isEditable(s))if(t.node.isList(s))if(t.node.isEmpty(i,!0))e(i).remove(),e(s).find("li:first").prepend(e.FE.MARKERS);else{var l=e(s).find("li:first");"BLOCKQUOTE"==i.tagName&&(o=t.node.contents(i)).length&&t.node.isBlock(o[o.length-1])&&(i=o[o.length-1]),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(i).append(t.node.contents(l.get(0))),l.remove(),0===e(s).find("li").length&&e(s).remove())}else{if((o=t.node.contents(s)).length&&"BR"==o[0].tagName&&e(o[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(o=t.node.contents(i);o.length&&t.node.isBlock(o[o.length-1]);)i=o[o.length-1],o=t.node.contents(i);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(o=t.node.contents(s);o.length&&t.node.isBlock(o[0]);)s=o[0],o=t.node.contents(s);e(n).replaceWith(e.FE.MARKERS),e(i).append(s.innerHTML),e(s).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);s&&"BR"!==s.tagName&&!t.node.isBlock(s)&&t.node.isEditable(s);){var d=s;s=s.nextSibling,e(i).append(d)}s&&"BR"==s.tagName&&t.node.isEditable(s)&&e(s).remove()}}}function f(r){for(var i=r;!i.nextSibling;)if(i=i.parentNode,t.node.isElement(i))return!1;if("BR"==(i=i.nextSibling).tagName&&t.node.isEditable(i))if(i.nextSibling){if(t.node.isBlock(i.nextSibling)&&t.node.isEditable(i.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(i.nextSibling.tagName)<0))return void e(i).remove();i=i.nextSibling,e(i.previousSibling).remove()}}else if(n(i))return void(o(r)?t.cursorLists._del(r):t.node.deepestParent(i)&&((!t.node.isEmpty(t.node.blockParent(i))||(t.node.blockParent(i).nextSibling&&e.FE.NO_DELETE_TAGS.indexOf(t.node.blockParent(i).nextSibling.tagName))<0)&&e(i).remove(),c(r)));var a;if(!t.node.isBlock(i)&&t.node.isEditable(i)){for(a=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&a.length&&!t.node.isDeletable(i)&&t.node.isEditable(i);)i=a[0],a=t.node.contents(i);i.nodeType==Node.TEXT_NODE?(e(i).before(e.FE.MARKERS),i.textContent.length&&(i.textContent=i.textContent.substring(s(i.textContent,!0),i.textContent.length))):t.node.isDeletable(i)?(e(i).before(e.FE.MARKERS),e(i).remove()):!1!==t.events.trigger("node.remove",[e(i)])&&(e(i).before(e.FE.MARKERS),e(i).remove()),e(r).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&(t.node.isEditable(i)||t.node.isDeletable(i)))if(t.node.isDeletable(i))e(r).replaceWith(e.FE.MARKERS),e(i).remove();else if(t.node.isList(i))r.previousSibling?(e(i).find("li:first").prepend(r),t.cursorLists._backspace(r)):(e(i).find("li:first").prepend(e.FE.MARKERS),e(r).remove());else if((a=t.node.contents(i))&&"BR"==a[0].tagName&&e(a[0]).remove(),a&&"BLOCKQUOTE"==i.tagName){var l=a[0];for(e(r).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var d=l;l=l.nextSibling,e(r).before(d)}l&&"BR"==l.tagName&&e(l).remove()}else e(r).after(e(i).html()).after(e.FE.MARKERS),e(i).remove()}function p(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function u(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),r=0;r<n.length;r++)n[r].nodeType==Node.TEXT_NODE&&(n[r].textContent=n[r].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function h(n,r,i){var o,s=t.node.deepestParent(n,[],!i);if(s&&"BLOCKQUOTE"==s.tagName)return a(n,s)?(o=t.html.defaultTag(),o?e(s).after("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):e(s).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(m(n,r,i),!1);if(null==s)o=t.html.defaultTag(),o&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):!n.previousSibling||e(n.previousSibling).is("br")||n.nextSibling?e(n).replaceWith("<br>"+e.FE.MARKERS):e(n).replaceWith("<br>"+e.FE.MARKERS+"<br>");else{var l=n,d="";t.node.isBlock(s)&&!r||(d="<br/>");var c="",f="",p="",u="";(o=t.html.defaultTag())&&t.node.isBlock(s)&&(p="<"+o+">",u="</"+o+">",s.tagName==o.toUpperCase()&&(p=t.node.openTagString(e(s).clone().removeAttr("id").get(0))));do{if(l=l.parentNode,!r||l!=s||r&&!t.node.isBlock(s))if(c+=t.node.closeTagString(l),l==s&&t.node.isBlock(s))f=p+f;else{var h="A"==l.tagName&&a(n,l)?"fr-to-remove":"";f=t.node.openTagString(e(l).clone().addClass(h).get(0))+f}}while(l!=s);d=c+d+f+(n.parentNode==s&&t.node.isBlock(s)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(s)&&!e(s).find("*:last").is("br")&&e(s).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),s.nextSibling&&!t.node.isBlock(s.nextSibling)||t.node.isBlock(s)||e(s).after("<br>");var g;g=(g=!r&&t.node.isBlock(s)?t.node.openTagString(s)+e(s).html()+u:t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s)).replace(/<span id="fr-break"><\/span>/g,d),e(s).replaceWith(g)}}function g(n,r,o){var s,l=t.node.deepestParent(n,[],!o);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),g(n,r,o);if(l&&"BLOCKQUOTE"==l.tagName){if(i(n,l))return s=t.html.defaultTag(),s?e(l).before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;a(n,l)?h(n,r,!0):m(n,r,!0)}if(null==l)s=t.html.defaultTag(),s&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(r)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return h(n,r,o);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function m(n,r,o){var s=t.node.deepestParent(n,[],!o);if(null==s)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,d="";"PRE"==s.tagName&&(r=!0),t.node.isBlock(s)&&!r||(d="<br>");var c="",f="";do{var p=l;if(l=l.parentNode,"BLOCKQUOTE"==s.tagName&&t.node.isEmpty(p)&&!t.node.hasClass(p,"fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=s.tagName||!a(n,l)&&!i(n,l))&&(!r||l!=s||r&&!t.node.isBlock(s))){c+=t.node.closeTagString(l);var u="A"==l.tagName&&a(n,l)?"fr-to-remove":"";f=t.node.openTagString(e(l).clone().addClass(u).removeAttr("id").get(0))+f}}while(l!=s);var h=s==n.parentNode&&t.node.isBlock(s)||n.nextSibling;if("BLOCKQUOTE"==s.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var g=t.html.defaultTag();d=c+d+(g?"<"+g+">":"")+e.FE.MARKERS+"<br>"+(g?"</"+g+">":"")+f}else d=c+d+f+(h?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var m=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);m=m.replace(/<span id="fr-break"><\/span>/g,d),e(s).replaceWith(m)}}return{enter:function(i){var a=t.markers.insert();if(!a)return!0;t.el.normalize();var s=!1;e(a).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(i=!1,s=!0),e(a).parentsUntil(t.$el,"TD, TH").length&&(s=!1),n(a)?!o(a)||i||s?h(a,i,s):t.cursorLists._endEnter(a):r(a)?!o(a)||i||s?g(a,i,s):t.cursorLists._startEnter(a):!o(a)||i||s?m(a,i,s):t.cursorLists._middleEnter(a),u(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()},backspace:function(){var a=!1,c=t.markers.insert();if(!c)return!0;for(var f=c.parentNode;f&&!t.node.isElement(f);){if("false"===f.getAttribute("contenteditable"))return e(c).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===f.getAttribute("contenteditable"))break;f=f.parentNode}t.el.normalize();var u=c.previousSibling;if(u){var h=u.textContent;h&&h.length&&8203==h.charCodeAt(h.length-1)&&(1==h.length?e(u).remove():u.textContent=u.textContent.substr(0,h.length-s(h)))}return n(c)?a=d(c):r(c)?o(c)&&i(c,e(c).parents("li:first").get(0))?t.cursorLists._backspace(c):l(c):a=d(c),e(c).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),a},del:function(){var i=t.markers.insert();if(!i)return!1;if(t.el.normalize(),n(i))if(o(i))if(0===e(i).parents("li:first").find("ul, ol").length)t.cursorLists._del(i);else{var a=e(i).parents("li:first").find("ul:first, ol:first").find("li:first");(a=a.find(t.html.blockTagsQuery()).get(-1)||a).prepend(i),t.cursorLists._backspace(i)}else c(i);else f((r(i),i));e(i).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()},isAtEnd:a,isAtStart:i}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(e){x=null,t.opts.multiLine?t.helpers.isIOS()?x=t.snapshot.get():(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function r(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function i(){setTimeout(function(){t.events.disableBlur(),t.events.focus()},0)}function a(e){x=null,t.selection.isCollapsed()?t.helpers.isIOS()?x=t.snapshot.get():(t.cursor.backspace(),e.preventDefault(),e.stopPropagation()):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks()),t.placeholder.refresh()}function o(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function s(n){var r=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||r&&"A"==r.tagName)){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var i=t.markers.insert();if(i){var a=i.previousSibling;!i.nextSibling&&i.parentNode&&"A"==i.parentNode.tagName?(i.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),i.parentNode.removeChild(i)):(a&&a.nodeType==Node.TEXT_NODE&&1==a.textContent.length&&160==a.textContent.charCodeAt(0)?a.textContent=a.textContent+" ":i.insertAdjacentHTML("beforebegin","&nbsp;"),i.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function l(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!L){var e=t.selection.ranges(0),n=e.startContainer,r=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&r<=n.textContent.length&&r>0&&32==n.textContent.charCodeAt(r-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function d(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function c(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",r=0;r<t.opts.tabSpaces;r++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function f(){L=!1}function p(){L=!1}function u(l){t.events.disableBlur();var d=l.which;if(16===d)return!0;if(229===d)return L=!0,!0;L=!1;var f=T(d)&&!E(l),p=d==e.FE.KEYCODE.BACKSPACE||d==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||p&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(f||p)){var u=t.html.defaultTag();if(u?t.$el.html("<"+u+">"+e.FE.MARKERS+"<br/></"+u+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!T(d))return l.preventDefault(),!0}d==e.FE.KEYCODE.ENTER?l.shiftKey?r(l):n(l):d===e.FE.KEYCODE.BACKSPACE&&(l.metaKey||l.ctrlKey)?i():d!=e.FE.KEYCODE.BACKSPACE||E(l)||l.altKey?d!=e.FE.KEYCODE.DELETE||E(l)||l.altKey?d==e.FE.KEYCODE.SPACE?s(l):d==e.FE.KEYCODE.TAB?c(l):E(l)||!T(l.which)||t.selection.isCollapsed()||l.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):o(l):t.placeholder.isVisible()?(l.preventDefault(),l.stopPropagation()):a(l),t.events.enableBlur()}function h(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);n.nextNode();){var r=n.currentNode;r.textContent=r.textContent.replace(/\u200B/gi,"")}}function g(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),(n+=t.opts.toolbarStickyOffset)>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),(t.helpers.isIOS()||t.helpers.isAndroid())&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top,n-=t.helpers.scrollTop()),n<t.$tb.height()+20&&n>=0&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}function m(){var n=t.selection.element(),r=t.node.blockParent(n);if(r&&"DIV"==r.tagName&&t.selection.info(r).atStart){var i=t.html.defaultTag();r.previousSibling&&"DIV"!=r.previousSibling.tagName&&i&&"div"!=i&&(t.selection.save(),e(r).replaceWith("<"+i+">"+r.innerHTML+"</"+i+">"),t.selection.restore())}}function v(n){if(t.helpers.isIOS()&&n&&x)if(n.which==e.FE.KEYCODE.ENTER)t.snapshot.restore(x),t.cursor.enter();else if(n.which==e.FE.KEYCODE.BACKSPACE){var r=t.snapshot.get();t.snapshot.restore(x),t.cursor.backspace(),t.el.innerHTML!==r.html&&t.snapshot.restore(r)}if(t.helpers.isAndroid()&&t.browser.mozilla)return!0;if(L)return!1;if(!t.selection.isCollapsed())return!0;if(n&&(n.which===e.FE.KEYCODE.META||n.which==e.FE.KEYCODE.CTRL))return!0;if(n&&b(n.which))return!0;n&&n.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&m(),n&&(n.which==e.FE.KEYCODE.ENTER||n.which==e.FE.KEYCODE.BACKSPACE||n.which>=37&&n.which<=40&&!t.browser.msie)&&g(),t.html.cleanBRs(!0,!0);var i=t.selection.element();(function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)})(i)&&!t.node.hasClass(i,"fr-marker")&&"IFRAME"!=i.tagName&&function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length}(i)&&(t.selection.save(),h(i),t.selection.restore())}function E(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function b(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function T(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function A(n){var r=n.which;if(E(n)||r>=37&&r<=40||!T(r)&&r!=e.FE.KEYCODE.DELETE&&r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.ENTER&&229!=r)return!0;y||(_=t.snapshot.get(),t.undo.canDo()||t.undo.saveStep()),clearTimeout(y),y=setTimeout(function(){y=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))}function S(e){var n=e.which;if(E(e)||n>=37&&n<=40)return!0;_&&y?(t.undo.saveStep(_),_=null):void 0!==n||_||y||t.undo.saveStep()}function C(e){return(!e||"BR"!=e.tagName)&&0===(e.textContent||"").length&&e.querySelector&&!e.querySelector(":scope > br")}function R(n){var r=t.el.childNodes,i=t.html.defaultTag();return!(!n.target||n.target===t.el)||0===r.length||void(t.$el.outerHeight()-n.offsetY<=10?C(r[r.length-1])&&(i?t.$el.append("<"+i+">"+e.FE.MARKERS+"<br></"+i+">"):t.$el.append(e.FE.MARKERS+"<br>"),t.selection.restore(),g()):n.offsetY<=10&&C(r[0])&&(i?t.$el.prepend("<"+i+">"+e.FE.MARKERS+"<br></"+i+">"):t.$el.prepend(e.FE.MARKERS+"<br>"),t.selection.restore(),g()))}var y,_,L=!1,x=null;return{_init:function(){if(t.events.on("keydown",A),t.events.on("input",l),t.events.on("mousedown",p),t.events.on("keyup input",S),t.events.on("keypress",f),t.events.on("keydown",u),t.events.on("keyup",v),t.events.on("html.inserted",v),t.events.on("cut",d),t.events.on("click",R),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){L=!0}),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){L=!1,v()})}catch(e){}},ctrlKey:E,isCharacter:T,isArrow:b,forceUndo:function(){y&&(clearTimeout(y),t.undo.saveStep(),_=null)},isIME:function(){return L},isBrowserAction:function(t){var n=t.which;return E(t)||n==e.FE.KEYCODE.F5},positionCaret:g}},e.FE.MODULES.accessibility=function(t){function n(e){e&&e.length&&(e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",function(){var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur()},!0),e.data("blur-event-set",!0)),(e.parents(".fr-toolbar, .fr-popup").data("instance")||t).events.disableBlur(),e.focus(),t.shared.$f_el=e)}function r(e,t){var r=t?"last":"first",i=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[r]();if(i.length)return n(i),!0}function i(e){return e.is("input, textarea")&&o(),t.events.disableBlur(),e.focus(),!0}function a(e,n){var r=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(r.length)return i(r);if(t.shared.with_kb){var a=e.find(".fr-active-item:visible:first");if(a.length)return i(a);var o=e.find("[tabIndex]:visible:first");if(o.length)return i(o)}}function o(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function s(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!r(e.data("instance").$tb):!r(n)}return!r(t.$tb)}function d(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function c(i,o,s){if(t.shared.$f_el){var l=d();l&&(t.button.click(l),t.shared.$f_el=l);var c=i.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),f=c.index(t.shared.$f_el);if(0===f&&!s||f==c.length-1&&s){var p;o&&(i.parent().is(".fr-popup")&&(p=!a(i.parent().children().not(".fr-buttons"),!s)),!1===p&&(t.shared.$f_el=null)),o&&!1===p||r(i,!s)}else n(e(c.get(f+(s?1:-1))));return!1}}function f(e,t){return c(e,t,!0)}function p(e,t){return c(e,t)}function u(e){if(t.shared.$f_el){var r;if(t.shared.$f_el.is(".fr-dropdown.fr-active"))return r=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),n(r),!1;if(t.shared.$f_el.is("a.fr-command"))return(r=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(r=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),n(r),!1}}function h(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?m():u(!0)}function g(){return u()}function m(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),A(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var r=t.modals.areVisible(t);r&&r.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function v(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),!1!==t.events.trigger("toolbar.focusEditor")&&(t.events.disableBlur(),t.events.focus())}function E(e){if(t.shared.$f_el){var r=d();return r?(t.button.click(r),n(r)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),A(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(s(t),t.shared.$f_el=null,!1!==t.events.trigger("toolbar.esc")&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),A(e.parent()))):v()),!1}}function b(n){n&&n.length&&(t.events.$on(n,"keydown",function(r){if(!e(r.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;t.shared.with_kb=!0;var a=i.accessibility.exec(r,n);return t.shared.with_kb=!1,a},!0),t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var a=e(r.currentTarget);i.shared.$f_el&&i.shared.$f_el.not(a)&&i.accessibility.focusEditor()},!0))}function T(n){var i=t.popups.get(n);return{_tiKeydown:function(o){var l=i.data("instance")||t;if(!1===l.events.trigger("popup.tab",[o]))return!1;var d=o.which,c=i.find(":focus:first");if(e.FE.KEYCODE.TAB==d){o.preventDefault();var f=i.children().not(".fr-buttons"),p=f.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),u=p.indexOf(this)+(o.shiftKey?-1:1);if(0<=u&&u<p.length)return l.events.disableBlur(),e(p[u]).focus(),o.stopPropagation(),!1;var h=i.find(".fr-buttons");if(h.length&&r(h,!!o.shiftKey))return o.stopPropagation(),!1;if(a(f))return o.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=d)return e.FE.KEYCODE.ESC==d?(o.preventDefault(),o.stopPropagation(),s(l),l.popups.isVisible(n)&&i.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),l.events.focus()),l.button.exec(i.find(".fr-back:visible:first")),A(i)):l.popups.isVisible(n)&&i.find(".fr-dismiss:visible").length?l.button.exec(i.find(".fr-dismiss:visible:first")):(l.popups.hide(n),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),A(i)),!1):e.FE.KEYCODE.SPACE==d&&(c.is(".fr-submit")||c.is(".fr-dismiss"))?(o.preventDefault(),o.stopPropagation(),l.events.disableBlur(),l.button.exec(c),!0):l.keys.isBrowserAction(o)?void o.stopPropagation():c.is("input[type=text], textarea")?void o.stopPropagation():e.FE.KEYCODE.SPACE==d&&(c.is(".fr-link-attr")||c.is("input[type=file]"))?void o.stopPropagation():(o.stopPropagation(),o.preventDefault(),!1);var g=null;i.find(".fr-submit:visible").length>0?g=i.find(".fr-submit:visible:first"):i.find(".fr-dismiss:visible").length&&(g=i.find(".fr-dismiss:visible:first")),g&&(o.preventDefault(),o.stopPropagation(),l.events.disableBlur(),l.button.exec(g))}},_tiMouseenter:function(){S(i.data("instance")||t)}}}function A(e){var t=e.data("popup-button");t&&setTimeout(function(){n(t),e.data("popup-button",null)},0)}function S(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function C(n){var r=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if(n.which==e.FE.KEYCODE.F10&&!r&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var i=t.popups.areVisible(t),o=!1;return i&&(o=a(i.children().not(".fr-buttons"))),o||l(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}var R=!0;return{_init:function(){t.$wp?t.events.on("keydown",C,!0):t.events.$on(t.$win,"keydown",C,!0),t.events.on("mousedown",function(e){S(t),t.shared.$f_el&&(s(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)},!0),t.events.on("blur",function(){t.shared.$f_el=null,S(t)},!0)},registerPopup:function(e){var n=t.popups.get(e),r=T(e);b(n.find(".fr-buttons")),t.events.$on(n,"mouseenter","tabIndex",r._tiMouseenter,!0),t.events.$on(n.children().not(".fr-buttons"),"keydown","[tabIndex]",r._tiKeydown,!0),t.popups.onHide(e,function(){s(n.data("instance")||t)}),t.popups.onShow(e,function(){R=!1,setTimeout(function(){R=!0},0)})},registerToolbar:b,focusToolbarElement:n,focusToolbar:r,focusContent:a,focusPopup:function(e){var n=e.children().not(".fr-buttons");n.data("mouseenter-event-set")||(t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=e.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var a=n.find(":focus:first");a.length&&!a.is("input, button, textarea")&&(i.events.disableBlur(),a.blur(),i.events.disableBlur(),i.events.focus())}),n.data("mouseenter-event-set",!0)),!a(n)&&t.shared.with_kb&&r(e.find(".fr-buttons"))},focusModal:function(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()},focusEditor:v,focusPopupButton:A,focusModalButton:function(e){var t=e.data("modal-button");t&&setTimeout(function(){n(t),e.data("modal-button",null)},0)},hasFocus:function(){return null!=t.shared.$f_el},exec:function(n,r){var i=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,a=n.which,o=!1;return a!=e.FE.KEYCODE.TAB||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_RIGHT||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.TAB||i||!n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_LEFT||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_UP||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ARROW_DOWN||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ENTER||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.ESC||i||n.shiftKey||n.altKey?a!=e.FE.KEYCODE.F10||i||n.shiftKey||!n.altKey||(o=l()):o=E(r):o=m():o=h():o=g():o=p(r):o=p(r,!0):o=f(r):o=f(r,!0),t.shared.$f_el||void 0!==o||(o=!0),!o&&t.keys.isBrowserAction(n)&&(o=!0),!!o||(n.preventDefault(),n.stopPropagation(),!1)},saveSelection:o,restoreSelection:s}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var r in t)t.hasOwnProperty(r)&&(n+=" "+r+'="'+t[r]+'"');return n+=">"}function r(e){return"</"+e+">"}function i(e,t){var n=e;for(var r in t)t.hasOwnProperty(r)&&(n+="id"==r?"#"+t[r]:"class"==r?"."+t[r]:"["+r+'="'+t[r]+'"]');return n}function a(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function o(r,i,a){if(r){if(t.node.isBlock(r))return o(r.firstChild,i,a),!1;for(var s=e(n(i,a)).insertBefore(r),l=r;l&&!e(l).is(".fr-marker")&&0===e(l).find(".fr-marker").length&&"UL"!=l.tagName&&"OL"!=l.tagName;){var d=l;l=l.nextSibling,s.append(d)}if(l)(e(l).find(".fr-marker").length||"UL"==l.tagName||"OL"==l.tagName)&&o(l.firstChild,i,a);else{for(var c=s.get(0).parentNode;c&&!c.nextSibling&&!t.node.isElement(c);)c=c.parentNode;if(c){var f=c.nextSibling;f&&(t.node.isBlock(f)?o(f.firstChild,i,a):o(f,i,a))}}s.is(":empty")&&s.remove()}}function s(s,l){var d;if(void 0===l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed())t.markers.insert(),t.$el.find(".fr-marker").replaceWith(n(s,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+r(s)),t.selection.restore();else{t.selection.save(),o(t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,s,l);var c;do{for(c=t.$el.find(i(s,l)+" > "+i(s,l)),d=0;d<c.length;d++)c[d].outerHTML=c[d].innerHTML}while(c.length);t.el.normalize();var f=t.el.querySelectorAll(".fr-marker");for(d=0;d<f.length;d++){var p=e(f[d]);!0===p.data("type")?a(p.get(0).nextSibling,i(s,l))&&p.next().prepend(p):a(p.get(0).previousSibling,i(s,l))&&p.prev().append(p)}t.selection.restore()}}function l(e,n,r,o){if(!o){var s=!1;if(!0===e.data("type"))for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),s=!0;else if(!1===e.data("type"))for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),s=!0;if(s)return!0}if(e.parents(n).length||void 0===n){var l="",d="",c=e.parent();if(c.is(t.$el)||t.node.isBlock(c.get(0)))return!1;for(;!t.node.isBlock(c.parent().get(0))&&(void 0===n||void 0!==n&&!a(c.get(0),i(n,r)));)l+=t.node.closeTagString(c.get(0)),d=t.node.openTagString(c.get(0))+d,c=c.parent();var f=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var p=c.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(c.get(0))+d+f+l+t.node.openTagString(c.get(0))+d);return c.replaceWith(t.node.openTagString(c.get(0))+p+t.node.closeTagString(c.get(0))),!0}return!1}function d(n,r,o,s){for(var l=t.node.contents(n.get(0)),c=0;c<l.length;c++){var f=l[c];if(t.node.hasClass(f,"fr-marker"))r=(r+1)%2;else if(r)if(e(f).find(".fr-marker").length>0)r=d(e(f),r,o,s);else{for(var p=e(f).find(o||"*"),u=p.length-1;u>=0;u--){var h=p[u];t.node.isBlock(h)||t.node.isVoid(h)||void 0!==o&&!a(h,i(o,s))||(h.outerHTML=h.innerHTML)}void 0===o&&f.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(f)&&!t.node.isBlock(f)||a(f,i(o,s))?e(f).replaceWith(f.innerHTML):void 0===o&&f.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(f)&&t.node.clearAttributes(f)}else e(f).find(".fr-marker").length>0&&(r=d(e(f),r,o,s))}return r}function c(n,r){void 0===r&&(r={}),r.style&&delete r.style;var i=t.selection.isCollapsed();t.selection.save();for(var a=!0;a;){a=!1;for(var o=t.$el.find(".fr-marker"),s=0;s<o.length;s++){var c=e(o[s]),f=null;if(c.attr("data-cloned")||i||(f=c.clone().removeClass("fr-marker").addClass("fr-clone"),!0===c.data("type")?c.attr("data-cloned",!0).after(f):c.attr("data-cloned",!0).before(f)),l(c,n,r,i)){a=!0;break}}}d(t.$el,0,n,r),i||(t.$el.find(".fr-marker").remove(),t.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),i&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function f(t,n){var r=e(t);r.css(n,""),""===r.attr("style")&&r.replaceWith(r.html())}function p(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function u(n,r){var i,a;if(t.selection.isCollapsed()){t.markers.insert();var s=(a=t.$el.find(".fr-marker")).parent();if(t.node.openTagString(s.get(0))=='<span style="'+n+": "+s.css(n)+';">'){if(t.node.isEmpty(s.get(0)))s.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var d={};d[n]=r,l(a,"span",d,!0),(a=t.$el.find(".fr-marker")).replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}t.html.cleanEmptyTags()}else t.node.isEmpty(s.get(0))&&s.is("span")?(a.replaceWith(e.FE.MARKERS),s.css(n,r)):a.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{if(t.selection.save(),null==r||"color"==n&&t.$el.find(".fr-marker").parents("u, a").length>0){var c=t.$el.find(".fr-marker");for(i=0;i<c.length;i++)if(!0===(a=e(c[i])).data("type"))for(;t.node.isFirstSibling(a.get(0))&&!a.parent().is(t.$el)&&!t.node.isElement(a.parent().get(0))&&!t.node.isBlock(a.parent().get(0));)a.parent().before(a);else for(;t.node.isLastSibling(a.get(0))&&!a.parent().is(t.$el)&&!t.node.isElement(a.parent().get(0))&&!t.node.isBlock(a.parent().get(0));)a.parent().after(a)}var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,h={class:"fr-unprocessed"};for(r&&(h.style=n+": "+r+";"),o(u,"span",h),t.$el.find(".fr-marker + .fr-unprocessed").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-unprocessed + .fr-marker").each(function(){e(this).prev().append(this)}),(r||"").match(/\dem$/)&&t.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");t.$el.find("span.fr-unprocessed").length>0;){var g=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(g.parent().get(0).normalize(),g.parent().is("span")&&1==g.parent().get(0).childNodes.length){g.parent().css(n,r);var m=g;g=g.parent(),m.replaceWith(m.html())}var v=g.find("span");for(i=v.length-1;i>=0;i--)f(v[i],n);var E=g.parentsUntil(t.$el,"span[style]"),b=[];for(i=E.length-1;i>=0;i--)p(E[i],n)||b.push(E[i]);if((E=E.not(b)).length){var T="",A="",S="",C="",R=g.get(0);do{R=R.parentNode,e(R).addClass("fr-split"),T+=t.node.closeTagString(R),A=t.node.openTagString(e(R).clone().addClass("fr-split").get(0))+A,E.get(0)!=R&&(S+=t.node.closeTagString(R),C=t.node.openTagString(e(R).clone().addClass("fr-split").get(0))+C)}while(E.get(0)!=R);var y=T+t.node.openTagString(e(E.get(0)).clone().css(n,r||"").get(0))+C+g.css(n,"").get(0).outerHTML+S+"</span>"+A;g.replaceWith('<span id="fr-break"></span>');var _=E.get(0).outerHTML;e(E.get(0)).replaceWith(_.replace(/<span id="fr-break"><\/span>/g,y))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||e(this).replaceWith(this.innerHTML)}),t.el.normalize();var L=t.$el.find("span[style] + span[style]");for(i=0;i<L.length;i++){var x=e(L[i]),w=e(L[i]).prev();x.get(0).previousSibling==w.get(0)&&t.node.openTagString(x.get(0))==t.node.openTagString(w.get(0))&&(x.prepend(w.html()),w.remove())}t.$el.find("span[style] span[style]").each(function(){if(e(this).attr("style").indexOf("font-size")>=0){var t=e(this).parents("span[style]");t.attr("style").indexOf("background-color")>=0&&(e(this).attr("style",e(this).attr("style")+";"+t.attr("style")),l(e(this),"span[style]",{},!1))}}),t.el.normalize(),t.selection.restore()}}function h(e,n){void 0===n&&(n={}),n.style&&delete n.style;var r=t.selection.ranges(0),o=r.startContainer;if(o.nodeType==Node.ELEMENT_NODE&&o.childNodes.length>0&&o.childNodes[r.startOffset]&&(o=o.childNodes[r.startOffset]),!r.collapsed&&o.nodeType==Node.TEXT_NODE&&r.startOffset==(o.textContent||"").length){for(;!t.node.isBlock(o.parentNode)&&!o.nextSibling;)o=o.parentNode;o.nextSibling&&(o=o.nextSibling)}for(var s=o;s&&s.nodeType==Node.ELEMENT_NODE&&!a(s,i(e,n));)s=s.firstChild;if(s&&s.nodeType==Node.ELEMENT_NODE&&a(s,i(e,n)))return!0;var l=o;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!a(l,i(e,n));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!a(l,i(e,n)))}return{is:h,toggle:function(e,t){h(e,t)?c(e,t):s(e,t)},apply:s,remove:c,applyStyle:u,removeStyle:function(e){u(e,null)}}},e.extend(e.FE.DEFAULTS,{indentMargin:20}),e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(e){return t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">"),e}function r(n,r){if(!1!==t.events.trigger("commands.before",e.merge([n],r||[]))){var i=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||o[n],a=!0,s=!1;e.FE.COMMANDS[n]&&(void 0!==e.FE.COMMANDS[n].focus&&(a=e.FE.COMMANDS[n].focus),void 0!==e.FE.COMMANDS[n].accessibilityFocus&&(s=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&a&&!t.popups.areVisible()||!t.core.hasFocus()&&s&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),i&&i.apply(t,e.merge([n],r||[])),t.events.trigger("commands.after",e.merge([n],r||[])),e.FE.COMMANDS[n]&&!1!==e.FE.COMMANDS[n].undo&&t.undo.saveStep()}}function i(e,n){t.format.toggle(n)}function a(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)if("LI"!=r[i].tagName&&"LI"!=r[i].parentNode.tagName){var a=e(r[i]),o="rtl"==t.opts.direction||"rtl"==a.css("direction")?"margin-right":"margin-left",s=t.helpers.getPX(a.css(o));a.css(o,Math.max(s+n*t.opts.indentMargin,0)||""),a.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}var o={bold:function(){i("bold","strong")},subscript:function(){t.format.is("sup")&&t.format.remove("sup"),i("subscript","sub")},superscript:function(){t.format.is("sub")&&t.format.remove("sub"),i("superscript","sup")},italic:function(){i("italic","em")},strikeThrough:function(){i("strikeThrough","s")},underline:function(){i("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){a(1)},outdent:function(){a(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var r="";t.core.isEmpty()&&(r="<br>",r=n(r)),t.html.insert('<hr id="fr-just">'+r);var i=t.$el.find("hr#fr-just");i.removeAttr("id");var a;i.prev().is("hr")?a=t.selection.setAfter(i.get(0),!1):i.next().is("hr")?a=t.selection.setBefore(i.get(0),!1):t.selection.setAfter(i.get(0),!1)||t.selection.setBefore(i.get(0),!1),a||void 0===a||(r=e.FE.MARKERS+"<br>",r=n(r),i.after(r)),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},s={};for(var l in o)o.hasOwnProperty(l)&&(s[l]=function(e){return function(){r(e)}}(l));return e.extend(s,{exec:r,_init:function(){t.events.on("keydown",function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1}),t.events.on("keyup",function(n){var r=t.selection.element();if(r&&"HR"==r.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(r.previousSibling)return t.node.isBlock(r.previousSibling)?t.selection.setAtEnd(r.previousSibling):e(r).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&r.nextSibling)return t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS),t.selection.restore(),!1}),t.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),t.events.on("mouseup",function(){var n=t.selection.element();n==t.selection.endElement()&&n&&"HR"==n.tagName&&(n.nextSibling&&(t.node.isBlock(n.nextSibling)?t.selection.setAtStart(n.nextSibling):e(n).after(e.FE.MARKERS)),t.selection.restore())})}})},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){for(var t=e.toString(),n=0,r=0;r<t.length;r++)n+=parseInt(t.charAt(r),10);return n>10?n%9+1:n}function r(e,t,n){for(var r=Math.abs(n);r-- >0;)e-=t;return n<0&&(e+=123),e}function i(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function a(){return i(s)||i(l)}function o(){if(!e.$box)return!1;e.$box.append(f(t(f("noLD2laB-7NB1C1ebcvH-9SB3a1C6QC2D4A-9d1E2B2B4xgAE4B2G2I1C3A3B2qMF1DE1fkxfcC-11C-9g1G2E4XC9a1E5A3G-10mvrioCC3AA1KA1qJ-7NB2MA6sxeqVA6TD6e2D4B-9rYA2a1A4bCD3vwC-7EC10D3E2lNC1KD1QB9SB6UE5TE4YF3YA5c1A3d1B3kGE2gFA5A2D2ch1KI1IB1thyH5wvVC11UB6c1F4wwwXA7gmnfB2jgB1A7nd1e1IC2NG4H1A9bjvnbC-8PG3mlazD4dH-9HI2qAA2jGC2IA1dajajFD5SG4J4c1qttyB-9wg1B2b2A6b1C3EG3B2I2rCD4E1B1LG1oaMA3RE7abC-8C-7aVA4C5B5F-11e1D3I3a5A8hmmnogH2IB5A2nhkgiA4TH4VC7yxdblH-8YC6D6C4xC3yqJJ2C-21spB-11fMF1KF1IC2USC4PG4TE3RD6ZF5XE3UE3uefaFE4D2G2AE1HA2JD1zzzQE3SD9vgqF4ua3B13XA4C5gd1E3E2A14ridsldcCA7MC5ghwE-11ZH5f1D3a1D8bwxmkzi1A7IB3KvpB-8rwMD3IE1GG-10bgqwxewvWE4H3VbD-16qC-11qc1E2TwEA6A3aCE4A1A4lOD3JC1iVA3RA13c2D8olqf1G3A32B17==")))),s=e.$box.find("> div:last"),l=s.find("> a"),"rtl"==e.opts.direction&&s.css("left","auto").css("right",0)}var s,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=function(){for(var e=0,t=document.domain,n=t.split("."),r="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(r+"="+r);)t=n.slice(-1-++e).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),f=t(function(e){if(!e)return e;for(var i="",a=t("charCodeAt"),o=t("fromCharCode"),s=d.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=n(++s),f=e[a](l),p="";/[0-9-]/.test(e[l+1]);)p+=e[++l];f=r(f,c,p=parseInt(p,10)||0),f^=s-1&31,i+=String[o](f)}return i});return{_init:function(){var n=e.o_win.FEK||localStorage&&localStorage.FEK||e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var r=0;r<n.length;r++){var i=f(n[r])||"";if(!(i!==f(t(f("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&i.indexOf(c,i.length-c.length)<0&&[f("9qqG-7amjlwq=="),f("KA3B3C2A6D1D5H5H1A3=="),f("QzbzvxyB2yA-9m=="),f("ji1kacwmgG5bc=="),f("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(c)<0)){e.ul=!1;break}}!0===e.ul&&o(),e.events.on("contentChanged",function(){!0===e.ul&&a()&&o()}),e.events.on("destroy",function(){s&&s.length&&s.remove()},!0)}}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(e,n){try{t.win.localStorage.setItem("fr-copied-html",e),t.win.localStorage.setItem("fr-copied-text",n)}catch(e){}}function r(r){var i=t.html.getSelected();n(i,e("<div>").html(i).text()),"cut"==r.type&&(t.undo.saveStep(),setTimeout(function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()},0))}function i(e){if(E)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===t.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(u=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",r=e.clipboardData.types;if(t.helpers.isArray(r))for(var i=0;i<r.length;i++)n+=r[i]+";";else n=r;if(h="",g=e.clipboardData.getData("text/rtf"),/text\/html/.test(n)?h=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?h=g:/text\/plain/.test(n)&&!this.browser.mozilla&&(h=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==h)return d(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;h=null}return o(),!1}function a(n){if(n.originalEvent&&(n=n.originalEvent),n&&n.dataTransfer&&n.dataTransfer.getData){var r="",i=n.dataTransfer.types;if(t.helpers.isArray(i))for(var a=0;a<i.length;a++)r+=i[a]+";";else r=i;if(h="",g=n.dataTransfer.getData("text/rtf"),/text\/html/.test(r)?h=n.dataTransfer.getData("text/html"):/text\/rtf/.test(r)&&t.browser.safari?h=g:/text\/plain/.test(r)&&!this.browser.mozilla&&(h=t.html.escapeEntities(n.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==h){if(!1!==t.markers.insertAtPoint(n)){var o=t.el.querySelector(".fr-marker");return e(o).replaceWith(e.FE.MARKERS),d(),n.preventDefault&&(n.stopPropagation(),n.preventDefault()),!1}}else h=null}}function o(){t.selection.save(),t.events.disableBlur(),h=null,m?m.html(""):(m=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.browser.safari?(m.css("top",t.$sc.scrollTop()),t.$el.after(m)):t.$box.after(m),t.events.on("destroy",function(){m.remove()})),m.focus(),t.win.setTimeout(d,1)}function s(e){var n;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var r=["style","script","applet","embed","noframes","noscript"];for(n=0;n<r.length;n++){var i=new RegExp("<"+r[n]+".*?"+r[n]+"(.*?)>","gi");e=e.replace(i,"")}e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var a;do{a=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")}while(e!=a);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=(e=(e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var o=t.o_doc.createElement("div");o.innerHTML=e;var s=o.querySelectorAll("li[data-indent]");for(n=0;n<s.length;n++){var l=s[n],d=l.previousElementSibling;if(d&&"LI"==d.tagName){var c=d.querySelector(":scope > ul, :scope > ol");c||(c=document.createElement("ul"),d.appendChild(c)),c.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(o),e=o.innerHTML}function l(e){var n,r=null,i=t.doc.createElement("div");i.innerHTML=e;var a=i.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(n=0;n<a.length;n++)r=a[n],r.outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+r.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">";for(n=(a=i.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;n>=0;n--)r=a[n],r.outerHTML=r.innerHTML;var o=function(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&n[r].nodeType!=Node.ELEMENT_NODE?n[r].parentNode.removeChild(n[r]):o(n[r])};return o(i),i.innerHTML}function d(){t.keys.forceUndo(),v=t.snapshot.get(),null===h&&(h=m.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var e=h.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),n=t.events.chainTrigger("paste.beforeCleanup",h);n&&"string"==typeof n&&(h=n),(!e||e&&!1!==t.events.trigger("paste.wordPaste",[h]))&&c(h,e)}function c(n,r,i){var a,o=null,d=null;n.toLowerCase().indexOf("<body")>=0&&(n=n.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1"),n=n.replace(/([^>])\n([^<])/g,"$1 $2"));var c=!1;if(n.indexOf('id="docs-internal-guid')>=0&&(n=n.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),c=!0),!r){var u=t.opts.htmlAllowedStyleProps;t.opts.htmlAllowedStyleProps=t.opts.pasteAllowedStyleProps,t.opts.htmlAllowComments=!1,n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowedStyleProps=u,t.opts.htmlAllowComments=!0,n=(n=p(n)).replace(/\r|\n|\t/g,"");var h=t.doc.createElement("div");h.innerHTML=n;var g=t.win.localStorage.getItem("fr-copied-html"),m=t.win.localStorage.getItem("fr-copied-text");m&&h.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==m.replace(/(\u00A0)/gi," ").replace(/(\r|\n)+([ ]+[\r\n]+)*/gi," ")&&(n=g),n=n.replace(/^ */g,"").replace(/ *$/g,"")}!r||t.wordPaste&&i||(0===(n=n.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(n="<table>"+n+"</table>"),n=s(n),n=p(n)),t.opts.pastePlain&&(n=l(n));var E=t.events.chainTrigger("paste.afterCleanup",n);if("string"==typeof E&&(n=E),""!==n){var b=t.o_doc.createElement("div");b.innerHTML=n,t.spaces.normalize(b);var T=b.getElementsByTagName("span");for(a=T.length-1;a>=0;a--){var A=T[a];0===A.attributes.length&&(A.outerHTML=A.innerHTML)}var S=t.selection.element(),C=!1;if(S&&e(S).parentsUntil(t.el,"ul, ol").length&&(C=!0),C){var R=b.children;1==R.length&&["OL","UL"].indexOf(R[0].tagName)>=0&&(R[0].outerHTML=R[0].innerHTML)}if(!c){var y=b.getElementsByTagName("br");for(a=y.length-1;a>=0;a--){var _=y[a];t.node.isBlock(_.previousSibling)&&_.parentNode.removeChild(_)}}if(t.opts.enter==e.FE.ENTER_BR)for(o=b.querySelectorAll("p, div"),a=o.length-1;a>=0;a--)0===(d=o[a]).attributes.length&&(d.outerHTML=d.innerHTML+(d.nextSibling&&!t.node.isEmpty(d)?"<br>":""));else if(t.opts.enter==e.FE.ENTER_DIV)for(o=b.getElementsByTagName("p"),a=o.length-1;a>=0;a--)d=o[a],d.outerHTML="<div>"+d.innerHTML+"</div>";n=b.innerHTML,t.html.insert(n,!0)}f(),t.undo.saveStep(v),t.undo.saveStep()}function f(){t.events.trigger("paste.after")}function p(e){var n,r=t.o_doc.createElement("div");r.innerHTML=e;for(var i=r.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");i.length;){for(n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);i=r.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var a=r.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");a.length;){var o=a[a.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())o.querySelector(t.html.blockTagsQuery())?o.outerHTML=o.innerHTML:o.outerHTML="<"+t.html.defaultTag()+">"+o.innerHTML+"</"+t.html.defaultTag()+">";else{var s=o.querySelectorAll("*");!s.length||"BR"!==s[s.length-1].tagName&&0===o.innerText.length?o.outerHTML=o.innerHTML+"<br>":o.outerHTML=o.innerHTML}a=r.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(a=r.querySelectorAll("div:not([style])");a.length;){for(n=0;n<a.length;n++){var l=a[n],d=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=d}a=r.querySelectorAll("div:not([style])")}return r.innerHTML}var u,h,g,m,v,E=!1;return{_init:function(){t.events.on("copy",r),t.events.on("cut",r),t.events.on("paste",i),t.events.on("drop",a),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){E=!1},50),E=!0)},!0),t.events.on("beforepaste",i))},removeEmptyTags:p,getRtfClipboard:function(){return g},saveCopiedText:n,clean:c}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,r,i,a,o){e.FE.SHORTCUTS_MAP[(a?"^":"")+(o?"@":"")+t]={cmd:n,val:r,letter:i,shift:a,option:o},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.core.hasFocus())return!0;var r=n.which,a=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey;if("keyup"==n.type&&i&&r!=e.FE.KEYCODE.META)return i=!1,!1;"keydown"==n.type&&(i=!1);var o=(n.shiftKey?"^":"")+(n.altKey?"@":"")+r;if(a&&e.FE.SHORTCUTS_MAP[o]){var s=e.FE.SHORTCUTS_MAP[o].cmd;if(s&&t.opts.shortcutsEnabled.indexOf(s)>=0){var l,d=e.FE.SHORTCUTS_MAP[o].val;if(s&&!d?l=t.$tb.find('.fr-command[data-cmd="'+s+'"]'):s&&d&&(l=t.$tb.find('.fr-command[data-cmd="'+s+'"][data-param1="'+d+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),i=!0),!1;if(s&&t.commands[s])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[s](),i=!0),!1}}}var r=null,i=!1;return{_init:function(){t.events.on("keydown",n,!0),t.events.on("keyup",n,!0)},get:function(n){if(!t.opts.shortcutsHint)return null;if(!r){r={};for(var i in e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(i)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[i].cmd)>=0&&(r[e.FE.SHORTCUTS_MAP[i].cmd+"."+(e.FE.SHORTCUTS_MAP[i].val||"")]={shift:e.FE.SHORTCUTS_MAP[i].shift,option:e.FE.SHORTCUTS_MAP[i].option,letter:e.FE.SHORTCUTS_MAP[i].letter})}var a=r[n];return a?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(a.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(a.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+a.letter:null}}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,r=null,i=0;i<t.length;i++){if(r){var a=t[i].nodeType===Node.TEXT_NODE&&""===t[i].textContent,o=r.nodeType===Node.TEXT_NODE&&t[i].nodeType===Node.TEXT_NODE;a||o||n++}if(t[i]==e)return n;r=t[i]}}function n(n){var r=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)r.push(t(n)),n=n.parentNode;return r.reverse()}function r(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function i(e){return{scLoc:n(e.startContainer),scOffset:r(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:r(e.endContainer,e.endOffset)}}function a(t){for(var n=e.el,r=0;r<t.length;r++)n=n.childNodes[t[r]];return n}function o(t,n){try{var r=a(n.scLoc),i=n.scOffset,o=a(n.ecLoc),s=n.ecOffset,l=e.doc.createRange();l.setStart(r,i),l.setEnd(o,s),t.addRange(l)}catch(e){}}return{get:function(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),r=0;r<n.length;r++)t.ranges.push(i(n[r]));return e.events.trigger("snapshot.after"),t},restore:function(t){e.$el.html()!=t.html&&(e.opts.htmlExecuteScripts?e.$el.html(t.html):e.el.innerHTML=t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var r=0;r<t.ranges.length;r++)o(n,t.ranges[r])},equal:function(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which;e.keys.ctrlKey(t)&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function r(){e.undo_index=0,e.undo_stack=[]}function i(){e.undo_stack=[]}var a=null;return{_init:function(){r(),e.events.on("initialized",function(){a=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),e.events.on("blur",function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()}),e.events.on("keydown",t),e.events.on("destroy",i)},run:function(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),a=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}},redo:function(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),a=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}},canDo:function(){return!(0===e.undo_stack.length||e.undo_index<=1)},canRedo:function(){return e.undo_index!=e.undo_stack.length},dropRedo:n,reset:r,saveStep:function(t){if(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))return!1;void 0===t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(n(),e.undo_stack.push(t),e.undo_index++,t.html!=a&&(e.events.trigger("contentChanged"),a=t.html))):(n(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++))}}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(){return{create:function(t){var n=null,r=e.FE.ICONS[t];if(void 0!==r){var i=r.template||e.FE.ICON_DEFAULT_TEMPLATE;i&&(i=e.FE.ICON_TEMPLATES[i])&&(n=i.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?r[n]||t:r[n]}))}return n||t},getTemplate:function(t){var n=e.FE.ICONS[t],r=e.FE.ICON_DEFAULT_TEMPLATE;return void 0!==n?r=n.template||e.FE.ICON_DEFAULT_TEMPLATE:r}}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function r(n,r){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||i(),n.removeAttr("title"),t.$tooltip.text(t.language.translate(n.data("title"))),t.$tooltip.addClass("fr-visible");var a=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;a<0&&(a=0),a+t.$tooltip.outerWidth()>e(t.o_win).width()&&(a=e(t.o_win).width()-t.$tooltip.outerWidth()),void 0===r&&(r=t.opts.toolbarBottom);var o=r?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",a),t.$tooltip.css("top",Math.ceil(o)),"static"!=e(t.o_doc).find("body:first").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body:first").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body:first").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function i(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body:first").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null},!0))}return{hide:n,to:r,bind:function(i,a,o){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(i,"mouseenter",a,function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||r(e(n.currentTarget),o)},!0),t.events.$on(i,"mouseleave "+t._mousedown+" "+t._mouseup,a,function(){n()},!0))}}},e.FE.MODULES.button=function(t){function n(t,n,r){for(var i=e(),a=0;a<t.length;a++){var o=e(t[a]);if(o.is(n)&&(i=i.add(o)),r&&o.is(".fr-dropdown")){var s=o.next().find(n);i=i.add(s)}}return i}function r(r,i){var a,o=e();if(!r)return o;o=(o=o.add(n(v,r,i))).add(n(E,r,i));for(a in t.shared.popups)if(t.shared.popups.hasOwnProperty(a)){var s=t.shared.popups[a].children().find(r);o=o.add(s)}for(a in t.shared.modals)if(t.shared.modals.hasOwnProperty(a)){var l=t.shared.modals[a].$modal.find(r);o=o.add(l)}return o}function i(n){var i=n.next(),a=t.node.hasClass(n.get(0),"fr-active"),o=r(".fr-dropdown.fr-active").not(n),s=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(s.helpers.isIOS()&&!s.el.querySelector(".fr-marker")&&(s.selection.save(),s.selection.clear(),s.selection.restore()),!a){var l=n.data("cmd");i.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[l]&&e.FE.COMMANDS[l].refreshOnShow&&e.FE.COMMANDS[l].refreshOnShow.apply(s,[n,i]),i.css("left",n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?i.width()-n.outerWidth():0)),i.addClass("test-height");var d=i.outerHeight();i.removeClass("test-height"),i.css("top","").css("bottom",""),!t.opts.toolbarBottom&&i.offset().top+n.outerHeight()+d<e(t.o_doc).height()?i.css("top",n.position().top+n.outerHeight()):i.css("bottom",t.$tb.height()-n.position().top)}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(i.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(i.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout(function(){n.removeClass("fr-blink")},300),i.css("margin-left",""),i.offset().left+i.outerWidth()>t.$sc.offset().left+t.$sc.width()&&i.css("margin-left",-(i.offset().left+i.outerWidth()-t.$sc.offset().left-t.$sc.width())),o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==n.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var c=i.find("a.fr-command.fr-active:first");t.helpers.isMobile()||(c.length?t.accessibility.focusToolbarElement(c):t.accessibility.focusToolbarElement(n))}function a(e){e.addClass("fr-blink"),setTimeout(function(){e.removeClass("fr-blink")},500);for(var t=e.data("cmd"),n=[];void 0!==e.data("param"+(n.length+1));)n.push(e.data("param"+(n.length+1)));var i=r(".fr-dropdown.fr-active");i.length&&(i.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),i.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(t,n)}function o(e){a(e)}function s(n){var r=n.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==n.parents(".fr-popup").length||n.data("popup")||r.popups.hideAll(),r.popups.areVisible()&&!r.popups.areVisible(r)){for(var a=0;a<e.FE.INSTANCES.length;a++)e.FE.INSTANCES[a]!=r&&e.FE.INSTANCES[a].popups&&e.FE.INSTANCES[a].popups.areVisible()&&e.FE.INSTANCES[a].$el.find(".fr-marker").remove();r.popups.hideAll()}t.node.hasClass(n.get(0),"fr-dropdown")?i(n):(o(n),e.FE.COMMANDS[n.data("cmd")]&&!1!==e.FE.COMMANDS[n.data("cmd")].refreshAfterCallback&&r.button.bulkRefresh())}function l(t){s(e(t.currentTarget))}function d(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function c(e){e.preventDefault(),e.stopPropagation()}function f(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function p(e,n){var r="";if(n.html)"function"==typeof n.html?r+=n.html.call(t):r+=n.html;else{var i=n.options;"function"==typeof i&&(i=i()),r+='<ul class="fr-dropdown-list" role="presentation">';for(var a in i)if(i.hasOwnProperty(a)){var o=t.shortcuts.get(e+"."+a);o=o?'<span class="fr-shortcut">'+o+"</span>":"",r+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+a+'" title="'+i[a]+'">'+t.language.translate(i[a])+"</a></li>"}r+="</ul>"}return r}function u(e,n,r){if(t.helpers.isMobile()&&!1===n.showOnMobile)return"";var i=n.displaySelection;"function"==typeof i&&(i=i(t));var a;if(i){var o="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;a='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+t.language.translate(o||n.title)+"</span>"}else a=t.icon.create(n.icon||e),a+='<span class="fr-sr-only">'+(t.language.translate(n.title)||"")+"</span>";var s=n.popup?' data-popup="true"':"",l=n.modal?' data-modal="true"':"",d=t.shortcuts.get(e+".");d=d?" ("+d+")":"";var c=e+"-"+t.id,f="dropdown-menu-"+c,u='<button id="'+c+'"type="button" tabIndex="-1" role="button"'+(n.toggle?' aria-pressed="false"':"")+("dropdown"==n.type?' aria-controls="'+f+'" aria-expanded="false" aria-haspopup="true"':"")+(n.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(n.title)||"")+d+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+" fr-btn-"+t.icon.getTemplate(n.icon)+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(r?"":" fr-hidden")+'" data-cmd="'+e+'"'+s+l+">"+a+"</button>";if("dropdown"==n.type){var h='<div id="'+f+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+c+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';h+=p(e,n),u+=h+="</div></div></div>"}return u}function h(n){var r=t.$tb?t.$tb.data("instance")||t:t;if(!1===t.events.trigger("buttons.refresh"))return!0;setTimeout(function(){for(var i=r.selection.inEditor()&&r.core.hasFocus(),a=0;a<n.length;a++){var o=e(n[a]),s=o.data("cmd");0===o.parents(".fr-popup").length?i||e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].forcedRefresh?r.button.refresh(o):t.node.hasClass(o.get(0),"fr-dropdown")||(o.removeClass("fr-active"),o.attr("aria-pressed")&&o.attr("aria-pressed",!1)):o.parents(".fr-popup").is(":visible")&&r.button.refresh(o)}},0)}function g(){h(v),h(E)}function m(){v=[],E=[]}var v=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),v=t.shared.buttons);var E=[];return t.shared.popup_buttons||(t.shared.popup_buttons=[]),E=t.shared.popup_buttons,{_init:function(){t.opts.toolbarInline?t.events.on("toolbar.show",g):(t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("blur",g),t.events.on("focus",g),t.events.on("contentChanged",g),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",g)),t.events.on("shared.destroy",m)},buildList:function(n,r){for(var i="",a=0;a<n.length;a++){var o=n[a],s=e.FE.COMMANDS[o];s&&void 0!==s.plugin&&t.opts.pluginsEnabled.indexOf(s.plugin)<0||(s?i+=u(o,s,void 0===r||r.indexOf(o)>=0):"|"==o?i+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==o&&(i+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>'))}return i},bindCommands:function(n,r){t.events.bindClick(n,".fr-command:not(.fr-disabled)",l),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",c,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",f,!0);var i=n.get(0).ownerDocument,a="defaultView"in i?i.defaultView:i.parentWindow,o=function(r){(!r||r.type==t._mouseup&&r.target!=e("html").get(0)||"keydown"==r.type&&(t.keys.isCharacter(r.which)&&!t.keys.ctrlKey(r)||r.which==e.FE.KEYCODE.ESC))&&d(n)};t.events.$on(e(a),t._mouseup+" resize keydown",o,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,o,!0),t.node.hasClass(n.get(0),"fr-popup")?e.merge(E,n.find(".fr-btn").toArray()):e.merge(v,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",r)},refresh:function(n){var r,i=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,a=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?r=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[a]&&e.FE.COMMANDS[a].refresh?e.FE.COMMANDS[a].refresh.apply(i,[n,r]):t.refresh[a]&&i.refresh[a](n,r)},bulkRefresh:g,exec:a,click:s,hideActiveDropdowns:d,getButtons:r}},e.FE.MODULES.modals=function(t){function n(n,r){var i='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return i+='<div class="fr-modal-head">'+n+'<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',i+='<div tabIndex="-1" class="fr-modal-body">'+r+"</div>",i+="</div></div>",e(i)}function r(){for(var e in s){var t=s[e];t&&t.$modal&&t.$modal.removeData().remove()}o&&o.removeData().remove(),s={}}function i(n,r){if(s[n]){var i=s[n].$modal,a=i.data("instance")||t;a.events.enableBlur(),i.hide(),o.hide(),e(a.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),i.removeClass("fr-active"),r||(t.accessibility.restoreSelection(a),t.events.trigger("modals.hide"))}}function a(e){var n;if("string"==typeof e){if(!s[e])return;n=s[e].$modal}else n=e;return n&&t.node.hasClass(n,"fr-active")&&t.core.sameInstance(n)||!1}t.shared.modals||(t.shared.modals={});var o,s=t.shared.modals;return{_init:function(){t.events.on("shared.destroy",r,!0)},get:function(e){return s[e]},create:function(r,a,l){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body:first")),o=t.shared.$overlay,t.opts.theme&&o.addClass(t.opts.theme+"-theme"),!s[r]){var d=n(a,l);s[r]={$modal:d,$head:d.find(".fr-modal-head"),$body:d.find(".fr-modal-body")},t.helpers.isMobile()||d.addClass("fr-desktop"),d.appendTo("body:first"),t.events.bindClick(d,"i.fr-modal-close",function(){i(r)}),s[r].$body.css("margin-top",s[r].$head.outerHeight()),t.events.$on(d,"keydown",function(n){var a=n.which;return a==e.FE.KEYCODE.ESC?(i(r),t.accessibility.focusModalButton(d),!1):!(!e(n.currentTarget).is("input[type=text], textarea")&&a!=e.FE.KEYCODE.ARROW_UP&&a!=e.FE.KEYCODE.ARROW_DOWN&&!t.keys.isBrowserAction(n)&&(n.preventDefault(),n.stopPropagation(),1))},!0),i(r,!0)}return s[r]},show:function(n){if(s[n]){var r=s[n].$modal;r.data("instance",t),r.show(),o.show(),e(t.o_doc).find("body:first").addClass("prevent-scroll"),t.helpers.isMobile()&&e(t.o_doc).find("body:first").addClass("fr-mobile"),r.addClass("fr-active"),t.accessibility.focusModal(r)}},hide:i,resize:function(n){if(s[n]){var r=s[n],i=r.$modal,a=r.$body,o=e(t.o_win).height(),l=i.find(".fr-modal-wrapper"),d=o-l.outerHeight(!0)+(l.height()-(a.outerHeight(!0)-a.height())),c="auto";a.get(0).scrollHeight>d&&(c=d),a.height(c)}},isVisible:a,areVisible:function(e){for(var t in s)if(s.hasOwnProperty(t)&&a(t)&&(void 0===e||s[t].$modal.data("instance")==e))return s[t].$modal;return!1}}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(e,n){n.is(":visible")||(n=t.$sc),n.is(g[e].data("container"))||(g[e].data("container",n),n.append(g[e]))}function r(e){return g[e]&&t.node.hasClass(g[e],"fr-active")&&t.core.sameInstance(g[e])||!1}function i(e){for(var t in g)if(g.hasOwnProperty(t)&&r(t)&&(void 0===e||g[t].data("instance")==e))return g[t];return!1}function a(e){var n=null;(n="string"!=typeof e?e:g[e])&&t.node.hasClass(n,"fr-active")&&(n.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),n.find("input, textarea, button").filter(":focus").blur(),n.find("input, textarea").attr("disabled","disabled"))}function o(e){void 0===e&&(e=[]);for(var t in g)g.hasOwnProperty(t)&&e.indexOf(t)<0&&a(t)}function s(){t.shared.exit_flag=!0}function l(){t.shared.exit_flag=!1}function d(){return t.shared.exit_flag}function c(n,r){var i=e.FE.POPUP_TEMPLATES[n];"function"==typeof i&&(i=i.apply(t));for(var a in r)r.hasOwnProperty(a)&&(i=i.replace("[_"+a.toUpperCase()+"_]",r[a]));return i}function f(n,r){var i=c(n,r),a=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+i+"</div>");t.opts.theme&&a.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&a.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),a.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var o=e("body:first");return o.append(a),a.data("container",o),g[n]=a,t.button.bindCommands(a,!1),a}function p(n){var i=g[n];return{_windowResize:function(){var e=i.data("instance")||t;!e.helpers.isMobile()&&i.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var r=i.data("instance")||t,a=e(n.currentTarget);if(a.is("input:file")&&a.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout(function(){r.events.enableBlur()},0),r.helpers.isMobile()){var o=e(r.o_win).scrollTop();setTimeout(function(){e(r.o_win).scrollTop(o)},0)}},_inputBlur:function(n){var r=i.data("instance")||t,a=e(n.currentTarget);a.is("input:file")&&a.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(r.events.blurActive()&&r.events.trigger("blur"),r.events.enableBlur())},_editorKeydown:function(a){var o=i.data("instance")||t;o.keys.ctrlKey(a)||a.which==e.FE.KEYCODE.ALT||a.which==e.FE.KEYCODE.ESC||(r(n)&&i.find(".fr-back:visible").length?o.button.exec(i.find(".fr-back:visible:first")):a.which!=e.FE.KEYCODE.ALT&&o.popups.hide(n))},_preventFocus:function(n){var r=i.data("instance")||t,a=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(a).is(":focus")||r.events.disableBlur(),"mouseup"!=n.type||e(a).hasClass("fr-command")||e(a).parents(".fr-command").length>0||t.button.hideActiveDropdowns(i),(t.browser.safari||t.browser.mozilla)&&"mousedown"==n.type&&e(a).is("input[type=file]")&&r.events.disableBlur();var o="input, textarea, button, select, label, .fr-command";if(a&&!e(a).is(o)&&0===e(a).parents(o).length)return n.stopPropagation(),!1;a&&e(a).is(o)&&n.stopPropagation(),l()},_editorMouseup:function(){i.is(":visible")&&d()&&i.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(i))return!0;var r=i.data("instance")||t;i.is(":visible")&&d()&&(e.stopPropagation(),r.markers.remove(),r.popups.hide(n),l())},_windowKeydown:function(r){if(!t.core.sameInstance(i))return!0;var a=i.data("instance")||t,o=r.which;if(e.FE.KEYCODE.ESC==o){if(a.popups.isVisible(n)&&a.opts.toolbarInline)return r.stopPropagation(),a.popups.isVisible(n)&&(i.find(".fr-back:visible").length?(a.button.exec(i.find(".fr-back:visible:first")),a.accessibility.focusPopupButton(i)):i.find(".fr-dismiss:visible").length?a.button.exec(i.find(".fr-dismiss:visible:first")):(a.popups.hide(n),a.toolbar.showInline(null,!0),a.accessibility.FocusPopupButton(i))),!1;if(a.popups.isVisible(n))return i.find(".fr-back:visible").length?(a.button.exec(i.find(".fr-back:visible:first")),a.accessibility.focusPopupButton(i)):i.find(".fr-dismiss:visible").length?a.button.exec(i.find(".fr-dismiss:visible:first")):(a.popups.hide(n),a.accessibility.focusPopupButton(i)),!1}},_doPlaceholder:function(){0===e(this).next().length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!==e(this).val())},_repositionPopup:function(){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&r(n)&&i.parent().get(0)==t.$sc.get(0)){var e=i.offset().top-t.$wp.offset().top,a=t.$wp.outerHeight();t.node.hasClass(i.get(0),"fr-above")&&(e+=i.outerHeight()),e>a||e<0?i.addClass("fr-hidden"):i.removeClass("fr-hidden")}}}}function u(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(){i()&&t.markers.remove(),o()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),g[n].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(g[n])&&g[n].removeClass("fr-active").appendTo("body:first")},!0)}function h(){for(var e in g)if(g.hasOwnProperty(e)){var t=g[e];t&&(t.html("").removeData().remove(),g[e]=null)}g=[]}t.shared.popups||(t.shared.popups={});var g=t.shared.popups;return t.shared.exit_flag=!1,{_init:function(){t.events.on("shared.destroy",h,!0),t.events.on("window.mousedown",s),t.events.on("window.touchmove",l),t.events.on("mousedown",function(e){i()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),s(),t.events.disableBlur())})},create:function(n,r){var i=f(n,r),a=p(n);return u(a,n),t.events.$on(i,"mousedown mouseup touchstart touchend touch","*",a._preventFocus,!0),t.events.$on(i,"focus","input, textarea, button, select",a._inputFocus,!0),t.events.$on(i,"blur","input, textarea, button, select",a._inputBlur,!0),t.accessibility.registerPopup(n),t.events.$on(i,"keydown keyup change input","input, textarea",a._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(i,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",a._windowResize,!0),i},get:function(e){var n=g[e];return n&&!n.data("inst"+t.id)&&u(p(e),e),n},show:function(e,a,s,d){if(i()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur()),o([e]),!g[e])return!1;var c=t.button.getButtons(".fr-dropdown.fr-active");c.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),c.next().attr("aria-hidden",!0),g[e].data("instance",t),t.$tb&&t.$tb.data("instance",t);var f=g[e].outerWidth(),u=r(e);g[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var h=g[e].data("container");t.opts.toolbarInline&&h&&t.$tb&&h.get(0)==t.$tb.get(0)&&(n(e,t.$sc),s=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),a=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&s&&(s+=t.$tb.outerHeight()),d=0),h=g[e].data("container"),!t.opts.iframe||d||u||(a&&(a-=t.$iframe.offset().left),s&&(s-=t.$iframe.offset().top)),h.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):g[e].css("zIndex",(t.opts.zIndex||1)+4),a&&(a-=f/2),t.opts.toolbarBottom&&h&&t.$tb&&h.get(0)==t.$tb.get(0)&&(g[e].addClass("fr-above"),s&&(s-=g[e].outerHeight())),g[e].removeClass("fr-active"),t.position.at(a,s,g[e],d||0),g[e].addClass("fr-active"),u||t.accessibility.focusPopup(g[e]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+e),p(e)._repositionPopup(),l()},hide:a,onHide:function(e,n){t.events.on("popups.hide."+e,n)},hideAll:o,setContainer:n,refresh:function(n){g[n].data("instance",t),t.events.trigger("popups.refresh."+n);for(var r=g[n].find(".fr-command"),i=0;i<r.length;i++){var a=e(r[i]);0===a.parents(".fr-dropdown-menu").length&&t.button.refresh(a)}},onRefresh:function(e,n){t.events.on("popups.refresh."+e,n)},onShow:function(e,n){t.events.on("popups.show."+e,n)},isVisible:r,areVisible:i}},e.FE.MODULES.position=function(t){function n(){var e=t.selection.ranges(0).getBoundingClientRect();if(0===e.top&&0===e.left&&0===e.width||0===e.height){var n=!1;0===t.$el.find(".fr-marker").length&&(t.selection.save(),n=!0);var r=t.$el.find(".fr-marker:first");r.css("display","inline"),r.css("line-height","");var i=r.offset(),a=r.outerHeight();r.css("display","none"),r.css("line-height",0),(e={}).left=i.left,e.width=0,e.height=a,e.top=i.top-(t.helpers.isMobile()?0:t.helpers.scrollTop()),e.right=1,e.bottom=1,e.ok=!0,n&&t.selection.restore()}return e}function r(e,n,r){var i=e.outerHeight(!0);if(!t.helpers.isMobile()&&t.$tb&&e.parent().get(0)!=t.$tb.get(0)){var a=e.parent().offset().top,o=n-i-(r||0);e.parent().get(0)==t.$sc.get(0)&&(a-=e.parent().position().top);var s=t.$sc.get(0).scrollHeight;a+n+i>t.$sc.offset().top+s&&e.parent().offset().top+o>0?(n=o,e.addClass("fr-above")):e.removeClass("fr-above")}return n}function i(e,n){var r=e.outerWidth(!0);return e.parent().offset().left+n+r>t.$sc.get(0).clientWidth-t.$sc.position().left-10&&(n=t.$sc.get(0).clientWidth-e.parent().offset().left-r-10),n<0&&(n=10),n}function a(e,n,a,o){var s=a.data("container");!s||"BODY"===s.get(0).tagName&&"static"==s.css("position")||(e&&(e-=s.offset().left),n&&(n-=s.offset().top),"BODY"!=s.get(0).tagName?(e&&(e+=s.get(0).scrollLeft),n&&(n+=s.get(0).scrollTop)):"absolute"==s.css("position")&&(e&&(e+=s.position().left),n&&(n+=s.position().top))),t.opts.iframe&&s&&t.$tb&&s.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=i(a,e);if(e){a.css("left",l);var d=a.data("fr-arrow");d||(d=a.find(".fr-arrow"),a.data("fr-arrow",d)),d.data("margin-left")||d.data("margin-left",t.helpers.getPX(d.css("margin-left"))),d.css("margin-left",e-l+d.data("margin-left"))}n&&a.css("top",r(a,n,o))}function o(n){var r=e(n),i=r.is(".fr-sticky-on"),a=r.data("sticky-top"),o=r.data("sticky-scheduled");if(void 0===a){r.data("sticky-top",0);var s=e('<div class="fr-sticky-dummy" style="height: '+r.outerHeight()+'px;"></div>');t.$box.prepend(s)}else t.$box.find(".fr-sticky-dummy").css("height",r.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=t.helpers.scrollTop(),d=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());d!=a&&d!=o&&(clearTimeout(r.data("sticky-timeout")),r.data("sticky-scheduled",d),r.outerHeight()<l-t.$tb.parent().offset().top&&r.addClass("fr-opacity-0"),r.data("sticky-timeout",setTimeout(function(){var e=t.helpers.scrollTop(),n=Math.min(Math.max(e-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());n>0&&"BODY"==t.$tb.parent().get(0).tagName&&(n+=t.$tb.parent().position().top),n!=a&&(r.css("top",Math.max(n,0)),r.data("sticky-top",n),r.data("sticky-scheduled",n)),r.removeClass("fr-opacity-0")},100))),i||(r.css("top","0"),r.width(t.$tb.parent().width()),r.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),r.css("top","0"),r.css("position",""),r.width(""),r.data("sticky-top",0),r.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function s(n){if(n.offsetWidth){var r,i,a=e(n),o=a.outerHeight(),s=a.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),d=0,c=0;"body"!==t.opts.scrollableContainer&&(d=t.$sc.offset().top,c=e(t.o_win).outerHeight()-d-l);var f="body"==t.opts.scrollableContainer?t.helpers.scrollTop():d,p=a.is(".fr-sticky-on");a.data("sticky-parent")||a.data("sticky-parent",a.parent());var u=a.data("sticky-parent"),h=u.offset().top,g=u.outerHeight();if(a.data("sticky-offset")||(a.data("sticky-offset",!0),a.after('<div class="fr-sticky-dummy" style="height: '+o+'px;"></div>')),!s){var m="auto"!==a.css("top")||"auto"!==a.css("bottom");m||a.css("position","fixed"),s={top:t.node.hasClass(a.get(0),"fr-top"),bottom:t.node.hasClass(a.get(0),"fr-bottom")},m||a.css("position",""),a.data("sticky-position",s),a.data("top",t.node.hasClass(a.get(0),"fr-top")?a.css("top"):"auto"),a.data("bottom",t.node.hasClass(a.get(0),"fr-bottom")?a.css("bottom"):"auto")}r=t.helpers.getPX(a.data("top")),i=t.helpers.getPX(a.data("bottom"));var v=s.top&&h<f+r&&h+g-o>=f+r,E=s.bottom&&h+o<f+l-i&&h+g>f+l-i;v||E?(a.css("width",u.width()+"px"),p||(a.addClass("fr-sticky-on"),a.removeClass("fr-sticky-off"),a.css("top")&&("auto"!=a.data("top")?a.css("top",t.helpers.getPX(a.data("top"))+d):a.data("top","auto")),a.css("bottom")&&("auto"!=a.data("bottom")?a.css("bottom",t.helpers.getPX(a.data("bottom"))+c):a.css("bottom","auto")))):t.node.hasClass(a.get(0),"fr-sticky-off")||(a.width(""),a.removeClass("fr-sticky-on"),a.addClass("fr-sticky-off"),a.css("top")&&"auto"!=a.data("top")&&s.top&&a.css("top",0),a.css("bottom")&&"auto"!=a.data("bottom")&&s.bottom&&a.css("bottom",0))}}function l(){var e=document.createElement("test").style;return e.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==e.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()&&!t.browser.chrome}function d(){if(!l())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)o(t._stickyElements[e])};n(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var r=e(t._stickyElements[n]),i=r.parent(),a=t.helpers.scrollTop();r.outerHeight()<a-i.offset().top&&(r.addClass("fr-opacity-0"),r.data("sticky-top",-1),r.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",c,!0),t.events.$on(e(t.o_win),"resize",c,!0),t.events.on("initialized",c),t.events.on("focus",c),t.events.$on(e(t.o_win),"resize","textarea",c,!0);t.events.on("destroy",function(){t._stickyElements=[]})}function c(){if(t._stickyElements)for(var e=0;e<t._stickyElements.length;e++)s(t._stickyElements[e])}return{_init:function(){d()},forSelection:function(e){var r=n();e.css({top:0,left:0});var i=r.top+r.height,o=r.left+r.width/2-e.get(0).offsetWidth/2+t.helpers.scrollLeft();t.opts.iframe||(i+=t.helpers.scrollTop()),a(o,i,e,r.height)},addSticky:function(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),l()||(e.removeClass("fr-sticky"),t._stickyElements.push(e.get(0)))},refresh:c,at:a,getBoundingRect:n}},e.FE.MODULES.refresh=function(t){function n(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:function(e){n(e,!t.undo.canDo())},redo:function(e){n(e,!t.undo.canRedo())},outdent:function(r){if(t.node.hasClass(r.get(0),"fr-no-refresh"))return!1;for(var i=t.selection.blocks(),a=0;a<i.length;a++){var o="rtl"==t.opts.direction||"rtl"==e(i[a]).css("direction")?"margin-right":"margin-left";if("LI"==i[a].tagName||"LI"==i[a].parentNode.tagName)return n(r,!1),!0;if(t.helpers.getPX(e(i[a]).css(o))>0)return n(r,!1),!0}n(r,!0)},indent:function(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var r=t.selection.blocks(),i=0;i<r.length;i++){for(var a=r[i].previousSibling;a&&a.nodeType==Node.TEXT_NODE&&0===a.textContent.length;)a=a.previousSibling;if("LI"!=r[i].tagName||a)return n(e,!1),!0;n(e,!0)}}}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(e){function t(){var t={edit:'<div id="fr-text-edit-'+e.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+e.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+e.language.translate("Update")+"</button></div></div>"};e.popups.create("text.edit",t)}function n(){var t,n=e.popups.get("text.edit");t="INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder"):e.$el.text(),n.find("input").val(t).trigger("change"),e.popups.setContainer("text.edit",e.$sc),e.popups.show("text.edit",e.$el.offset().left+e.$el.outerWidth()/2,e.$el.offset().top+e.$el.outerHeight(),e.$el.outerHeight())}function r(){e.events.$on(e.$el,e._mouseup,function(){setTimeout(function(){n()},10)})}return{_init:function(){e.opts.editInPopup&&(t(),r())},update:function(){var t=e.popups.get("text.edit").find("input").val();0===t.length&&(t=e.opts.placeholderText),"INPUT"===e.$el.prop("tagName")?e.$el.attr("placeholder",t):e.$el.text(t),e.events.trigger("contentChanged"),e.popups.hide("text.edit")}}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["bold","italic","underline","subscript","superscript","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertLink","insertImage","insertVideo","insertHR","selectAll","clearFormatting","|","spellChecker","html","|","undo","redo"],toolbarButtonsXS:["bold","italic","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["bold","italic","underline","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertLink","insertImage","insertVideo","selectAll","clearFormatting","|","spellChecker","html","|","undo","redo"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function r(){var r=e.merge([],i());n(r,t.opts.toolbarButtonsXS||[]),n(r,t.opts.toolbarButtonsSM||[]),n(r,t.opts.toolbarButtonsMD||[]),n(r,t.opts.toolbarButtons);for(var a=r.length-1;a>=0;a--)"-"!=r[a]&&"|"!=r[a]&&r.indexOf(r[a])<a&&r.splice(a,1);var o=t.button.buildList(r,i());t.$tb.append(o),t.button.bindCommands(t.$tb)}function i(){var e=t.helpers.screenSize();return v[e]}function a(){var e=i();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var r=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),a=null;t.node.hasClass(r.next().get(0),"fr-dropdown-menu")&&(a=r.next()),r.removeClass("fr-hidden").appendTo(t.$tb),a&&a.appendTo(t.$tb)}}function o(){t.events.$on(e(t.o_win),"resize",a),t.events.$on(e(t.o_win),"orientationchange",a)}function s(n,r){setTimeout(function(){if((!n||n.which!=e.FE.KEYCODE.ESC)&&t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection||!t.selection.isCollapsed()&&!t.keys.isIME()||r)){if(t.$tb.data("instance",t),!1===t.events.trigger("toolbar.show",[n]))return!1;t.$tb.show(),t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null)}},0)}function l(e){return!(!e||"keydown"!==e.type||!t.keys.ctrlKey(e))||!!t.button.getButtons(".fr-dropdown.fr-active").next().find(t.o_doc.activeElement).length||void(!1!==t.events.trigger("toolbar.hide")&&t.$tb.hide())}function d(n){clearTimeout(E),n&&n.which==e.FE.KEYCODE.ESC||(E=setTimeout(s,t.opts.typingTimer))}function c(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",s),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",s),t.browser.mozilla&&setInterval(s,200)):t.events.on("window.keyup",d),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.on("keydown",function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1},!0),t.events.$on(t.$wp,"scroll.toolbar",s),t.events.on("commands.after",s),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",d),t.events.$on(t.$doc,"orientationchange",s))}function f(){t.opts.toolbarInline?(t.$sc.append(t.$tb),t.$tb.data("container",t.$sc),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),c(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function p(){t.$tb.html("").removeData().remove(),t.$tb=null}function u(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function h(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(c(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):f(),g=t.$tb.get(0).ownerDocument,m="defaultView"in g?g.defaultView:g.parentWindow,r(),o(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}var g,m,v=[];v[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,v[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,v[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,v[e.FE.LG]=t.opts.toolbarButtons;var E=null,b=!1;return{_init:function(){if(t.$sc=e(t.opts.scrollableContainer).first(),!t.$wp)return!1;t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&c()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),h(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,c()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,h())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),h(),t.$tb.data("instance",t)),t.events.on("destroy",u,!0),t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",p,!0)},hide:l,show:function(){if(!1===t.events.trigger("toolbar.show"))return!1;t.$tb.show()},showInline:s,disable:function(){!b&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),b=!0)},enable:function(){b&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),b=!1),t.button.bulkRefresh()}}},e.FE.PLUGINS.align=function(t){return{apply:function(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)t.helpers.getAlignment(e(r[i].parentNode))==n?e(r[i]).css("text-align","").removeClass("fr-temp-div"):e(r[i]).css("text-align",n).removeClass("fr-temp-div"),""===e(r[i]).attr("class")&&e(r[i]).removeAttr("class"),""===e(r[i]).attr("style")&&e(r[i]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()},refresh:function(n){var r=t.selection.blocks();if(r.length){var i=t.helpers.getAlignment(e(r[0]));n.find("> *:first").replaceWith(t.icon.create("align-"+i))}},refreshOnShow:function(n,r){var i=t.selection.blocks();if(i.length){var a=t.helpers.getAlignment(e(i[0]));r.find('a.fr-command[data-param1="'+a+'"]').addClass("fr-active").attr("aria-selected",!0)}}}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.align.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function n(){return t.el.textContent.length}function r(e){if(t.opts.charCounterMax<0)return!0;if(n()<t.opts.charCounterMax)return!0;var r=e.which;return!(!t.keys.ctrlKey(e)&&t.keys.isCharacter(r)&&(e.preventDefault(),e.stopPropagation(),t.events.trigger("charCounter.exceeded"),1))}function i(r){return t.opts.charCounterMax<0?r:e("<div>").html(r).text().length+n()<=t.opts.charCounterMax?r:(t.events.trigger("charCounter.exceeded"),"")}function a(){if(t.opts.charCounterCount){var e=n()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");o.text(e),t.opts.toolbarBottom&&o.css("margin-bottom",t.$tb.outerHeight(!0));var r=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;r>=0&&("rtl"==t.opts.direction?o.css("margin-left",r):o.css("margin-right",0))}}var o;return{_init:function(){return!!t.$wp&&!!t.opts.charCounterCount&&((o=e('<span class="fr-counter"></span>')).css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(o),t.events.on("keydown",r,!0),t.events.on("paste.afterCleanup",i),t.events.on("keyup contentChanged input",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",a),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){e(t.o_win).off("resize.char"+t.id),o.removeData().remove(),o=null}))},count:n}},e.FE.PLUGINS.codeBeautifier=function(){function e(e,t){function n(){return(m=e.charAt(++E))||""}function r(t){var r="",i=E;return t&&a(),r=e.charAt(E+1)||"",E=i-1,n(),r}function i(t){for(var r=E;n();)if("\\"===m)n();else{if(-1!==t.indexOf(m))break;if("\n"===m)break}return e.substring(r,E+1)}function a(){for(var e="";v.test(r());)n(),e+=m;return e}function o(t){var i=E;for(t="/"===r(),n();n();){if(!t&&"*"===m&&"/"===r()){n();break}if(t&&"\n"===m)return e.substring(i,E)}return e.substring(i,E)+m}function s(t){return e.substring(E-t.length,E).toLowerCase()===t}var l={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},d={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=(e=e||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n");var c=t.indent_size||4,f=t.indent_char||" ",p=void 0===t.selector_separator_newline||t.selector_separator_newline,u=void 0!==t.end_with_newline&&t.end_with_newline,h=void 0===t.newline_between_rules||t.newline_between_rules,g=t.eol?t.eol:"\n";"string"==typeof c&&(c=parseInt(c,10)),t.indent_with_tabs&&(f="\t",c=1),g=g.replace(/\\r/,"\r").replace(/\\n/,"\n");var m,v=/^\s+$/,E=-1,b=0,T=e.match(/^[\t ]*/)[0],A=new Array(c+1).join(f),S=0,C=0,R={};R["{"]=function(e){R.singleSpace(),y.push(e),R.newLine()},R["}"]=function(e){R.newLine(),y.push(e),R.newLine()},R._lastCharWhitespace=function(){return v.test(y[y.length-1])},R.newLine=function(e){y.length&&(e||"\n"===y[y.length-1]||R.trim(),y.push("\n"),T&&y.push(T))},R.singleSpace=function(){y.length&&!R._lastCharWhitespace()&&y.push(" ")},R.preserveSingleSpace=function(){I&&R.singleSpace()},R.trim=function(){for(;R._lastCharWhitespace();)y.pop()};for(var y=[],_=!1,L=!1,x=!1,w="",O="";;){var N=function(){var e="";for(m&&v.test(m)&&(e=m);v.test(n());)e+=m;return e}(),I=""!==N,k=-1!==N.indexOf("\n");if(O=w,w=m,!m)break;if("/"===m&&"*"===r()){var D=0===S;(k||D)&&R.newLine(),y.push(o()),R.newLine(),D&&R.newLine(!0)}else if("/"===m&&"/"===r())k||"{"===O||R.trim(),R.singleSpace(),y.push(o()),R.newLine();else if("@"===m){R.preserveSingleSpace(),y.push(m);var F=function(e){var t=E,r=i(e);return E=t-1,n(),r}(": ,;{}()[]/='\"");F.match(/[ :]$/)&&(n(),F=i(": ").replace(/\s$/,""),y.push(F),R.singleSpace()),(F=F.replace(/\s$/,""))in l&&(C+=1,F in d&&(x=!0))}else"#"===m&&"{"===r()?(R.preserveSingleSpace(),y.push(i("}"))):"{"===m?"}"===r(!0)?(a(),n(),R.singleSpace(),y.push("{}"),R.newLine(),h&&0===S&&R.newLine(!0)):(S++,T+=A,R["{"](m),x?(x=!1,_=S>C):_=S>=C):"}"===m?(S--,T=T.slice(0,-c),R["}"](m),_=!1,L=!1,C&&C--,h&&0===S&&R.newLine(!0)):":"===m?(a(),!_&&!x||s("&")||function(){for(var t=0,n=E+1;n<e.length;n++){var r=e.charAt(n);if("{"===r)return!0;if("("===r)t+=1;else if(")"===r){if(0==t)return!1;t-=1}else if(";"===r||"}"===r)return!1}return!1}()?":"===r()?(n(),y.push("::")):y.push(":"):(L=!0,y.push(":"),R.singleSpace())):'"'===m||"'"===m?(R.preserveSingleSpace(),y.push(i(m))):";"===m?(L=!1,y.push(m),R.newLine()):"("===m?s("url")?(y.push(m),a(),n()&&(")"!==m&&'"'!==m&&"'"!==m?y.push(i(")")):E--)):(b++,R.preserveSingleSpace(),y.push(m),a()):")"===m?(y.push(m),b--):","===m?(y.push(m),a(),p&&!L&&b<1?R.newLine():R.singleSpace()):"]"===m?y.push(m):"["===m?(R.preserveSingleSpace(),y.push(m)):"="===m?(a(),m="=",y.push(m)):(R.preserveSingleSpace(),y.push(m))}var M="";return T&&(M+=T),M+=y.join("").replace(/[\r\n\t ]+$/,""),u&&(M+="\n"),"\n"!=g&&(M=M.replace(/[\n]/g,g)),M}function t(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function n(e){return e.replace(/^\s+|\s+$/g,"")}function r(e){return e.replace(/^\s+/g,"")}function i(e,t){return new a(e,t).beautify()}function a(e,i){function a(e,t){var n=0;return e&&(n=e.indentation_level,!w.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:w.get_line_number(),ternary_depth:0}}function o(e){var t=e.newlines;if(U.keep_array_indentation&&b(M.mode))for(n=0;n<t;n+=1)u(n>0);else if(U.max_preserve_newlines&&t>U.max_preserve_newlines&&(t=U.max_preserve_newlines),U.preserve_newlines&&e.newlines>1){u();for(var n=1;n<t;n+=1)u(!0)}K[(I=e).type]()}function f(e){for(var t=[],n=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function p(e){e=void 0!==e&&e,w.just_added_newline()||(U.preserve_newlines&&I.wanted_newline||e?u(!1,!0):U.wrap_line_length&&w.current_line.get_character_count()+I.text.length+(w.space_before_token?1:0)>=U.wrap_line_length&&u(!1,!0))}function u(e,t){if(!t&&";"!==M.last_text&&","!==M.last_text&&"="!==M.last_text&&"TK_OPERATOR"!==k)for(;M.mode===c.Statement&&!M.if_block&&!M.do_block;)A();w.add_new_line(e)&&(M.multiline_frame=!0)}function h(){w.just_added_newline()&&(U.keep_array_indentation&&b(M.mode)&&I.wanted_newline?(w.current_line.push(I.whitespace_before),w.space_before_token=!1):w.set_indent(M.indentation_level)&&(M.line_indent_level=M.indentation_level))}function g(e){w.raw?w.add_raw_token(I):(U.comma_first&&"TK_COMMA"===k&&w.just_added_newline()&&","===w.previous_line.last()&&(w.previous_line.pop(),h(),w.add_token(","),w.space_before_token=!0),e=e||I.text,h(),w.add_token(e))}function m(){M.indentation_level+=1}function v(){M.indentation_level>0&&(!M.parent||M.indentation_level>M.parent.indentation_level)&&(M.indentation_level-=1)}function E(e){M?(B.push(M),$=M):$=a(null,e),M=a($,e)}function b(e){return e===c.ArrayLiteral}function T(e){return t(e,[c.Expression,c.ForInitializer,c.Conditional])}function A(){B.length>0&&($=M,M=B.pop(),$.mode===c.Statement&&w.remove_redundant_indentation($))}function S(){return M.parent.mode===c.ObjectLiteral&&M.mode===c.Statement&&(":"===M.last_text&&0===M.ternary_depth||"TK_RESERVED"===k&&t(M.last_text,["get","set"]))}function C(){return!!("TK_RESERVED"===k&&t(M.last_text,["var","let","const"])&&"TK_WORD"===I.type||"TK_RESERVED"===k&&"do"===M.last_text||"TK_RESERVED"===k&&"return"===M.last_text&&!I.wanted_newline||"TK_RESERVED"===k&&"else"===M.last_text&&("TK_RESERVED"!==I.type||"if"!==I.text)||"TK_END_EXPR"===k&&($.mode===c.ForInitializer||$.mode===c.Conditional)||"TK_WORD"===k&&M.mode===c.BlockStatement&&!M.in_case&&"--"!==I.text&&"++"!==I.text&&"function"!==D&&"TK_WORD"!==I.type&&"TK_RESERVED"!==I.type||M.mode===c.ObjectLiteral&&(":"===M.last_text&&0===M.ternary_depth||"TK_RESERVED"===k&&t(M.last_text,["get","set"])))&&(E(c.Statement),m(),"TK_RESERVED"===k&&t(M.last_text,["var","let","const"])&&"TK_WORD"===I.type&&(M.declaration_statement=!0),S()||p("TK_RESERVED"===I.type&&t(I.text,["do","for","if","while"])),!0)}function R(e,t){for(var r=0;r<e.length;r++)if(n(e[r]).charAt(0)!==t)return!1;return!0}function y(e,t){for(var n,r=0,i=e.length;r<i;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}function _(e){return t(e,["case","return","do","if","throw","else"])}function L(e){var t=O+(e||0);return t<0||t>=W.length?null:W[t]}function x(){if("TK_RESERVED"===I.type&&M.mode!==c.ObjectLiteral&&t(I.text,["set","get"])&&(I.type="TK_WORD"),"TK_RESERVED"===I.type&&M.mode===c.ObjectLiteral&&":"==L(1).text&&(I.type="TK_WORD"),C()||!I.wanted_newline||T(M.mode)||"TK_OPERATOR"===k&&"--"!==M.last_text&&"++"!==M.last_text||"TK_EQUALS"===k||!U.preserve_newlines&&"TK_RESERVED"===k&&t(M.last_text,["var","let","const","set","get"])||u(),M.do_block&&!M.do_while){if("TK_RESERVED"===I.type&&"while"===I.text)return w.space_before_token=!0,g(),w.space_before_token=!0,void(M.do_while=!0);u(),M.do_block=!1}if(M.if_block)if(M.else_block||"TK_RESERVED"!==I.type||"else"!==I.text){for(;M.mode===c.Statement;)A();M.if_block=!1,M.else_block=!1}else M.else_block=!0;return"TK_RESERVED"===I.type&&("case"===I.text||"default"===I.text&&M.in_case_statement)?(u(),(M.case_body||U.jslint_happy)&&(v(),M.case_body=!1),g(),M.in_case=!0,void(M.in_case_statement=!0)):("TK_RESERVED"===I.type&&"function"===I.text&&((t(M.last_text,["}",";"])||w.just_added_newline()&&!t(M.last_text,["[","{",":","=",","]))&&(w.just_added_blankline()||I.comments_before.length||(u(),u(!0))),"TK_RESERVED"===k||"TK_WORD"===k?"TK_RESERVED"===k&&t(M.last_text,["get","set","new","return","export","async"])?w.space_before_token=!0:"TK_RESERVED"===k&&"default"===M.last_text&&"export"===D?w.space_before_token=!0:u():"TK_OPERATOR"===k||"="===M.last_text?w.space_before_token=!0:(M.multiline_frame||!T(M.mode)&&!b(M.mode))&&u()),"TK_COMMA"!==k&&"TK_START_EXPR"!==k&&"TK_EQUALS"!==k&&"TK_OPERATOR"!==k||S()||p(),"TK_RESERVED"===I.type&&t(I.text,["function","get","set"])?(g(),void(M.last_word=I.text)):(P="NONE","TK_END_BLOCK"===k?"TK_RESERVED"===I.type&&t(I.text,["else","catch","finally"])?"expand"===U.brace_style||"end-expand"===U.brace_style||"none"===U.brace_style&&I.wanted_newline?P="NEWLINE":(P="SPACE",w.space_before_token=!0):P="NEWLINE":"TK_SEMICOLON"===k&&M.mode===c.BlockStatement?P="NEWLINE":"TK_SEMICOLON"===k&&T(M.mode)?P="SPACE":"TK_STRING"===k?P="NEWLINE":"TK_RESERVED"===k||"TK_WORD"===k||"*"===M.last_text&&"function"===D?P="SPACE":"TK_START_BLOCK"===k?P="NEWLINE":"TK_END_EXPR"===k&&(w.space_before_token=!0,P="NEWLINE"),"TK_RESERVED"===I.type&&t(I.text,N.line_starters)&&")"!==M.last_text&&(P="else"===M.last_text||"export"===M.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===I.type&&t(I.text,["else","catch","finally"])?"TK_END_BLOCK"!==k||"expand"===U.brace_style||"end-expand"===U.brace_style||"none"===U.brace_style&&I.wanted_newline?u():(w.trim(!0),"}"!==w.current_line.last()&&u(),w.space_before_token=!0):"NEWLINE"===P?"TK_RESERVED"===k&&_(M.last_text)?w.space_before_token=!0:"TK_END_EXPR"!==k?"TK_START_EXPR"===k&&"TK_RESERVED"===I.type&&t(I.text,["var","let","const"])||":"===M.last_text||("TK_RESERVED"===I.type&&"if"===I.text&&"else"===M.last_text?w.space_before_token=!0:u()):"TK_RESERVED"===I.type&&t(I.text,N.line_starters)&&")"!==M.last_text&&u():M.multiline_frame&&b(M.mode)&&","===M.last_text&&"}"===D?u():"SPACE"===P&&(w.space_before_token=!0),g(),M.last_word=I.text,"TK_RESERVED"===I.type&&"do"===I.text&&(M.do_block=!0),void("TK_RESERVED"===I.type&&"if"===I.text&&(M.if_block=!0))))}var w,O,N,I,k,D,F,M,$,B,P,K,U,W=[],H="";for(K={TK_START_EXPR:function(){C();var e=c.Expression;if("["===I.text){if("TK_WORD"===k||")"===M.last_text)return"TK_RESERVED"===k&&t(M.last_text,N.line_starters)&&(w.space_before_token=!0),E(e),g(),m(),void(U.space_in_paren&&(w.space_before_token=!0));e=c.ArrayLiteral,b(M.mode)&&("["!==M.last_text&&(","!==M.last_text||"]"!==D&&"}"!==D)||U.keep_array_indentation||u())}else"TK_RESERVED"===k&&"for"===M.last_text?e=c.ForInitializer:"TK_RESERVED"===k&&t(M.last_text,["if","while"])&&(e=c.Conditional);";"===M.last_text||"TK_START_BLOCK"===k?u():"TK_END_EXPR"===k||"TK_START_EXPR"===k||"TK_END_BLOCK"===k||"."===M.last_text?p(I.wanted_newline):"TK_RESERVED"===k&&"("===I.text||"TK_WORD"===k||"TK_OPERATOR"===k?"TK_RESERVED"===k&&("function"===M.last_word||"typeof"===M.last_word)||"*"===M.last_text&&"function"===D?U.space_after_anon_function&&(w.space_before_token=!0):"TK_RESERVED"!==k||!t(M.last_text,N.line_starters)&&"catch"!==M.last_text||U.space_before_conditional&&(w.space_before_token=!0):w.space_before_token=!0,"("===I.text&&"TK_RESERVED"===k&&"await"===M.last_word&&(w.space_before_token=!0),"("===I.text&&("TK_EQUALS"!==k&&"TK_OPERATOR"!==k||S()||p()),E(e),g(),U.space_in_paren&&(w.space_before_token=!0),m()},TK_END_EXPR:function(){for(;M.mode===c.Statement;)A();M.multiline_frame&&p("]"===I.text&&b(M.mode)&&!U.keep_array_indentation),U.space_in_paren&&("TK_START_EXPR"!==k||U.space_in_empty_paren?w.space_before_token=!0:(w.trim(),w.space_before_token=!1)),"]"===I.text&&U.keep_array_indentation?(g(),A()):(A(),g()),w.remove_redundant_indentation($),M.do_while&&$.mode===c.Conditional&&($.mode=c.Expression,M.do_block=!1,M.do_while=!1)},TK_START_BLOCK:function(){var e=L(1),n=L(2);E(n&&(":"===n.text&&t(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||t(e.text,["get","set"])&&t(n.type,["TK_WORD","TK_RESERVED"]))?t(D,["class","interface"])?c.BlockStatement:c.ObjectLiteral:c.BlockStatement);var r=!e.comments_before.length&&"}"===e.text&&"function"===M.last_word&&"TK_END_EXPR"===k;"expand"===U.brace_style||"none"===U.brace_style&&I.wanted_newline?"TK_OPERATOR"!==k&&(r||"TK_EQUALS"===k||"TK_RESERVED"===k&&_(M.last_text)&&"else"!==M.last_text)?w.space_before_token=!0:u(!1,!0):"TK_OPERATOR"!==k&&"TK_START_EXPR"!==k?"TK_START_BLOCK"===k?u():w.space_before_token=!0:b($.mode)&&","===M.last_text&&("}"===D?w.space_before_token=!0:u()),g(),m()},TK_END_BLOCK:function(){for(;M.mode===c.Statement;)A();var e="TK_START_BLOCK"===k;"expand"===U.brace_style?e||u():e||(b(M.mode)&&U.keep_array_indentation?(U.keep_array_indentation=!1,u(),U.keep_array_indentation=!0):u()),A(),g()},TK_WORD:x,TK_RESERVED:x,TK_SEMICOLON:function(){for(C()&&(w.space_before_token=!1);M.mode===c.Statement&&!M.if_block&&!M.do_block;)A();g()},TK_STRING:function(){C()?w.space_before_token=!0:"TK_RESERVED"===k||"TK_WORD"===k?w.space_before_token=!0:"TK_COMMA"===k||"TK_START_EXPR"===k||"TK_EQUALS"===k||"TK_OPERATOR"===k?S()||p():u(),g()},TK_EQUALS:function(){C(),M.declaration_statement&&(M.declaration_assignment=!0),w.space_before_token=!0,g(),w.space_before_token=!0},TK_OPERATOR:function(){if(C(),"TK_RESERVED"===k&&_(M.last_text))return w.space_before_token=!0,void g();if("*"!==I.text||"TK_DOT"!==k){if(":"===I.text&&M.in_case)return M.case_body=!0,m(),g(),u(),void(M.in_case=!1);if("::"!==I.text){"TK_OPERATOR"===k&&p();var e=!0,n=!0;t(I.text,["--","++","!","~"])||t(I.text,["-","+"])&&(t(k,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||t(M.last_text,N.line_starters)||","===M.last_text)?(e=!1,n=!1,!I.wanted_newline||"--"!==I.text&&"++"!==I.text||u(!1,!0),";"===M.last_text&&T(M.mode)&&(e=!0),"TK_RESERVED"===k?e=!0:"TK_END_EXPR"===k?e=!("]"===M.last_text&&("--"===I.text||"++"===I.text)):"TK_OPERATOR"===k&&(e=t(I.text,["--","-","++","+"])&&t(M.last_text,["--","-","++","+"]),t(I.text,["+","-"])&&t(M.last_text,["--","++"])&&(n=!0)),M.mode!==c.BlockStatement&&M.mode!==c.Statement||"{"!==M.last_text&&";"!==M.last_text||u()):":"===I.text?0===M.ternary_depth?e=!1:M.ternary_depth-=1:"?"===I.text?M.ternary_depth+=1:"*"===I.text&&"TK_RESERVED"===k&&"function"===M.last_text&&(e=!1,n=!1),w.space_before_token=w.space_before_token||e,g(),w.space_before_token=n}else g()}else g()},TK_COMMA:function(){if(M.declaration_statement)return T(M.parent.mode)&&(M.declaration_assignment=!1),g(),void(M.declaration_assignment?(M.declaration_assignment=!1,u(!1,!0)):(w.space_before_token=!0,U.comma_first&&p()));g(),M.mode===c.ObjectLiteral||M.mode===c.Statement&&M.parent.mode===c.ObjectLiteral?(M.mode===c.Statement&&A(),u()):(w.space_before_token=!0,U.comma_first&&p())},TK_BLOCK_COMMENT:function(){if(w.raw)return w.add_raw_token(I),void(I.directives&&"end"===I.directives.preserve&&(U.test_output_raw||(w.raw=!1)));if(I.directives)return u(!1,!0),g(),"start"===I.directives.preserve&&(w.raw=!0),void u(!1,!0);if(!d.newline.test(I.text)&&!I.wanted_newline)return w.space_before_token=!0,g(),void(w.space_before_token=!0);var e,t=f(I.text),n=!1,i=!1,a=I.whitespace_before,o=a.length;for(u(!1,!0),t.length>1&&(R(t.slice(1),"*")?n=!0:y(t.slice(1),a)&&(i=!0)),g(t[0]),e=1;e<t.length;e++)u(!1,!0),n?g(" "+r(t[e])):i&&t[e].length>o?g(t[e].substring(o)):w.add_token(t[e]);u(!1,!0)},TK_COMMENT:function(){I.wanted_newline?u(!1,!0):w.trim(!0),w.space_before_token=!0,g(),u(!1,!0)},TK_DOT:function(){C(),"TK_RESERVED"===k&&_(M.last_text)?w.space_before_token=!0:p(")"===M.last_text&&U.break_chained_methods),g()},TK_UNKNOWN:function(){g(),"\n"===I.text[I.text.length-1]&&u()},TK_EOF:function(){for(;M.mode===c.Statement;)A()}},U={},void 0!==(i=i||{}).braces_on_own_line&&(U.brace_style=i.braces_on_own_line?"expand":"collapse"),U.brace_style=i.brace_style?i.brace_style:U.brace_style?U.brace_style:"collapse","expand-strict"===U.brace_style&&(U.brace_style="expand"),U.indent_size=i.indent_size?parseInt(i.indent_size,10):4,U.indent_char=i.indent_char?i.indent_char:" ",U.eol=i.eol?i.eol:"\n",U.preserve_newlines=void 0===i.preserve_newlines||i.preserve_newlines,U.break_chained_methods=void 0!==i.break_chained_methods&&i.break_chained_methods,U.max_preserve_newlines=void 0===i.max_preserve_newlines?0:parseInt(i.max_preserve_newlines,10),U.space_in_paren=void 0!==i.space_in_paren&&i.space_in_paren,U.space_in_empty_paren=void 0!==i.space_in_empty_paren&&i.space_in_empty_paren,U.jslint_happy=void 0!==i.jslint_happy&&i.jslint_happy,U.space_after_anon_function=void 0!==i.space_after_anon_function&&i.space_after_anon_function,U.keep_array_indentation=void 0!==i.keep_array_indentation&&i.keep_array_indentation,U.space_before_conditional=void 0===i.space_before_conditional||i.space_before_conditional,U.unescape_strings=void 0!==i.unescape_strings&&i.unescape_strings,U.wrap_line_length=void 0===i.wrap_line_length?0:parseInt(i.wrap_line_length,10),U.e4x=void 0!==i.e4x&&i.e4x,U.end_with_newline=void 0!==i.end_with_newline&&i.end_with_newline,U.comma_first=void 0!==i.comma_first&&i.comma_first,U.test_output_raw=void 0!==i.test_output_raw&&i.test_output_raw,U.jslint_happy&&(U.space_after_anon_function=!0),i.indent_with_tabs&&(U.indent_char="\t",U.indent_size=1),U.eol=U.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),F="";U.indent_size>0;)F+=U.indent_char,U.indent_size-=1;var Y=0;if(e&&e.length){for(;" "===e.charAt(Y)||"\t"===e.charAt(Y);)H+=e.charAt(Y),Y+=1;e=e.substring(Y)}k="TK_START_BLOCK",D="",(w=new s(F,H)).raw=U.test_output_raw,B=[],E(c.BlockStatement),this.beautify=function(){var t,n;for(N=new l(e,U,F),W=N.tokenize(),O=0;t=L();){for(var r=0;r<t.comments_before.length;r++)o(t.comments_before[r]);o(t),D=M.last_text,k=t.type,M.last_text=t.text,O+=1}return n=w.get_code(),U.end_with_newline&&(n+="\n"),"\n"!=U.eol&&(n=n.replace(/[\n]/g,U.eol)),n}}function o(e){var t=0,n=-1,r=[],i=!0;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length,n=r},this.get_character_count=function(){return t},this.is_empty=function(){return i},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),t+=e.length,i=!1},this.pop=function(){var e=null;return i||(e=r.pop(),t-=e.length,i=0===r.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),t-=1;i=0===r.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=r.join("")),t}}function s(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new o(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return n.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==c.ForInitializer&&e.mode!==c.Conditional)for(var t=e.start_line_index,r=n.length;t<r;)n[t].remove_indent(),t++},this.trim=function(r){for(r=void 0!==r&&r,this.current_line.trim(e,t);r&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===n.length||n[n.length-2].is_empty())}}function l(e,r,i){function a(e){if(!e.match(R))return null;var t={};y.lastIndex=0;for(var n=y.exec(e);n;)t[n[1]]=n[2],n=y.exec(e);return t}function o(){var i,o=[];if(g=0,m="",b>=T)return["","TK_EOF"];var R;R=E.length?E[E.length-1]:new f("TK_START_BLOCK","{");var y=e.charAt(b);for(b+=1;t(y,l);){if(d.newline.test(y)?"\n"===y&&"\r"===e.charAt(b-2)||(g+=1,o=[]):o.push(y),b>=T)return["","TK_EOF"];y=e.charAt(b),b+=1}if(o.length&&(m=o.join("")),c.test(y)){var x=!0,w=!0,O=c;for("0"===y&&b<T&&/[Xxo]/.test(e.charAt(b))?(x=!1,w=!1,y+=e.charAt(b),b+=1,O=/[o]/.test(e.charAt(b))?p:u):(y="",b-=1);b<T&&O.test(e.charAt(b));)y+=e.charAt(b),b+=1,x&&b<T&&"."===e.charAt(b)&&(y+=e.charAt(b),b+=1,x=!1),w&&b<T&&/[Ee]/.test(e.charAt(b))&&(y+=e.charAt(b),(b+=1)<T&&/[+-]/.test(e.charAt(b))&&(y+=e.charAt(b),b+=1),w=!1,x=!1);return[y,"TK_WORD"]}if(d.isIdentifierStart(e.charCodeAt(b-1))){if(b<T)for(;d.isIdentifierChar(e.charCodeAt(b))&&(y+=e.charAt(b),(b+=1)!==T););return"TK_DOT"===R.type||"TK_RESERVED"===R.type&&t(R.text,["set","get"])||!t(y,A)?[y,"TK_WORD"]:"in"===y?[y,"TK_OPERATOR"]:[y,"TK_RESERVED"]}if("("===y||"["===y)return[y,"TK_START_EXPR"];if(")"===y||"]"===y)return[y,"TK_END_EXPR"];if("{"===y)return[y,"TK_START_BLOCK"];if("}"===y)return[y,"TK_END_BLOCK"];if(";"===y)return[y,"TK_SEMICOLON"];if("/"===y){var N="";if("*"===e.charAt(b)){b+=1,S.lastIndex=b,N="/*"+(k=S.exec(e))[0],b+=k[0].length;var I=a(N);return I&&"start"===I.ignore&&(_.lastIndex=b,k=_.exec(e),N+=k[0],b+=k[0].length),N=N.replace(d.lineBreak,"\n"),[N,"TK_BLOCK_COMMENT",I]}if("/"===e.charAt(b)){b+=1,C.lastIndex=b;var k=C.exec(e);return N="//"+k[0],b+=k[0].length,[N,"TK_COMMENT"]}}if("`"===y||"'"===y||'"'===y||("/"===y||r.e4x&&"<"===y&&e.slice(b-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===R.type&&t(R.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===R.type&&")"===R.text&&R.parent&&"TK_RESERVED"===R.parent.type&&t(R.parent.text,["if","while","for"])||t(R.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var D=y,F=!1,M=!1;if(i=y,"/"===D)for(var $=!1;b<T&&(F||$||e.charAt(b)!==D)&&!d.newline.test(e.charAt(b));)i+=e.charAt(b),F?F=!1:(F="\\"===e.charAt(b),"["===e.charAt(b)?$=!0:"]"===e.charAt(b)&&($=!1)),b+=1;else if(r.e4x&&"<"===D){var B=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,P=e.slice(b-1),K=B.exec(P);if(K&&0===K.index){for(var U=K[2],W=0;K;){var H=!!K[1],Y=K[2],z=!!K[K.length-1]||"![CDATA["===Y.slice(0,8);if(Y!==U||z||(H?--W:++W),W<=0)break;K=B.exec(P)}var G=K?K.index+K[0].length:P.length;return P=P.slice(0,G),b+=G-1,P=P.replace(d.lineBreak,"\n"),[P,"TK_STRING"]}}else for(;b<T&&(F||e.charAt(b)!==D&&("`"===D||!d.newline.test(e.charAt(b))));)(F||"`"===D)&&d.newline.test(e.charAt(b))?("\r"===e.charAt(b)&&"\n"===e.charAt(b+1)&&(b+=1),i+="\n"):i+=e.charAt(b),F?("x"!==e.charAt(b)&&"u"!==e.charAt(b)||(M=!0),F=!1):F="\\"===e.charAt(b),b+=1;if(M&&r.unescape_strings&&(i=s(i)),b<T&&e.charAt(b)===D&&(i+=D,b+=1,"/"===D))for(;b<T&&d.isIdentifierStart(e.charCodeAt(b));)i+=e.charAt(b),b+=1;return[i,"TK_STRING"]}if("#"===y){if(0===E.length&&"!"===e.charAt(b)){for(i=y;b<T&&"\n"!==y;)y=e.charAt(b),i+=y,b+=1;return[n(i)+"\n","TK_UNKNOWN"]}var V="#";if(b<T&&c.test(e.charAt(b))){do{V+=y=e.charAt(b),b+=1}while(b<T&&"#"!==y&&"="!==y);return"#"===y||("["===e.charAt(b)&&"]"===e.charAt(b+1)?(V+="[]",b+=2):"{"===e.charAt(b)&&"}"===e.charAt(b+1)&&(V+="{}",b+=2)),[V,"TK_WORD"]}}if("<"===y&&("?"===e.charAt(b)||"%"===e.charAt(b))){L.lastIndex=b-1;var X=L.exec(e);if(X)return y=X[0],b+=y.length-1,y=y.replace(d.lineBreak,"\n"),[y,"TK_STRING"]}if("<"===y&&"\x3c!--"===e.substring(b-1,b+3)){for(b+=3,y="\x3c!--";!d.newline.test(e.charAt(b))&&b<T;)y+=e.charAt(b),b++;return v=!0,[y,"TK_COMMENT"]}if("-"===y&&v&&"--\x3e"===e.substring(b-1,b+2))return v=!1,b+=2,["--\x3e","TK_COMMENT"];if("."===y)return[y,"TK_DOT"];if(t(y,h)){for(;b<T&&t(y+e.charAt(b),h)&&(y+=e.charAt(b),!((b+=1)>=T)););return","===y?[y,"TK_COMMA"]:"="===y?[y,"TK_EQUALS"]:[y,"TK_OPERATOR"]}return[y,"TK_UNKNOWN"]}function s(e){for(var t,n=!1,r="",i=0,a="",o=0;n||i<e.length;)if(t=e.charAt(i),i++,n){if(n=!1,"x"===t)a=e.substr(i,2),i+=2;else{if("u"!==t){r+="\\"+t;continue}a=e.substr(i,4),i+=4}if(!a.match(/^[0123456789abcdefABCDEF]+$/))return e;if((o=parseInt(a,16))>=0&&o<32){r+="x"===t?"\\x"+a:"\\u"+a;continue}if(34===o||39===o||92===o)r+="\\"+String.fromCharCode(o);else{if("x"===t&&o>126&&o<=255)return e;r+=String.fromCharCode(o)}}else"\\"===t?n=!0:r+=t;return r}var l="\n\r\t ".split(""),c=/[0-9]/,p=/[01234567]/,u=/[0123456789abcdefABCDEF]/,h="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var g,m,v,E,b,T,A=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),S=/([\s\S]*?)((?:\*\/)|$)/g,C=/([^\n\r\u2028\u2029]*)/g,R=/\/\* beautify( \w+[:]\w+)+ \*\//g,y=/ (\w+)[:](\w+)/g,_=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,L=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){T=e.length,b=0,v=!1,E=[];for(var t,n,r,i=null,a=[],s=[];!n||"TK_EOF"!==n.type;){for(r=o(),t=new f(r[1],r[0],g,m);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=r[2]),s.push(t),r=o(),t=new f(r[1],r[0],g,m);s.length&&(t.comments_before=s,s=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,a.push(i),i=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&i&&("]"===t.text&&"["===i.text||")"===t.text&&"("===i.text||"}"===t.text&&"{"===i.text)&&(t.parent=i.parent,i=a.pop()),E.push(t),n=t}return E}}var d={};!function(e){var t="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",n=new RegExp("["+t+"]"),r=new RegExp("["+t+"------------------------------------------------------------------------------------------------------------------------------------------]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&n.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&r.test(String.fromCharCode(e))))}}(d);var c={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},f=function(e,t,n,r,i,a){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=r||"",this.parent=null,this.directives=null};return{run:function(t,n){function r(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}var o,s,l,d,c,f,p,u,h,g,m,v,E,b;for(void 0!==(n=n||{}).wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char),s=void 0!==n.indent_inner_html&&n.indent_inner_html,l=void 0===n.indent_size?4:parseInt(n.indent_size,10),d=void 0===n.indent_char?" ":n.indent_char,f=void 0===n.brace_style?"collapse":n.brace_style,c=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,10),p=n.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],u=void 0===n.preserve_newlines||n.preserve_newlines,h=u?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0,g=void 0!==n.indent_handlebars&&n.indent_handlebars,m=void 0===n.wrap_attributes?"auto":n.wrap_attributes,v=void 0===n.wrap_attributes_indent_size?l:parseInt(n.wrap_attributes_indent_size,10)||l,E=void 0!==n.end_with_newline&&n.end_with_newline,b=Array.isArray(n.extra_liners)?n.extra_liners.concat():"string"==typeof n.extra_liners?n.extra_liners.split(","):"head,body,/html".split(","),n.indent_with_tabs&&(d="\t",l=1),(o=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=s,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:b,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},this.is_whitespace=function(e){for(;0<e.length;e++)if(!this.Utils.in_array(e.charAt(0),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)u&&"\n"==e&&this.newlines<=h&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var n=this.input.substr(this.pos,3);if("{{#"==n||"{{/"==n)break;if("{{!"==n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),i=r?r.index:this.input.length;return this.pos<i&&(t=this.input.substring(this.pos,i),this.pos=i),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,r="",i=[],a="",o=!1,s=!0,l=this.pos,c=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=c),i.length?i.join(""):["","TK_EOF"];if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace))o=!0;else{if("'"!=r&&'"'!=r||(r+=this.get_unformatted(r),o=!0),"="==r&&(o=!1),i.length&&"="!=i[i.length-1]&&">"!=r&&o){if(this.space_or_wrap(i),o=!1,!s&&"force"==m&&"/"!=r){this.print_newline(!0,i),this.print_indentation(i);for(var f=0;f<v;f++)i.push(d)}for(var u=0;u<i.length;u++)if(" "==i[u]){s=!1;break}}if(g&&"<"==n&&r+this.input.charAt(this.pos)=="{{"&&(r+=this.get_unformatted("}}"),i.length&&" "!=i[i.length-1]&&"<"!=i[i.length-1]&&(r=" "+r),o=!0),"<"!=r||n||(t=this.pos-1,n="<"),g&&!n&&i.length>=2&&"{"==i[i.length-1]&&"{"==i[i.length-2]&&(t="#"==r||"/"==r||"!"==r?this.pos-3:this.pos-2,n="{"),this.line_char_count++,i.push(r),i[1]&&("!"==i[1]||"?"==i[1]||"%"==i[1])){i=[this.get_comment(t)];break}if(g&&i[1]&&"{"==i[1]&&i[2]&&"!"==i[2]){i=[this.get_comment(t)];break}if(g&&"{"==n&&i.length>2&&"}"==i[i.length-2]&&"}"==i[i.length-1])break}}while(">"!=r);var h,E,b=i.join("");h=-1!=b.indexOf(" ")?b.indexOf(" "):"{"==b[0]?b.indexOf("}"):b.indexOf(">"),E="<"!=b[0]&&g?"#"==b[2]?3:2:1;var T=b.substring(E,h).toLowerCase();return"/"==b.charAt(b.length-2)||this.Utils.in_array(T,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"==b[0]&&"else"==T?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(T,p)?(a=this.get_unformatted("</"+T+">",b),i.push(a),this.pos,this.tag_type="SINGLE"):"script"==T&&(-1==b.search("type")||b.search("type")>-1&&b.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(T),this.tag_type="SCRIPT"):"style"==T&&(-1==b.search("type")||b.search("type")>-1&&b.search("text/css")>-1)?e||(this.record_tag(T),this.tag_type="STYLE"):"!"==T.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==T.charAt(0)?(this.retrieve_tag(T.substring(1)),this.tag_type="END"):(this.record_tag(T),"html"!=T.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(i),this.Utils.in_array(T,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=c),i.join("")},this.get_comment=function(e){var t="",n=">",r=!1;this.pos=e;var i=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((t+=i)[t.length-1]!=n[n.length-1]||-1==t.indexOf(n));)!r&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",r=!0):0===t.indexOf("<![cdata[")?(n="]]>",r=!0):0===t.indexOf("<![")?(n="]>",r=!0):0===t.indexOf("\x3c!--")?(n="--\x3e",r=!0):0===t.indexOf("{{!")?(n="}}",r=!0):0===t.indexOf("<?")?(n="?>",r=!0):0===t.indexOf("<%")&&(n="%>",r=!0)),i=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var n="",r="",i=0,a=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!a){this.line_char_count--;continue}if("\n"==n||"\r"==n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,a=!0,g&&"{"==n&&r.length&&"{"==r[r.length-2]&&(r+=this.get_unformatted("}}"),i=r.length)}while(-1==r.toLowerCase().indexOf(e,i));return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}return"CONTENT"==this.current_mode?(e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"]):"TAG"==this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(n&&!this.Utils.in_array(n,t))},this.printer=function(e,t,n,i,o){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=o,this.indent_level=0,this.wrap_line_length=i,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=a(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=r(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=a(e)),e&&""!==e&&(e.length>1&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}).printer(t,d,l,c,f);;){var T=o.get_token();if(o.token_text=T[0],o.token_type=T[1],"TK_EOF"==o.token_type)break;switch(o.token_type){case"TK_TAG_START":o.print_newline(!1,o.output),o.print_token(o.token_text),o.indent_content&&(o.indent(),o.indent_content=!1),o.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==o.last_token&&""===o.last_text){var A=o.token_text.match(/\w+/)[0],S=null;o.output.length&&(S=o.output[o.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==S||S[1]!=A&&!o.Utils.in_array(S[1],p))&&o.print_newline(!1,o.output)}o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var C=o.token_text.match(/^\s*<([a-z-]+)/i);C&&o.Utils.in_array(C[1],p)||o.print_newline(!1,o.output),o.print_token(o.token_text),o.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":o.print_token(o.token_text),o.indent_content&&(o.indent(),o.indent_content=!1),o.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":o.print_token(o.token_text),o.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==o.token_text){o.print_newline(!1,o.output);var R,y=o.token_text,_=1;"TK_SCRIPT"==o.token_type?R="function"==typeof i&&i:"TK_STYLE"==o.token_type&&(R="function"==typeof e&&e),"keep"==n.indent_scripts?_=0:"separate"==n.indent_scripts&&(_=-o.indent_level);var L=o.get_full_indent(_);if(R)y=R(y.replace(/^\s*/,L),n);else{var x=y.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(o.indent_string).length-1,w=o.get_full_indent(_-x);y=y.replace(/^\s*/,L).replace(/\r\n|\r|\n/g,"\n"+w).replace(/\s+$/,"")}y&&(o.print_token_raw(y),o.print_newline(!0,o.output))}o.current_mode="TAG";break;default:""!==o.token_text&&o.print_token(o.token_text)}o.last_token=o.token_type,o.last_text=o.token_text}var O=o.output.join("").replace(/[\r\n\t ]+$/,"");return E&&(O+="\n"),O}}},e.extend(e.FE.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.FE.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function r(){return c?c.getValue():d.val()}function i(e){var n=r();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function a(n){d||(l(),!c&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror?c=CodeMirror.fromTextArea(d.get(0),t.opts.codeMirrorOptions):t.events.$on(d,"keydown keyup change input",function(){t.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")})),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var r=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),t.$box.toggleClass("fr-code-view",!0),t.core.hasFocus()&&t.$el.blur(),r=(r=r.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(r=t.codeBeautifier.run(r,t.opts.codeBeautifierOptions));var i,a;if(c){(i=r.indexOf("FROALA-SM"))>(a=r.indexOf("FROALA-EM"))?i=a:a-=9;var o=(r=r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,i).length-r.substring(0,i).replace(/\n/g,"").length,s=r.substring(0,a).length-r.substring(0,a).replace(/\n/g,"").length;i=r.substring(0,i).length-r.substring(0,r.substring(0,i).lastIndexOf("\n")+1).length,a=r.substring(0,a).length-r.substring(0,r.substring(0,a).lastIndexOf("\n")+1).length,c.setSize(null,t.opts.height?t.opts.height:"auto"),t.opts.heightMin&&t.$box.find(".CodeMirror-scroll").css("min-height",t.opts.heightMin),c.setValue(r),c.focus(),c.setSelection({line:o,ch:i},{line:s,ch:a}),c.refresh(),c.clearHistory()}else{i=r.indexOf("FROALA-SM"),a=r.indexOf("FROALA-EM")-9,t.opts.heightMin&&d.css("min-height",t.opts.heightMin),t.opts.height&&d.css("height",t.opts.height),t.opts.heightMax&&d.css("max-height",t.opts.height||t.opts.heightMax),d.val(r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var f=e(t.o_doc).scrollTop();d.focus(),d.get(0).setSelectionRange(i,a),e(t.o_doc).scrollTop(f)}t.$tb.find(" > .fr-command").not(n).filter(function(){return t.opts.codeViewKeepActiveButtons.indexOf(e(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),n.addClass("fr-active").attr("aria-pressed",!0),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function o(e){void 0===e&&(e=!n());var r=t.$tb.find('.fr-command[data-cmd="html"]');e?(t.popups.hideAll(),a(r)):(t.$box.toggleClass("fr-code-view",!1),i(r))}function s(){n()&&o(!1),c&&c.toTextArea(),d.val("").removeData().remove(),d=null,f&&(f.remove(),f=null)}function l(){d=e('<textarea class="fr-code" tabIndex="-1">'),t.$wp.append(d),d.attr("dir",t.opts.direction),t.$box.hasClass("fr-basic")||(f=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(f),t.events.bindClick(t.$box,"a.html-switch",function(){o(!1)}));var i=function(){return!n()};t.events.on("buttons.refresh",i),t.events.on("copy",i,!0),t.events.on("cut",i,!0),t.events.on("paste",i,!0),t.events.on("destroy",s,!0),t.events.on("html.set",function(){n()&&o(!0)}),t.events.on("form.submit",function(){n()&&(t.html.set(r()),t.events.trigger("contentChanged",[],!0))},!0)}var d,c,f;return{_init:function(){if(!t.$wp)return!1},toggle:o,isActive:n,get:r}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"}),e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){t.popups.hide("colors.picker")}function r(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons));var n={buttons:e+=i()+"</div>",text_colors:a("text"),background_colors:a("background")},r=t.popups.create("colors.picker",n);return o(r),r}function i(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>")+"</div>"}function a(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,r='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',i=0;i<n.length;i++)0!==i&&i%t.opts.colorsStep==0&&(r+="<br>"),"REMOVE"!=n[i]?r+='<span class="fr-command fr-select-color" style="background: '+n[i]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+n[i]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+n[i]+"&nbsp;&nbsp;&nbsp;</span></span>":r+='<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return r+"</div>"}function o(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("colors.picker")||!i.is("span"))return!0;var a=r.which,o=!0;if(e.FE.KEYCODE.TAB==a){var s=n.find(".fr-buttons");o=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==a||e.FE.KEYCODE.ARROW_DOWN==a||e.FE.KEYCODE.ARROW_LEFT==a||e.FE.KEYCODE.ARROW_RIGHT==a){if(i.is("span.fr-select-color")){var l=i.parent().find("span.fr-select-color"),d=l.index(i),c=t.opts.colorsStep,f=Math.floor(l.length/c),p=d%c,u=Math.floor(d/c)*c+p,h=f*c;e.FE.KEYCODE.ARROW_UP==a?u=((u-c)%h+h)%h:e.FE.KEYCODE.ARROW_DOWN==a?u=(u+c)%h:e.FE.KEYCODE.ARROW_LEFT==a?u=((u-1)%h+h)%h:e.FE.KEYCODE.ARROW_RIGHT==a&&(u=(u+1)%h);var g=e(l.get(u));t.events.disableBlur(),g.focus(),o=!1}}else e.FE.KEYCODE.ENTER==a&&(t.button.exec(i),o=!1);return!1===o&&(r.preventDefault(),r.stopPropagation()),o},!0)}function s(n){var r,i=t.popups.get("colors.picker"),a=e(t.selection.element());r="background"==n?"background-color":"color";var o=i.find(".fr-"+n+"-color .fr-select-color");for(o.find(".fr-selected-color").remove(),o.removeClass("fr-active-item"),o.not('[data-param1="REMOVE"]').attr("aria-selected",!1);a.get(0)!=t.el;){if("transparent"!=a.css(r)&&"rgba(0, 0, 0, 0)"!=a.css(r)){var s=i.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(a.css(r))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true"></span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}a=a.parent()}}return{showColorsPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=r()),!n.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),s(n.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,a=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",i,a,e.outerHeight())}else t.position.forSelection(n),t.popups.show("colors.picker")},hideColorsPopup:n,changeSet:function(e,n){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+n+"-color").addClass("fr-selected-set"),s(n)),t.accessibility.focusPopup(e.parents(".fr-popup"))},background:function(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),n()},text:function(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),n()},back:function(){t.popups.hide("colors.picker"),t.toolbar.showInline()}}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.DefineIcon("remove",{NAME:"eraser"}),e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return!(!n.originalEvent||!n.originalEvent.target||n.originalEvent.target.nodeType!=Node.TEXT_NODE)||(n.target&&"A"==n.target.tagName&&1==n.target.childNodes.length&&"IMG"==n.target.childNodes[0].tagName&&(n.target=n.target.childNodes[0]),e(n.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(n.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1))}function r(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function i(e,n,r){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),p.offset().top!=e&&p.css("top",e),p.offset().left!=n&&p.css("left",n),p.width()!=r&&p.css("width",r)}function a(n){var a=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!r(a)){for(var o=0,s=a;!r(s)&&s==a&&n.originalEvent.pageY-t.win.pageYOffset-o>0;)o++,s=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-o);(!r(s)||p&&0===t.$el.find(s).length&&s!=p.get(0))&&(s=null);for(var l=0,d=a;!r(d)&&d==a&&n.originalEvent.pageY-t.win.pageYOffset+l<e(t.doc).height();)l++,d=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+l);(!r(d)||p&&0===t.$el.find(d).length&&d!=p.get(0))&&(d=null),a=null==d&&s?s:d&&null==s?d:d&&s?o<l?s:d:null}if(e(a).hasClass("fr-drag-helper"))return!1;if(a&&!t.node.isBlock(a)&&(a=t.node.blockParent(a)),a&&["TD","TH","TR","THEAD","TBODY"].indexOf(a.tagName)>=0&&(a=e(a).parents("table").get(0)),a&&["LI"].indexOf(a.tagName)>=0&&(a=e(a).parents("UL, OL").get(0)),a&&!e(a).hasClass("fr-drag-helper")){p||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),p=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){p.html("").removeData().remove(),p=null},!0));var c;c=n.originalEvent.pageY<e(a).offset().top+e(a).outerHeight()/2;var f=e(a),u=0;c||0!==f.next().length?(c||(f=f.next()),"before"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(f.prev().length>0&&(u=parseFloat(f.prev().css("margin-bottom"))||0),u=Math.max(u,parseFloat(f.css("margin-top"))||0),i(f.offset().top-u/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","before"))):"after"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(u=parseFloat(f.css("margin-bottom"))||0,i(f.offset().top+e(a).height()+u/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","after")),p.data("fr-tag",f),p.addClass("fr-visible"),p.appendTo(t.$box)}else p&&t.$box.find(p).length>0&&p.removeClass("fr-visible")}function o(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?d()||!t.browser.msie&&!t.browser.edge||e.preventDefault():(e.preventDefault(),a(e))}function s(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");p&&p.hasClass("fr-visible")&&t.$box.find(p).length?c(e):n.length&&(e.preventDefault(),e.stopPropagation()),p&&t.$box.find(p).length&&p.removeClass("fr-visible"),n.removeClass("fr-dragging")}function d(){for(var t=null,n=0;n<e.FE.INSTANCES.length;n++)if((t=e.FE.INSTANCES[n].$el.find(".fr-dragging")).length)return t.get(0)}function c(n){for(var r,i,a=0;a<e.FE.INSTANCES.length;a++)if((r=e.FE.INSTANCES[a].$el.find(".fr-dragging")).length){i=e.FE.INSTANCES[a];break}if(r.length){if(n.preventDefault(),n.stopPropagation(),p&&p.hasClass("fr-visible")&&t.$box.find(p).length)p.data("fr-tag")[p.data("fr-position")]('<span class="fr-marker"></span>'),p.removeClass("fr-visible");else if(!1===t.markers.insertAtPoint(n.originalEvent))return!1;r.removeClass("fr-dragging");var o=r;if(r.parent().is("A")&&(o=r.parent()),t.core.isEmpty()?t.events.focus():(t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.selection.restore()),i==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(o);else{var s=t.markers.insert();0===o.find(s).length?e(s).replaceWith(o):e(s).replaceWith(r),r.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),i!=t&&(i.popups.hideAll(),i.$el.find(i.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),i.html.wrap(),i.html.fillEmptyBlocks(),i.undo.saveStep(),i.events.trigger("element.dropped"),i.opts.iframe&&i.size.syncIframe()),t.events.trigger("element.dropped",[o]),!1}p&&p.removeClass("fr-visible"),t.undo.canDo()||t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)}function f(e){if(e&&"DIV"==e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("div.fr-drag-helper"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r])}var p;return{_init:function(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",o,!0),t.events.on("dragenter",s,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",c,!0),t.events.on("html.processGet",f)}}},e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function n(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var n={buttons:e,emoticons:i()},r=t.popups.create("emoticons",n);return t.tooltip.bind(r,".fr-emoticon"),a(r),r}function r(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),n=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(n&&t.node.hasClass(n,"fr-emoticon"))return n;var r=t.selection.ranges(0),i=r.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&i.childNodes.length>0&&r.startOffset>0){var a=i.childNodes[r.startOffset-1];if(t.node.hasClass(a,"fr-emoticon"))return a}return!1}function i(){for(var e='<div style="text-align: center">',n=0;n<t.opts.emoticonsSet.length;n++)0!==n&&n%t.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[n].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[n].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[n].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[n].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[n].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+="</div>"}function a(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("emoticons")||!i.is("span, a"))return!0;var a,o,s,l=r.which;if(e.FE.KEYCODE.TAB==l){if(i.is("span.fr-emoticon")&&r.shiftKey||i.is("a")&&!r.shiftKey){var d=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(d,!!r.shiftKey)}if(!1!==a){var c=n.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");i.is("span.fr-emoticon")&&(c=c.not("span.fr-emoticon:not(:focus)")),o=c.index(i),o=r.shiftKey?((o-1)%c.length+c.length)%c.length:(o+1)%c.length,s=c.get(o),t.events.disableBlur(),s.focus(),a=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(i.is("span.fr-emoticon")){var f=i.parent().find("span.fr-emoticon");o=f.index(i);var p=t.opts.emoticonsStep,u=Math.floor(f.length/p),h=o%p,g=Math.floor(o/p)*p+h,m=u*p;e.FE.KEYCODE.ARROW_UP==l?g=((g-p)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==l?g=(g+p)%m:e.FE.KEYCODE.ARROW_LEFT==l?g=((g-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==l&&(g=(g+1)%m),s=e(f.get(g)),t.events.disableBlur(),s.focus(),a=!1}}else e.FE.KEYCODE.ENTER==l&&(i.is("a")?i[0].click():t.button.exec(i),a=!1);return!1===a&&(r.preventDefault(),r.stopPropagation()),a},!0)}return{_init:function(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),n=0;n<e.length;n++)e[n].className+=" fr-deletable"};n(),t.events.on("html.set",n),t.events.on("keydown",function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var i=t.selection.ranges(0),a=r();t.node.hasClass(a,"fr-emoticon-img")&&a&&(0===i.startOffset&&t.selection.element()===a?e(a).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(a).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(n){for(var i=t.el.querySelectorAll(".fr-emoticon"),a=0;a<i.length;a++)void 0!==i[a].textContent&&0===i[a].textContent.replace(/\u200B/gi,"").length&&e(i[a]).remove();if(!(n.which>=e.FE.KEYCODE.ARROW_LEFT&&n.which<=e.FE.KEYCODE.ARROW_DOWN)){var o=r();t.node.hasClass(o,"fr-emoticon-img")&&(e(o).append(e.FE.MARKERS),t.selection.restore())}})},insert:function(n,i){var a=r(),o=t.selection.ranges(0);a?(0===o.startOffset&&t.selection.element()===a?e(a).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):o.startOffset>0&&t.selection.element()===a&&o.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&e(a).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore(),t.html.insert('<span class="fr-emoticon fr-deletable'+(i?" fr-emoticon-img":"")+'"'+(i?' style="background: url('+i+');"':"")+">"+(i?"&nbsp;":n)+"</span>&nbsp;"+e.FE.MARKERS,!0)):t.html.insert('<span class="fr-emoticon fr-deletable'+(i?" fr-emoticon-img":"")+'"'+(i?' style="background: url('+i+');"':"")+">"+(i?"&nbsp;":n)+"</span>&nbsp;",!0)},showEmoticonsPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),r=t.popups.get("emoticons");if(r||(r=n()),!r.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var i=e.offset().left+e.outerWidth()/2,a=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",i,a,e.outerHeight())}},hideEmoticonsPopup:function(){t.popups.hide("emoticons")},back:function(){t.popups.hide("emoticons"),t.toolbar.showInline()}}},e.FE.DefineIcon("emoticons",{NAME:"smile-o"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),e.extend(e.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.FE.PLUGINS.entities=function(t){function n(e){var t=e.textContent;if(t.match(a)){for(var n="",r=0;r<t.length;r++)o[t[r]]?n+=o[t[r]]:n+=t[r];e.textContent=n}}function r(e){if(e&&["STYLE","SCRIPT","svg","IFRAME"].indexOf(e.tagName)>=0)return!0;for(var i=t.node.contents(e),a=0;a<i.length;a++)i[a].nodeType==Node.TEXT_NODE?n(i[a]):r(i[a]);e.nodeType==Node.TEXT_NODE&&n(e)}function i(e){return 0===e.length?"":t.clean.exec(e,r).replace(/\&amp;/g,"&")}var a,o;return{_init:function(){t.opts.htmlSimpleAmpersand||(t.opts.entities=t.opts.entities+"&amp;");var n=e("<div>").html(t.opts.entities).text(),r=t.opts.entities.split(";");o={},a="";for(var s=0;s<n.length;s++){var l=n.charAt(s);o[l]=r[s]+";",a+="\\"+l+(s<n.length-1?"|":"")}a=new RegExp("("+a+")","g"),t.events.on("html.get",i,!0)}}},e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function n(){var e=t.popups.get("file.insert");e||(e=v()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),i(t.language.translate("Uploading"),0)}function r(e){var n=t.popups.get("file.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-file-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function i(e,n){var r=t.popups.get("file.insert");if(r){var i=r.find(".fr-file-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function a(e){n();var r=t.popups.get("file.insert").find(".fr-file-progress-bar-layer");r.addClass("fr-error");var i=r.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function o(e,n,r){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(n=t.selection.text()),t.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+n+"</a>");var i=t.$el.find("#fr-inserted-file");i.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),A(),t.events.trigger("file.inserted",[i,r])}function s(e){try{if(!1===t.events.trigger("file.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(p(S,e),!1)}catch(t){return p(R,e),!1}}function l(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return!1===t.events.trigger("file.uploadedToS3",[r,i,n],!0)?(t.edit.on(),!1):r}catch(e){return p(R,n),!1}}function d(e){var n=this.status,r=this.response,i=this.responseXML,a=this.responseText;try{if(t.opts.fileUploadToS3)if(201==n){var d=l(i);d&&o(d,e,r||i)}else p(R,r||i);else if(n>=200&&n<300){var c=s(a);c&&o(c.link,e,r||a)}else p(C,r||a)}catch(e){p(R,r||a)}}function c(){p(R,this.response||this.responseText||this.responseXML)}function f(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;i(t.language.translate("Uploading"),n)}}function p(e,n){t.edit.on(),a(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:L[e]},n])}function u(){t.edit.on(),r(!0)}function h(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("file.beforeUpload",[e]))return!1;var r=e[0];if(r.size>t.opts.fileMaxSize)return p(y),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(r.type.replace(/file\//g,""))<0)return p(_),!1;var i;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var a;if(!1!==t.opts.fileUploadToS3){i.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(r.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",r.type);for(a in t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(a)&&i.append(a,t.opts.fileUploadToS3.params[a])}for(a in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(a)&&i.append(a,t.opts.fileUploadParams[a]);i.append(t.opts.fileUploadParam,r);var o=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(o=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var s=t.core.getXHR(o,t.opts.fileUploadMethod);s.onload=function(){d.call(s,r.name)},s.onerror=c,s.upload.onprogress=f,s.onabort=u,n(),t.edit.off();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(i)}}}function g(n){t.events.$on(n,"dragover dragenter",".fr-file-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-file-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-file-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;i&&i.files&&(n.data("instance")||t).file.upload(i.files)},!0),t.helpers.isIOS()&&t.events.$on(n,"touchend",'.fr-file-upload-layer input[type="file"]',function(){e(this).trigger("click")}),t.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',function(){this.files&&(n.data("instance")||t).file.upload(this.files),e(this).val("")},!0)}function m(){r()}function v(e){if(e)return t.popups.onHide("file.insert",m),!0;var n="",r="",i={buttons:n='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>",upload_layer:r='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>',progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},a=t.popups.create("file.insert",i);return g(a),a}function E(e){t.node.hasClass(e,"fr-file")}function b(r){var i=r.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var a=i.files[0];if(a&&void 0!==a.type&&a.type.indexOf("image")<0&&(t.opts.fileAllowedTypes.indexOf(a.type)>=0||t.opts.fileAllowedTypes.indexOf("*")>=0)){t.markers.remove(),t.markers.insertAtPoint(r.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var o=t.popups.get("file.insert");return o||(o=v()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",r.originalEvent.pageX,r.originalEvent.pageY),n(),h(i.files),r.preventDefault(),r.stopPropagation(),!1}}}function T(){t.events.on("drop",b),t.events.$on(t.$win,"keydown",function(n){var r=n.which,i=t.popups.get("file.insert");i&&r==e.FE.KEYCODE.ESC&&i.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")})}function A(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),r=[];for(e=0;e<n.length;e++)r.push(n[e].getAttribute("href"));if(x)for(e=0;e<x.length;e++)r.indexOf(x[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[x[e]]);x=n}var S=2,C=3,R=4,y=5,_=6,L={};L[1]="File cannot be loaded from the passed link.",L[S]="No link in upload response.",L[C]="Error during file upload.",L[R]="Parsing response failed.",L[y]="File is too large.",L[_]="File file type is invalid.",L[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var x;return{_init:function(){T(),t.events.on("link.beforeRemove",E),t.$wp&&(A(),t.events.on("contentChanged",A)),v(!0)},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),n=t.popups.get("file.insert");if(n||(n=v()),r(),!n.hasClass("fr-active")){t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,a=e.offset().top+(t.opts.toolbarBottom?0:e.outerHeight());t.popups.show("file.insert",i,a,e.outerHeight())}},upload:h,insert:o,back:function(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()},hideProgressBar:r}},e.FE.DefineIcon("insertFile",{NAME:"file-o"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,function(e){return e.length>0})}function r(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n]==t[r])return[n,r];return null}function i(){var i=n(e(t.selection.element()).css("font-family")),a=[];for(var o in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(o)){var s=r(i,n(o));s&&a.push([o,s])}return 0===a.length?null:(a.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),a[0][0])}return{apply:function(e){t.format.applyStyle("font-family",e)},refreshOnShow:function(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+i()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?n.parent().scrollTop(r.offset().top-n.offset().top-(n.parent().outerHeight()/2-r.outerHeight()/2)):n.parent().scrollTop(0)},refresh:function(n){if(t.opts.fontFamilySelection){var r=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[i()]||r[0]||t.language.translate(t.opts.fontFamilyDefaultSelection))}}}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"}),e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){return{apply:function(e){t.format.applyStyle("font-size",e)},refreshOnShow:function(n,r){var i=e(t.selection.element()).css("font-size");r.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),r.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0);var a=r.find(".fr-dropdown-list"),o=r.find(".fr-active").parent();o.length?a.parent().scrollTop(o.offset().top-a.offset().top-(a.parent().outerHeight()/2-o.outerHeight()/2)):a.parent().scrollTop(0)},refresh:function(n){if(t.opts.fontSizeSelection){var r=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(r)}}}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var r=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+r+'px" title="'+r+'">'+r+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"}),e.extend(e.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),e.FE.PLUGINS.forms=function(t){function n(n){n.preventDefault(),t.selection.clear(),e(this).data("mousedown",!0)}function r(t){e(this).data("mousedown")&&(t.stopPropagation(),e(this).removeData("mousedown"),u=this,d(this)),t.preventDefault()}function i(){t.$el.find("input, textarea, button").removeData("mousedown")}function a(){e(this).removeData("mousedown")}function o(){t.events.$on(t.$el,t._mousedown,"input, textarea, button",n),t.events.$on(t.$el,t._mouseup,"input, textarea, button",r),t.events.$on(t.$el,"touchmove","input, textarea, button",a),t.events.$on(t.$el,t._mouseup,i),t.events.$on(t.$win,t._mouseup,i),p(!0)}function s(){return u||null}function l(){var e="";t.opts.formEditButtons.length>0&&(e='<div class="fr-buttons">'+t.button.buildList(t.opts.formEditButtons)+"</div>");var n={buttons:e},r=t.popups.create("forms.edit",n);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){s()&&t.popups.isVisible("forms.edit")&&d(s())}),r}function d(n){var r=t.popups.get("forms.edit");r||(r=l()),u=n;var i=e(n);t.popups.refresh("forms.edit"),t.popups.setContainer("forms.edit",t.$sc);var a=i.offset().left+i.outerWidth()/2,o=i.offset().top+i.outerHeight();t.popups.show("forms.edit",a,o,i.outerHeight())}function c(){var n=t.popups.get("forms.update"),r=s();if(r){var i=e(r);i.is("button")?n.find('input[type="text"][name="text"]').val(i.text()):n.find('input[type="text"][name="text"]').val(i.attr("placeholder"))}n.find('input[type="text"][name="text"]').trigger("change")}function f(){u=null}function p(e){if(e)return t.popups.onRefresh("forms.update",c),t.popups.onHide("forms.update",f),!0;var n="";t.opts.formUpdateButtons.length>=1&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.formUpdateButtons)+"</div>");var r="",i=0;r='<div class="fr-forms-text-layer fr-layer fr-active">',r+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++i+'"></div>';var a={buttons:n,text_layer:r+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++i+'" type="button">'+t.language.translate("Update")+"</button></div></div>"};return t.popups.create("forms.update",a)}var u;return{_init:function(){o(),t.events.$on(t.$el,"submit","form",function(e){return e.preventDefault(),!1})},updateInput:function(){var n=t.popups.get("forms.update"),r=s();if(r){var i=e(r),a=n.find('input[type="text"][name="text"]').val()||"";a.length&&(i.is("button")?i.text(a):i.attr("placeholder",a)),t.popups.hide("forms.update"),d(r)}},getInput:s,applyStyle:function(n,r,i){void 0===r&&(r=t.opts.formStyles),void 0===i&&(i=t.opts.formMultipleStyles);var a=s();if(!a)return!1;if(!i){var o=Object.keys(r);o.splice(o.indexOf(n),1),e(a).removeClass(o.join(" "))}e(a).toggleClass(n)},showUpdatePopup:function(){var n=s();if(n){var r=e(n),i=t.popups.get("forms.update");i||(i=p()),t.popups.isVisible("forms.update")||t.popups.refresh("forms.update"),t.popups.setContainer("forms.update",t.$sc);var a=r.offset().left+r.outerWidth()/2,o=r.offset().top+r.outerHeight();t.popups.show("forms.update",a,o,r.outerHeight())}},showEditPopup:d,back:function(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var e=s();e&&t.$wp&&("BUTTON"==e.tagName&&t.selection.restore(),d(e))}}},e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.DefineIcon("inputStyle",{NAME:"magic"}),e.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){var n=this.forms.getInput();n&&(this.forms.applyStyle(t),this.forms.showEditPopup(n))},refreshOnShow:function(t,n){var r=this.forms.getInput();if(r){var i=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}}}),e.FE.DefineIcon("inputEdit",{NAME:"edit"}),e.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),e.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.PLUGINS.fullscreen=function(t){function n(){return t.$box.hasClass("fr-fullscreen")}function r(){o=t.helpers.scrollTop(),t.$box.toggleClass("fr-fullscreen"),e("body:first").toggleClass("fr-fullscreen"),s=e('<div style="display: none;"></div>'),t.$box.after(s),t.helpers.isMobile()&&(t.$tb.data("parent",t.$tb.parent()),t.$tb.prependTo(t.$box),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy"))),l=t.opts.height,d=t.opts.heightMax,c=t.opts.zIndex,t.opts.height=t.o_win.innerHeight-(t.opts.toolbarInline?0:t.$tb.outerHeight()),t.opts.zIndex=9990,t.opts.heightMax=null,t.size.refresh(),t.opts.toolbarInline&&t.toolbar.showInline();for(var n=t.$box.parent();!n.is("body:first");)n.data("z-index",n.css("z-index")).data("overflow",n.css("overflow")).css("z-index","9990").css("overflow","visible"),n=n.parent();t.events.trigger("charCounter.update"),t.$win.trigger("scroll")}function i(){t.$box.toggleClass("fr-fullscreen"),e("body:first").toggleClass("fr-fullscreen"),t.$tb.prependTo(t.$tb.data("parent")),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy")),t.opts.height=l,t.opts.heightMax=d,t.opts.zIndex=c,t.size.refresh(),e(t.o_win).scrollTop(o),t.opts.toolbarInline&&t.toolbar.showInline(),t.events.trigger("charCounter.update"),t.opts.toolbarSticky&&t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset).data("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset).data("top",t.opts.toolbarStickyOffset));for(var n=t.$box.parent();!n.is("body:first");)n.data("z-index")&&(n.css("z-index",""),n.css("z-index")!=n.data("z-index")&&n.css("z-index",n.data("z-index")),n.removeData("z-index")),n.data("overflow")?(n.css("overflow",""),n.css("overflow")!=n.data("overflow")&&n.css("overflow",n.data("overflow")),n.removeData("overflow")):(n.css("overflow",""),n.removeData("overflow")),n=n.parent();t.$win.trigger("scroll")}function a(e){var r=n();e.toggleClass("fr-active",r).attr("aria-pressed",r),e.find("> *:not(.fr-sr-only)").replaceWith(r?t.icon.create("fullscreenCompress"):t.icon.create("fullscreen"))}var o,s,l,d,c;return{_init:function(){if(!t.$wp)return!1;t.events.$on(e(t.o_win),"resize",function(){n()&&(i(),r())}),t.events.on("toolbar.hide",function(){if(n()&&t.helpers.isMobile())return!1}),t.events.on("destroy",function(){n()&&i()},!0)},toggle:function(){n()?i():r(),a(t.$tb.find('.fr-command[data-cmd="fullscreen"]'))},refresh:a,isActive:n}},e.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.FE.DefineIcon("fullscreen",{NAME:"expand"}),e.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),e.extend(e.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert link"},{val:"OSkeyP",desc:"Insert image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select all"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Indent"},{val:"OSkey[",desc:"Outdent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),e.FE.PLUGINS.help=function(t){function n(){for(var n='<div class="fr-help-modal">',r=0;r<e.FE.DEFAULTS.helpSets.length;r++){var i=e.FE.DEFAULTS.helpSets[r],a="<table>";a+="<thead><tr><th>"+i.title+"</th></tr></thead>",a+="<tbody>";for(var o=0;o<i.commands.length;o++){var s=i.commands[o];a+="<tr>",a+="<td>"+s.desc+"</td>",a+="<td>"+s.val.replace("OSkey",t.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",a+="</tr>"}n+=a+="</tbody></table>"}return n+="</div>"}var r,i,a,o="help";return{_init:function(){},show:function(){if(!r){var s=n(),l=t.modals.create(o,"<h4>Shortcuts</h4>",s);r=l.$modal,i=l.$head,a=l.$body,t.events.$on(e(t.o_win),"resize",function(){t.modals.resize(o)})}t.modals.show(o),t.modals.resize(o)},hide:function(){t.modals.hide(o)}}},e.FroalaEditor.DefineIcon("help",{NAME:"question"}),e.FE.RegisterShortcut(e.FE.KEYCODE.SLASH,"help",null,"/"),e.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),le&&e.val(le.attr("src")),e.trigger("change")}function r(){var e=t.popups.get("image.edit");if(e||(e=g()),e){t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var n=le.offset().left+le.outerWidth()/2,r=le.offset().top+le.outerHeight();t.popups.show("image.edit",n,r,le.outerHeight())}}function i(){v()}function a(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+re(e)[0]),e.addClass("fr-di"+ie(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function o(e){ne(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":re(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function s(){for(var n="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&a(i),t.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&o(i),t.opts.iframe&&i.on("load",t.size.syncIframe)}}function l(n){void 0===n&&(n=!0);var r,i=Array.prototype.slice.call(t.el.querySelectorAll("img")),a=[];for(r=0;r<i.length;r++)a.push(i[r].getAttribute("src")),e(i[r]).toggleClass("fr-draggable",t.opts.imageMove),""===i[r].getAttribute("class")&&i[r].removeAttribute("class"),""===i[r].getAttribute("style")&&i[r].removeAttribute("style");if(Te)for(r=0;r<Te.length;r++)a.indexOf(Te[r].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Te[r])]);if(Te&&n){var o=[];for(r=0;r<Te.length;r++)o.push(Te[r].getAttribute("src"));for(r=0;r<i.length;r++)o.indexOf(i[r].getAttribute("src"))<0&&t.events.trigger("image.loaded",[e(i[r])])}Te=i}function d(){if(de||H(),!le)return!1;var e=t.$wp||t.$sc;e.append(de),de.data("instance",t);var n=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),r=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);r-=t.helpers.getPX(e.css("border-left-width")),n-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&t.$sc.is("body")&&(n=0,r=0),de.css("top",(t.opts.iframe?le.offset().top:le.offset().top+n)-1).css("left",(t.opts.iframe?le.offset().left:le.offset().left+r)-1).css("width",le.get(0).getBoundingClientRect().width).css("height",le.get(0).getBoundingClientRect().height).addClass("fr-active")}function c(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function f(n){if(!t.core.sameInstance(de))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep();var r=n.pageX||n.originalEvent.touches[0].pageX;if("mousedown"==n.type){var i=t.$oel.get(0).ownerDocument,a=i.defaultView||i.parentWindow,o=!1;try{o=a.location!=a.parent.location}catch(e){}o&&a.frameElement&&(r+=t.helpers.getPX(e(a.frameElement).offset().left)+a.frameElement.clientLeft)}(ce=e(this)).data("start-x",r),ce.data("start-width",le.width()),ce.data("start-height",le.height());var s=le.width();if(t.opts.imageResizeWithPercent){var l=le.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;le.css("width",(s/e(l).outerWidth()*100).toFixed(2)+"%")}else le.css("width",s);fe.show(),t.popups.hideAll(),ee()}function p(n){if(!t.core.sameInstance(de))return!0;var r;if(ce&&le){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var i=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!i)return!1;var a=i-ce.data("start-x"),o=ce.data("start-width");if((ce.hasClass("fr-hnw")||ce.hasClass("fr-hsw"))&&(a=0-a),t.opts.imageResizeWithPercent){var s=le.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;o=((o+a)/e(s).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(o=Math.round(o)),le.css("width",o+"%"),(r=(t.helpers.getPX(le.css("width"))/e(s).outerWidth()*100).toFixed(2))!==o&&le.css("width",r+"%"),le.css("height","").removeAttr("height")}else o+a>=t.opts.imageMinWidth&&le.css("width",o+a),(r=t.helpers.getPX(le.css("width")))!==o+a&&le.css("width",r),(le.attr("style")||"").match(/(^height:)|(; *height:)/)&&le.css("height",ce.data("start-height")*le.width()/ce.data("start-width"));d(),t.events.trigger("image.resize",[se()])}}function u(e){if(!t.core.sameInstance(de))return!0;if(ce&&le){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;ce=null,fe.hide(),d(),r(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[se()])}}function h(e,n,r){t.edit.on(),le&&le.addClass("fr-error"),b(t.language.translate("Something went wrong. Please try again.")),!le&&r&&Y(r),t.events.trigger("image.error",[{code:e,message:be[e]},n,r])}function g(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){le&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),T(le))}),!0;var n="";if(t.opts.imageEditButtons.length>0){n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons);var r={buttons:n+="</div>"};return t.popups.create("image.edit",r)}return!1}function m(e){var n=t.popups.get("image.insert");if(n||(n=F()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),le){t.popups.setContainer("image.insert",t.$sc);var r=le.offset().left+le.width()/2,i=le.offset().top+le.height();t.popups.show("image.insert",r,i,le.outerHeight())}void 0===e&&E(t.language.translate("Uploading"),0)}function v(e){var n=t.popups.get("image.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&le){var r=le;Z(!0),t.selection.setAfter(r.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function E(e,n){var r=t.popups.get("image.insert");if(r){var i=r.find(".fr-image-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function b(e){m();var n=t.popups.get("image.insert").find(".fr-image-progress-bar-layer");n.addClass("fr-error");var r=n.find("h3");r.text(e),t.events.disableBlur(),r.focus()}function T(e){Q.call(e.get(0))}function A(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),T(n),t.events.trigger("image.loaded",[n])}function S(e,n,r,i,a){t.edit.off(),E(t.language.translate("Loading image")),n&&(e=t.helpers.sanitizeURL(e));var o=new Image;o.onload=function(){var n,o;if(i){t.undo.canDo()||i.hasClass("fr-uploading")||t.undo.saveStep();var s=i.data("fr-old-src");i.data("fr-image-pasted")&&(s=null),t.$wp?((n=i.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),s&&i.attr("src",s),i.replaceWith(n)):n=i;for(var d=n.get(0).attributes,c=0;c<d.length;c++){var f=d[c];0===f.nodeName.indexOf("data-")&&n.removeAttr(f.nodeName)}if(void 0!==r)for(o in r)r.hasOwnProperty(o)&&"link"!=o&&n.attr("data-"+o,r[o]);n.on("load",A),n.attr("src",e),t.edit.on(),l(!1),t.undo.saveStep(),t.$el.blur(),t.events.trigger(s?"image.replaced":"image.inserted",[n,a])}else n=x(e,r,A),l(!1),t.undo.saveStep(),t.events.trigger("image.inserted",[n,a])},o.onerror=function(){h(ue)},m(t.language.translate("Loading image")),o.src=e}function C(e){try{if(!1===t.events.trigger("image.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:(h(he,e),!1)}catch(t){return h(me,e),!1}}function R(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return!1===t.events.trigger("image.uploadedToS3",[r,i,n],!0)?(t.edit.on(),!1):r}catch(e){return h(me,n),!1}}function y(e){E(t.language.translate("Loading image"));var n=this.status,r=this.response,i=this.responseXML,a=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var o=R(i);o&&S(o,!1,[],e,r||i)}else h(me,r||i,e);else if(n>=200&&n<300){var s=C(a);s&&S(s.link,!1,s,e,r||a)}else h(ge,r||a,e)}catch(t){h(me,r||a,e)}}function _(){h(me,this.response||this.responseText||this.responseXML)}function L(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;E(t.language.translate("Uploading"),n)}}function x(n,r,i){var a,o="";if(r&&void 0!==r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&(o+=" data-"+a+'="'+r[a]+'"');var s=t.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+n+'"'+o+(s?' style="width: '+s+';"':"")+">");ne(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",i),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert();var d=t.$el.find(".fr-marker");return d.length?(d.parent().is("hr")&&d.parent().after(d),t.node.isLastSibling(d)&&d.parent().hasClass("fr-deletable")&&d.insertAfter(d.parent()),d.replaceWith(l)):t.$el.append(l),t.html.wrap(),t.selection.clear(),l}function w(){t.edit.on(),v(!0)}function O(n,r,i,a){function o(){var i=e(this);i.off("load"),i.addClass("fr-uploading"),i.next().is("br")&&i.next().remove(),t.placeholder.refresh(),i.is(a)||T(i),d(),m(),t.edit.off(),n.onload=function(){y.call(n,i)},n.onerror=_,n.upload.onprogress=L,n.onabort=w,i.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var s,l=new FileReader;l.addEventListener("load",function(){var e=l.result;if(l.result.indexOf("svg+xml")<0){for(var n=atob(l.result.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"image/jpeg"}))}a?(a.on("load",o),t.edit.on(),t.undo.saveStep(),a.data("fr-old-src",a.attr("src")),a.attr("src",e)):s=x(e,null,o)},!1),l.readAsDataURL(i)}function N(e,n){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("image.beforeUpload",[e]))return!1;var r=e[0];if(r.name||(r.name=(new Date).getTime()+".jpg"),r.size>t.opts.imageMaxSize)return h(ve),!1;if(t.opts.imageAllowedTypes.indexOf(r.type.replace(/image\//g,""))<0)return h(Ee),!1;var i;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var a;if(!1!==t.opts.imageUploadToS3){i.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(r.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",r.type);for(a in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(a)&&i.append(a,t.opts.imageUploadToS3.params[a])}for(a in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(a)&&i.append(a,t.opts.imageUploadParams[a]);i.append(t.opts.imageUploadParam,r,r.name);var o=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(o=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket),O(t.core.getXHR(o,t.opts.imageUploadMethod),i,r,n||le)}}}function I(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-image-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var a=n.data("instance")||t;a.events.disableBlur(),a.image.upload(i.files),a.events.enableBlur()}}),t.helpers.isIOS()&&t.events.$on(n,"touchend",'.fr-image-upload-layer input[type="file"]',function(){e(this).trigger("click")}),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.image.upload(this.files)}e(this).val("")})}function k(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var i=r.files[0];if(i&&i.type&&-1!==i.type.indexOf("image")){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),0===t.$el.find(".fr-marker").length&&t.selection.setAtEnd(t.el),t.popups.hideAll();var a=t.popups.get("image.insert");a||(a=F()),t.popups.setContainer("image.insert",t.$sc);var o=n.originalEvent.pageX,s=n.originalEvent.pageY;return t.opts.iframe&&(s+=t.$iframe.offset().top,o+=t.$iframe.offset().left),t.popups.show("image.insert",o,s),m(),t.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))>=0?(Z(!0),N(r.files)):h(Ee),n.preventDefault(),n.stopPropagation(),!1}}}function D(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;t.helpers.isMobile()||t.selection.clear(),pe=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||"touchstart"==n.type||n.preventDefault(),n.stopPropagation()}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;pe&&(pe=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur()))}),t.events.on("keyup",function(n){if(n.shiftKey&&""===t.selection.text().replace(/\n/g,"")){var r=t.selection.element(),i=t.selection.endElement();r&&"IMG"==r.tagName?T(e(r)):i&&"IMG"==i.tagName&&T(e(i))}},!0),t.events.on("drop",k),t.events.on("mousedown window.mousedown",J),t.events.on("window.touchmove",ee),t.events.on("mouseup window.mouseup",function(){if(le)return Z(),!1;ee()}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&Z()}),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){pe=!1,Z(!0)}),t.events.on("modals.hide",function(){le&&(oe(),t.selection.clear())})}function F(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",i),!0;var r,a="";t.opts.imageInsertButtons.length>1&&(a='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var o=t.opts.imageInsertButtons.indexOf("imageUpload"),s=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";o>=0&&(r=" fr-active",s>=0&&o>s&&(r=""),l='<div class="fr-image-upload-layer'+r+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var d="";s>=0&&(r=" fr-active",o>=0&&s>o&&(r=""),d='<div class="fr-image-by-url-layer'+r+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var c={buttons:a,upload_layer:l,by_url_layer:d,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},f=t.popups.create("image.insert",c);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){le&&t.popups.isVisible("image.insert")&&ae()}),I(f),f}function M(){le&&t.popups.get("image.alt").find("input").val(le.attr("alt")||"").trigger("change")}function $(){var e=t.popups.get("image.alt");e||(e=B()),v(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var n=le.offset().left+le.width()/2,r=le.offset().top+le.height();t.popups.show("image.alt",n,r,le.outerHeight())}function B(e){if(e)return t.popups.onRefresh("image.alt",M),!0;var n="",r="",i={buttons:n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>",alt_layer:r='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},a=t.popups.create("image.alt",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){le&&t.popups.isVisible("image.alt")&&$()}),a}function P(){if(le){var e=t.popups.get("image.size");e.find('input[name="width"]').val(le.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(le.get(0).style.height).trigger("change")}}function K(){var e=t.popups.get("image.size");e||(e=U()),v(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var n=le.offset().left+le.width()/2,r=le.offset().top+le.height();t.popups.show("image.size",n,r,le.outerHeight())}function U(e){if(e)return t.popups.onRefresh("image.size",P),!0;var n="",r="",i={buttons:n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>",size_layer:r='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},a=t.popups.create("image.size",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){le&&t.popups.isVisible("image.size")&&K()}),a}function W(e,t,n,r){return e.pageX=t,f.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),p.call(this,e),u.call(this,e),++r}function H(){var n;if(t.shared.$image_resizer?(de=t.shared.$image_resizer,fe=t.shared.$img_overlay,t.events.on("destroy",function(){de.removeClass("fr-active").appendTo(e("body:first"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),de=t.shared.$image_resizer,t.events.$on(de,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&(de.append(c("nw")+c("ne")+c("sw")+c("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),fe=t.shared.$img_overlay,n=de.get(0).ownerDocument,e(n).find("body:first").append(fe))),t.events.on("shared.destroy",function(){de.html("").removeData().remove(),de=null,t.opts.imageResize&&(fe.remove(),fe=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){le&&!le.hasClass("fr-uploading")?Z(!0):le&&(d(),ae(),m(!1))}),t.opts.imageResize){n=de.get(0).ownerDocument,t.events.$on(de,t._mousedown,".fr-handler",f),t.events.$on(e(n),t._mousemove,p),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,u),t.events.$on(fe,"mouseleave",u);var r=1,i=null,a=0;t.events.on("keydown",function(n){if(le){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-a>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&o&&!n.altKey?r=W.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&o&&!n.altKey?r=W.call(this,n,2,-1,r):t.keys.ctrlKey(n)||s!=e.FE.KEYCODE.ENTER||(le.before("<br>"),T(le)),i=s,a=n.timeStamp}},!0),t.events.on("keyup",function(){r=1})}}function Y(n){(n=n||le)&&!1!==t.events.trigger("image.beforeRemove",[n])&&(t.popups.hideAll(),oe(),Z(!0),t.undo.canDo()||t.undo.saveStep(),n.get(0)==t.el?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function z(n){var r=n.which;if(le&&(r==e.FE.KEYCODE.BACKSPACE||r==e.FE.KEYCODE.DELETE))return n.preventDefault(),n.stopPropagation(),Y(),!1;if(le&&r==e.FE.KEYCODE.ESC){var i=le;return Z(!0),t.selection.setAfter(i.get(0)),t.selection.restore(),n.preventDefault(),!1}if(le&&(r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT)){var a=le.get(0);return Z(!0),r==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(a):t.selection.setAfter(a),t.selection.restore(),n.preventDefault(),!1}return le&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),n.stopPropagation(),!1):void 0}function G(e){if(e&&"IMG"==e.tagName)t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),r=0;r<n.length;r++)G(n[r])}function V(n){if(!1===t.events.trigger("image.beforePasteUpload",[n]))return!1;le=e(n),d(),r(),ae(),m(),t.edit.off();for(var i=atob(e(n).attr("src").split(",")[1]),a=[],o=0;o<i.length;o++)a.push(i.charCodeAt(o));N([new Blob([new Uint8Array(a)],{type:"image/jpeg"})],le)}function X(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(n,r){if(t.opts.imagePasteProcess){var i=t.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=t.opts.imageResizeWithPercent?"%":"px"),e(r).css("width",i).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===r.src.indexOf("data:"))V(r);else if(0===r.src.indexOf("blob:")){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var e=t.o_doc.createElement("CANVAS"),n=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,n.drawImage(this,0,0),r.src=e.toDataURL("image/png"),V(r)},a.src=r.src}else 0!==r.src.indexOf("http")||0===r.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(r).remove(),t.selection.restore()):e(r).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function q(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var n=e.clipboardData.items[0].getAsFile();if(n){var r=new FileReader;return r.onload=function(e){var n=e.target.result,r=t.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+(r?' style="width: '+r+';"':"")+">"),t.events.trigger("paste.after")},r.readAsDataURL(n),!1}}}function j(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function Q(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(n&&"touchend"==n.type&&Ae)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),le=e(this),t.browser.msie||oe(),d(),r(),t.browser.msie||t.selection.clear(),t.helpers.isIOS()&&(t.events.disableBlur(),t.$el.blur()),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function Z(e){le&&(te()||!0===e)&&(t.toolbar.enable(),de.removeClass("fr-active"),t.popups.hide("image.edit"),le=null,ee())}function J(){Se=!0}function ee(){Se=!1}function te(){return Se}function ne(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),r&&e.addClass("fr-fi"+r[0]),n&&e.addClass("fr-di"+n[0])):"inline"==n?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==r?e.css({float:"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)"}):"left"==r?e.css({float:"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"}):e.css({float:"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"})):"block"==n&&(e.css({display:"block",float:"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto"}),"left"==r?e.css({marginLeft:0}):"right"==r&&e.css({marginRight:0}))}function re(e){if(void 0===e&&(e=le),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ie(e){void 0===e&&(e=le);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ae(){var e=t.popups.get("image.insert");e||(e=F()),t.popups.isVisible("image.insert")||(v(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var n=le.offset().left+le.width()/2,r=le.offset().top+le.height();t.popups.show("image.insert",n,r,le.outerHeight())}function oe(){if(le){t.selection.clear();var e=t.doc.createRange();e.selectNode(le.get(0)),t.selection.get().addRange(e)}}function se(){return le}var le,de,ce,fe,pe=!1,ue=1,he=2,ge=3,me=4,ve=5,Ee=6,be={};be[ue]="Image cannot be loaded from the passed link.",be[he]="No link in upload response.",be[ge]="Error during file upload.",be[me]="Parsing response failed.",be[ve]="File is too large.",be[Ee]="Image file type is invalid.",be[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Te,Ae,Se=!1;return{_init:function(){if(D(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',Q),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){Ae=!1}),t.events.$on(t.$el,"touchmove",function(){Ae=!0})),t.$wp?(t.events.on("window.keydown keydown",z,!0),t.events.on("keyup",function(t){if(le&&t.which==e.FE.KEYCODE.ENTER)return!1},!0)):t.events.$on(t.$win,"keydown",z),t.events.on("toolbar.esc",function(){if(le){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=le;Z(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("toolbar.focusEditor",function(){if(le)return!1},!0),t.events.on("window.cut window.copy",function(e){le&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length&&(oe(),t.paste.saveCopiedText(le.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){T(le)}):(Z(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)))},!0),t.browser.msie&&t.events.on("keydown",function(n){if(!t.selection.isCollapsed()||!le)return!0;var r=n.which;r==e.FE.KEYCODE.C&&t.keys.ctrlKey(n)?t.events.trigger("window.copy"):r==e.FE.KEYCODE.X&&t.keys.ctrlKey(n)&&t.events.trigger("window.cut")}),t.events.$on(e(t.o_win),"keydown",function(t){var n=t.which;if(le&&n==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),t.events.$on(t.$win,"keydown",function(t){var n=t.which;le&&le.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&le.trigger("abortUpload")}),t.events.on("destroy",function(){le&&le.hasClass("fr-uploading")&&le.trigger("abortUpload")}),t.events.on("paste.before",q),t.events.on("paste.beforeCleanup",j),t.events.on("paste.after",X),t.events.on("html.set",s),t.events.on("html.inserted",s),s(),t.events.on("destroy",function(){Te=[]}),t.events.on("html.processGet",G),t.opts.imageOutputSize){var n;t.events.on("html.beforeGet",function(){n=t.el.querySelectorAll("img");for(var r=0;r<n.length;r++){var i=n[r].style.width||e(n[r]).width(),a=n[r].style.height||e(n[r]).height();i&&n[r].setAttribute("width",(""+i).replace(/px/,"")),a&&n[r].setAttribute("height",(""+a).replace(/px/,""))}})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(l(),t.events.on("contentChanged",l)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){le&&T(le)},100)}),g(!0),F(!0),U(!0),B(!0),t.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Y(e),!1})},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=F()),v(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")},showLayer:function(e){var n,r,i=t.popups.get("image.insert");if(le||t.opts.toolbarInline)le&&(r=le.offset().top+le.outerHeight());else{var a=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=a.offset().left+a.outerWidth()/2,r=a.offset().top+(t.opts.toolbarBottom?10:a.outerHeight()-10)}!le&&t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,r,le?le.outerHeight():0),t.accessibility.focusPopup(i)},refreshUploadButton:function(e){t.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function(e){t.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:N,insertByURL:function(){var e=t.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val().length>0&&(m(),E(t.language.translate("Loading image")),S(e.val(),!0,[],le),e.val(""),e.blur())},align:function(e){le.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?le.addClass("fr-fil"):"right"==e&&le.addClass("fr-fir"):ne(le,ie(),e),oe(),d(),r(),t.selection.clear()},refreshAlign:function(e){le&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+re()))},refreshAlignOnShow:function(e,t){le&&t.find('.fr-command[data-param1="'+re()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(e){le.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?le.addClass("fr-dii"):"block"==e&&le.addClass("fr-dib"):ne(le,e,re()),oe(),d(),r(),t.selection.clear()},refreshDisplayOnShow:function(e,t){le&&t.find('.fr-command[data-param1="'+ie()+'"]').addClass("fr-active").attr("aria-selected",!0)},replace:ae,back:function(){le?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),T(le)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())},get:se,insert:S,showProgressBar:m,remove:Y,hideProgressBar:v,applyStyle:function(e,n,r){if(void 0===n&&(n=t.opts.imageStyles),void 0===r&&(r=t.opts.imageMultipleStyles),!le)return!1;if(!r){var i=Object.keys(n);i.splice(i.indexOf(e),1),le.removeClass(i.join(" "))}"object"==typeof n[e]?(le.removeAttr("style"),le.css(n[e].style)):le.toggleClass(e),T(le)},showAltPopup:$,showSizePopup:K,setAlt:function(e){if(le){var n=t.popups.get("image.alt");le.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),T(le)}},setSize:function(e,n){if(le){var r=t.popups.get("image.size");e=e||r.find('input[name="width"]').val()||"",n=n||r.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;e.match(i)?le.css("width",e):le.css("width",""),n.match(i)?le.css("height",n):le.css("height",""),r.find("input:focus").blur(),T(le)}},exitEdit:Z,edit:T}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.imageAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("image-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&(r=r.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(r)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var r=this.image.get();r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),e.extend(e.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.FE.PLUGINS.imageManager=function(t){function n(){var t=e(window).outerWidth();return t<768?2:t<1200?3:4}function r(){_.empty();for(var e=0;e<I;e++)_.append('<div class="fr-list-column"></div>')}function i(){y.show(),_.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?e.ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e,n,r){t.events.trigger("imageManager.imagesLoaded",[e]),a(e,r.response),y.hide()}).fail(function(){var e=this.xhr();m(F,e.response||e.responseText)}):m(M)}function a(e,t){try{_.find(".fr-list-column").empty(),w=0,O=0,N=0,x=e,o()}catch(e){m($,t)}}function o(){if(O<x.length&&(_.outerHeight()<=R.outerHeight()+t.opts.imageManagerScrollOffset||R.scrollTop()+t.opts.imageManagerScrollOffset>_.outerHeight()-R.outerHeight())){w++;for(var e=t.opts.imageManagerPageSize*(w-1);e<Math.min(x.length,t.opts.imageManagerPageSize*w);e++)s(x[e])}}function s(n){var r=new Image,i=e('<div class="fr-image-container fr-empty fr-image-'+N+++'" data-loading="'+t.language.translate("Loading")+'.." data-deleting="'+t.language.translate("Deleting")+'..">');f(!1),r.onload=function(){i.height(Math.floor(i.width()/r.width*r.height));var a=e("<img/>");if(n.thumb)a.attr("src",n.thumb);else{if(m(B,n),!n.url)return m(P,n),!1;a.attr("src",n.url)}if(n.url&&a.attr("data-url",n.url),n.tag)if(C.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),C.find(".fr-modal-tags").show(),n.tag.indexOf(",")>=0){for(var s=n.tag.split(","),l=0;l<s.length;l++)s[l]=s[l].trim(),0===L.find('a[title="'+s[l]+'"]').length&&L.append('<a role="button" title="'+s[l]+'">'+s[l]+"</a>");a.attr("data-tag",s.join())}else 0===L.find('a[title="'+n.tag.trim()+'"]').length&&L.append('<a role="button" title="'+n.tag.trim()+'">'+n.tag.trim()+"</a>"),a.attr("data-tag",n.tag.trim());n.name&&a.attr("alt",n.name);for(var p in n)n.hasOwnProperty(p)&&"thumb"!=p&&"url"!=p&&"tag"!=p&&a.attr("data-"+p,n[p]);i.append(a).append(e(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(e(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),L.find(".fr-selected-tag").each(function(e,t){T(a,t.text)||i.hide()}),a.on("load",function(){i.removeClass("fr-empty"),i.height("auto"),O++,c(d(parseInt(a.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),f(!1),O%t.opts.imageManagerPageSize==0&&o()}),t.events.trigger("imageManager.imageLoaded",[a])},r.onerror=function(){O++,i.remove(),c(d(parseInt(i.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),m(D,n),O%t.opts.imageManagerPageSize==0&&o()},r.src=n.thumb||n.url,l().append(i)}function l(){var t,n;return _.find(".fr-list-column").each(function(r,i){var a=e(i);0===r?(n=a.outerHeight(),t=a):a.outerHeight()<n&&(n=a.outerHeight(),t=a)}),t}function d(t){void 0===t&&(t=0);for(var n=[],r=N-1;r>=t;r--){var i=_.find(".fr-image-"+r);i.length&&(n.push(i),e('<div id="fr-image-hidden-container">').append(i),_.find(".fr-image-"+r).remove())}return n}function c(e){for(var t=e.length-1;t>=0;t--)l().append(e[t])}function f(e){if(void 0===e&&(e=!0),!S.is(":visible"))return!0;var i=n();if(i!=I){I=i;var a=d();r(),c(a)}t.modals.resize(k),e&&o()}function p(e){var t={},n=e.data();for(var r in n)n.hasOwnProperty(r)&&"url"!=r&&"tag"!=r&&(t[r]=n[r]);return t}function u(n){var r=e(n.currentTarget).siblings("img"),i=S.data("instance")||t,a=S.data("current-image");if(t.modals.hide(k),i.image.showProgressBar(),a)a.data("fr-old-src",a.attr("src")),a.trigger("click");else{i.events.focus(!0),i.selection.restore();var o=i.position.getBoundingRect(),s=o.left+o.width/2+e(t.doc).scrollLeft(),l=o.top+o.height+e(t.doc).scrollTop();i.popups.setContainer("image.insert",t.$sc),i.popups.show("image.insert",s,l)}i.image.insert(r.data("url"),!1,p(r),a)}function h(){S.find("#fr-modal-tags > a").each(function(){0===S.find('#fr-image-list [data-tag*="'+e(this).text()+'"]').length&&e(this).removeClass("fr-selected-tag").hide()}),E()}function g(n){var r=e(n.currentTarget).siblings("img"),i=t.language.translate("Are you sure? Image will be deleted.");confirm(i)&&(t.opts.imageManagerDeleteURL?!1!==t.events.trigger("imageManager.beforeDeleteImage",[r])&&(r.parent().addClass("fr-image-deleting"),e.ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:e.extend(e.extend({src:r.attr("src")},p(r)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){t.events.trigger("imageManager.imageDeleted",[e]);var n=d(parseInt(r.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);r.parent().remove(),c(n),h(),f(!0)}).fail(function(){var e=this.xhr();m(K,e.response||e.responseText)})):m(U))}function m(n,r){10<=n&&n<20?y.hide():20<=n&&n<30&&e(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:n,message:W[n]},r])}function v(){var e=C.find(".fr-modal-head-line").outerHeight(),t=L.outerHeight();C.toggleClass("fr-show-tags"),C.hasClass("fr-show-tags")?(C.css("height",e+t),L.find("a").css("opacity",1)):(C.css("height",e),L.find("a").css("opacity",0))}function E(){var t=L.find(".fr-selected-tag");t.length>0?(_.find("img").parent().show(),t.each(function(t,n){_.find("img").each(function(t,r){var i=e(r);T(i,n.text)||i.parent().hide()})})):_.find("img").parent().show(),c(d()),o()}function b(n){n.preventDefault();var r=e(n.currentTarget);r.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&r.siblings("a").removeClass("fr-selected-tag"),E()}function T(e,t){for(var n=(e.attr("data-tag")||"").split(","),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1}function A(){y=S.find("#fr-preloader"),_=S.find("#fr-image-list"),L=S.find("#fr-modal-tags"),I=n(),r(),C.css("height",C.find(".fr-modal-head-line").outerHeight()),t.events.$on(e(t.o_win),"resize",function(){f(!!x)}),t.helpers.isMobile()&&(t.events.bindClick(_,"div.fr-image-container",function(t){S.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),e(t.currentTarget).addClass("fr-mobile-selected")}),S.on(t._mousedown,function(){S.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),t.events.bindClick(_,".fr-insert-img",u),t.events.bindClick(_,".fr-delete-img",g),S.on(t._mousedown+" "+t._mouseup,function(e){e.stopPropagation()}),S.on(t._mousedown,"*",function(){t.events.disableBlur()}),R.on("scroll",o),t.events.bindClick(S,"i#fr-modal-more-"+t.sid,v),t.events.bindClick(L,"a",b)}var S,C,R,y,_,L,x,w,O,N,I,k="image_manager",D=10,F=11,M=12,$=13,B=14,P=15,K=21,U=22,W={};return W[D]="Image cannot be loaded from the passed link.",W[F]="Error during load images request.",W[M]="Missing imageManagerLoadURL option.",W[$]="Parsing load response failed.",W[B]="Missing image thumb.",W[P]="Missing image URL.",W[K]="Error during delete image request.",W[U]="Missing imageManagerDeleteURL option.",{require:["image"],_init:function(){if(!t.$wp&&"IMG"!=t.el.tagName)return!1},show:function(){if(!S){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+t.sid+'" title="'+t.language.translate("Tags")+'"></i><h4 data-text="true">'+t.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var n='<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">';n+='<div class="fr-image-list" id="fr-image-list"></div>';var r=t.modals.create(k,e,n);S=r.$modal,C=r.$head,R=r.$body}S.data("current-image",t.image.get()),t.modals.show(k),y||A(),i()},hide:function(){t.modals.hide(k)}}},!e.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.FE.DEFAULTS.imageInsertButtons.push("imageManager"),e.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),e.FE.DefineIcon("imageManager",{NAME:"folder"}),e.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),e.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){return{apply:function(n){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+n+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+n+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><span style="'+t[n]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+="</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.FE.PLUGINS.lineBreaker=function(t){function n(e,n){var r,i,a,o,s,l,d,c;if(null==e)o=n.parent(),s=o.offset().top,d=n.offset().top,r=d-Math.min((d-s)/2,t.opts.lineBreakerOffset),a=o.outerWidth(),i=o.offset().left;else if(null==n)o=e.parent(),l=o.offset().top+o.outerHeight(),c=e.offset().top+e.outerHeight(),r=c+Math.min((l-c)/2,t.opts.lineBreakerOffset),a=o.outerWidth(),i=o.offset().left;else{o=e.parent();var f=e.offset().top+e.height(),p=n.offset().top;if(f>p)return!1;r=(f+p)/2,a=o.outerWidth(),i=o.offset().left}t.opts.iframe&&(i+=t.$iframe.offset().left-t.helpers.scrollLeft(),r+=t.$iframe.offset().top-t.helpers.scrollTop()),t.$box.append(g),g.css("top",r-t.win.pageYOffset),g.css("left",i-t.win.pageXOffset),g.css("width",a),g.data("tag1",e),g.data("tag2",n),g.addClass("fr-visible").data("instance",t)}function r(e,r){var a,o,s=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-r)<=t.opts.lineBreakerOffset||Math.abs(r-s)<=t.opts.lineBreakerOffset)if(Math.abs(l-r)<Math.abs(r-s)){for(var d=(o=e.get(0)).nextSibling;d&&d.nodeType==Node.TEXT_NODE&&0===d.textContent.length;)d=d.nextSibling;if(!d)return n(e,null),!0;if(a=i(d))return n(e,a),!0}else{if(!(o=e.get(0)).previousSibling)return n(null,e),!0;if(a=i(o.previousSibling))return n(a,e),!0}g.removeClass("fr-visible").removeData("instance")}function i(n){if(n){var r=e(n);if(0===t.$el.find(r).length)return null;if(n.nodeType!=Node.TEXT_NODE&&r.is(t.opts.lineBreakerTags.join(",")))return r;if(r.parents(t.opts.lineBreakerTags.join(",")).length>0)return n=r.parents(t.opts.lineBreakerTags.join(",")).get(0),0!==t.$el.find(n).length&&e(n).is(t.opts.lineBreakerTags.join(","))?e(n):null}return null}function a(n,r){var i=t.doc.elementFromPoint(n,r);return i&&!e(i).closest(".fr-line-breaker").length&&!t.node.isElement(i)&&i!=t.$wp.get(0)&&e(i).closest(t.$wp).length?i:null}function o(e,n,r){for(var i=r,o=null;i<=t.opts.lineBreakerOffset&&!o;)(o=a(e,n-i))||(o=a(e,n+i)),i+=r;return o}function s(e,n,r){for(var i=null;!i&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth();)(i=a(e,n))||(i=o(e,n,5)),"left"==r?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset;return i}function l(e){v=null;var n=null,a=null,l=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);l&&("HTML"==l.tagName||"BODY"==l.tagName||t.node.isElement(l)||l.classList.contains(".fr-line-breaker"))?((a=o(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1))||(a=s(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),a||(a=s(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),n=i(a)):n=i(l),n?r(n,e.pageY):t.core.sameInstance(g)&&g.removeClass("fr-visible").removeData("instance")}function d(e){return!(g.hasClass("fr-visible")&&!t.core.sameInstance(g))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(g.removeClass("fr-visible"),!0):void(!1!==m||t.edit.isDisabled()||(v&&clearTimeout(v),v=setTimeout(l,30,e))))}function c(){v&&clearTimeout(v),g.hasClass("fr-visible")&&g.removeClass("fr-visible").removeData("instance")}function f(){m=!0,c()}function p(){m=!1}function u(n){if(!t.core.sameInstance(g))return!0;n.preventDefault(),g.removeClass("fr-visible").removeData("instance");var r=g.data("tag1"),i=g.data("tag2"),a=t.html.defaultTag();null==r?a&&"TD"!=i.parent().get(0).tagName&&0===i.parents(a).length?i.before("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):i.before(e.FE.MARKERS+"<br>"):a&&"TD"!=r.parent().get(0).tagName&&0===r.parents(a).length?r.after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):r.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function h(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),g=t.shared.$line_breaker,t.events.on("shared.destroy",function(){g.html("").removeData().remove(),g=null},!0),t.events.on("destroy",function(){g.removeData("instance").removeClass("fr-visible").appendTo("body:first"),clearTimeout(v)},!0),t.events.$on(g,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(g,"mousedown","a",function(e){e.stopPropagation()},!0),t.events.$on(g,"click","a",u,!0)}var g,m,v;return{_init:function(){if(!t.$wp)return!1;h(),m=!1,t.events.$on(t.$win,"mousemove",d),t.events.$on(e(t.win),"scroll",c),t.events.on("popups.show.table.edit",c),t.events.on("commands.after",c),t.events.$on(e(t.win),"mousedown",f),t.events.$on(e(t.win),"mouseup",p)}}},e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var r=t.selection.ranges(0).commonAncestorContainer;if(r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null),r&&"A"===r.tagName)return r;var i=t.selection.element(),a=t.selection.endElement();return"A"==i.tagName||t.node.isElement(i)||(i=e(i).parentsUntil(t.$el,"a:first").get(0)),"A"==a.tagName||t.node.isElement(a)||(a=e(a).parentsUntil(t.$el,"a:first").get(0)),a&&(a.contains&&a.contains(t.el)||!t.el.contains(a)||t.el==a)&&(a=null),i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null),a&&a==i&&"A"==a.tagName?i:null}return"A"==t.el.tagName?t.el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function r(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var r,i,a,o;if(t.win.getSelection){var s=t.win.getSelection();if(s.getRangeAt&&s.rangeCount){o=t.doc.createRange();for(var l=0;l<s.rangeCount;++l)if(r=s.getRangeAt(l),(i=r.commonAncestorContainer)&&1!=i.nodeType&&(i=i.parentNode),i&&"a"==i.nodeName.toLowerCase())n.push(i);else{a=i.getElementsByTagName("a");for(var d=0;d<a.length;++d)o.selectNodeContents(a[d]),o.compareBoundaryPoints(r.END_TO_START,r)<1&&o.compareBoundaryPoints(r.START_TO_END,r)>-1&&n.push(a[d])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(r=t.doc.selection.createRange(),"a"==(i=r.parentElement()).nodeName.toLowerCase())n.push(i);else{a=i.getElementsByTagName("a"),o=t.doc.body.createTextRange();for(var c=0;c<a.length;++c)o.moveToElementText(a[c]),o.compareEndPoints("StartToEnd",r)>-1&&o.compareEndPoints("EndToStart",r)<1&&n.push(a[c])}}return n}function i(r){if(t.core.hasFocus()){if(o(),r&&"keyup"===r.type&&(r.altKey||r.which==e.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var i=n(),o=t.image?t.image.get():null;if(i&&!o){if(t.image){var s=t.node.contents(i);if(1==s.length&&"IMG"==s[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),t.selection.restore(),!1}}r&&r.stopPropagation(),a(i)}}},t.helpers.isIOS()?100:0)}}function a(n){var r=t.popups.get("link.edit");r||(r=s());var i=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var a=i.offset().left+e(n).outerWidth()/2,o=i.offset().top+i.outerHeight();t.popups.show("link.edit",a,o,i.outerHeight())}function o(){t.popups.hide("link.edit")}function s(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var r={buttons:e},i=t.popups.create("link.edit",r);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&a(n())}),i}function l(){}function d(){var r=t.popups.get("link.insert"),i=n();if(i){var a,o,s=e(i),l=r.find('input.fr-link-attr[type="text"]'),d=r.find('input.fr-link-attr[type="checkbox"]');for(a=0;a<l.length;a++)(o=e(l[a])).val(s.attr(o.attr("name")||""));for(d.prop("checked",!1),a=0;a<d.length;a++)o=e(d[a]),s.attr(o.attr("name"))==o.data("checked")&&o.prop("checked",!0);r.find('input.fr-link-attr[type="text"][name="text"]').val(s.text())}else r.find('input.fr-link-attr[type="text"]').val(""),r.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),r.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());r.find("input.fr-link-attr").trigger("change"),(t.image?t.image.get():null)?r.find('.fr-link-attr[name="text"]').parent().hide():r.find('.fr-link-attr[name="text"]').parent().show()}function c(e){if(e)return t.popups.onRefresh("link.insert",d),t.popups.onHide("link.insert",l),!0;var r="";t.opts.linkInsertButtons.length>=1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var i="",a=0;i='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',i+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++a+'"></div>',t.opts.linkText&&(i+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++a+'"></div>');for(var o in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(o)){var s=t.opts.linkAttributes[o];i+='<div class="fr-input-line"><input name="'+o+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(s)+'" tabIndex="'+ ++a+'"></div>'}t.opts.linkAlwaysBlank||(i+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++a+'"><span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg></span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>");var c={buttons:r,input_layer:i+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++a+'" type="button">'+t.language.translate("Insert")+"</button></div></div>"},f=t.popups.create("link.insert",c);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){(t.image?t.image.get():null)&&t.popups.isVisible("link.insert")&&h(),n&&t.popups.isVisible("link.insert")&&u()}),f}function f(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var r=e(n.pop());r.removeClass("fr-unprocessed");var i=t.node.deepestParent(r.get(0));if(i){var a=r.get(0),o="",s="";do{a=a.parentNode,t.node.isBlock(a)||(o+=t.node.closeTagString(a),s=t.node.openTagString(a)+s)}while(a!=i);var l=t.node.openTagString(r.get(0))+r.html()+t.node.closeTagString(r.get(0));r.replaceWith('<span id="fr-break"></span>');var d=e(i).html();d=d.replace(/<span id="fr-break"><\/span>/g,o+l+s),e(i).html(d)}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function p(a,o,s){if(void 0===s&&(s={}),!1===t.events.trigger("link.beforeInsert",[a,o,s]))return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var d=a;t.opts.linkConvertEmailAddress&&e.FE.MAIL_REGEX.test(a)&&!/^mailto:.*/i.test(a)&&(a="mailto:"+a);var c=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===t.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(a)||/^data:image.*/i.test(a)||/^(https?:|ftps?:|file:|)\/\//i.test(a)||c.test(a)||["/","{","[","#","("].indexOf((a||"")[0])<0&&(a=t.opts.linkAutoPrefix+a),a=t.helpers.sanitizeURL(a),t.opts.linkAlwaysBlank&&(s.target="_blank"),t.opts.linkAlwaysNoFollow&&(s.rel="nofollow"),"_blank"==s.target?s.rel?s.rel+=" noopener noreferrer":s.rel="noopener noreferrer":null==s.target&&(s.rel?s.rel=s.rel.replace(/noopener/,"").replace(/noreferrer/,""):s.rel=null),o=o||"",a===t.opts.linkAutoPrefix)return t.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[d]),!1;var p,u=n();if(u)(p=e(u)).attr("href",a),o.length>0&&p.text()!=o&&!l&&p.text(o),l||p.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),p.attr(s),l||t.selection.restore();else{l?l.wrap('<a href="'+a+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(o=0===o.length?d:o,t.html.insert('<a href="'+a+'">'+e.FE.START_MARKER+o+e.FE.END_MARKER+"</a>"),t.selection.restore()):o.length>0&&o!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+a+'">'+e.FE.START_MARKER+o+e.FE.END_MARKER+"</a>"),t.selection.restore()):(f(),t.format.apply("a",{href:a})));for(var h=r(),g=0;g<h.length;g++)(p=e(h[g])).attr(s),p.removeAttr("_moz_dirty");1==h.length&&t.$wp&&!l&&(e(h[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}l?(t.popups.get("link.insert").find("input:focus").blur(),t.image.edit(l)):i()}function u(){o();var r=n();if(r){var i=t.popups.get("link.insert");i||(i=c()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var a=(t.image?t.image.get():null)||e(r),s=a.offset().left+a.outerWidth()/2,l=a.offset().top+a.outerHeight();t.popups.show("link.insert",s,l,a.outerHeight())}}function h(){var e=t.image?t.image.get():null;if(e){var n=t.popups.get("link.insert");n||(n=c()),d(!0),t.popups.setContainer("link.insert",t.$sc);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+e.outerHeight();t.popups.show("link.insert",r,i,e.outerHeight())}}return{_init:function(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&i(t)}),t.events.on("window.mouseup",i),t.events.$on(t.$el,"click","a",function(e){t.edit.isDisabled()&&e.preventDefault()}),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",i),c(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)},remove:function(){var r=n(),i=t.image?t.image.get():null;if(!1===t.events.trigger("link.beforeRemove",[r]))return!1;i&&r?(i.unwrap(),t.image.edit(i)):r&&(t.selection.save(),e(r).replaceWith(e(r).html()),t.selection.restore(),o())},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=c()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("link.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")},usePredefined:function(n){var r,i,a=t.opts.linkList[n],o=t.popups.get("link.insert"),s=o.find('input.fr-link-attr[type="text"]'),l=o.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<s.length;i++)r=e(s[i]),a[r.attr("name")]?r.val(a[r.attr("name")]):"text"!=r.attr("name")&&r.val("");for(i=0;i<l.length;i++)(r=e(l[i])).prop("checked",r.data("checked")==a[r.attr("name")]);t.accessibility.focusPopup(o)},insertCallback:function(){var n,r,i=t.popups.get("link.insert"),a=i.find('input.fr-link-attr[type="text"]'),o=i.find('input.fr-link-attr[type="checkbox"]'),s=a.filter('[name="href"]').val(),l=a.filter('[name="text"]').val(),d={};for(r=0;r<a.length;r++)n=e(a[r]),["href","text"].indexOf(n.attr("name"))<0&&(d[n.attr("name")]=n.val());for(r=0;r<o.length;r++)n=e(o[r]),n.is(":checked")?d[n.attr("name")]=n.data("checked"):d[n.attr("name")]=n.data("unchecked")||null;var c=t.helpers.scrollTop();p(s,l,d),e(t.o_win).scrollTop(c)},insert:p,update:u,get:n,allSelected:r,back:function(){(t.image?t.image.get():null)?t.image.back():(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),n()&&t.$wp?(t.selection.restore(),o(),i()):"A"==t.el.tagName?(t.$el.focus(),i()):(t.popups.hide("link.insert"),t.toolbar.showInline()))},imageLink:h,applyStyle:function(r,a,o){void 0===o&&(o=t.opts.linkMultipleStyles),void 0===a&&(a=t.opts.linkStyles);var s=n();if(!s)return!1;if(!o){var l=Object.keys(a);l.splice(l.indexOf(r),1),e(s).removeClass(l.join(" "))}e(s).toggleClass(r),i()}}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)}}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();(this.image?this.image.get():null)||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var r=this.link.get();if(r){var i=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}}),e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function r(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function i(t,n){for(var r=[],i=0;i<t.length;i++){var a=t[i].parentNode;"LI"==t[i].tagName&&a.tagName!=n&&r.indexOf(a)<0&&r.push(a)}for(i=r.length-1;i>=0;i--){var o=e(r[i]);o.replaceWith("<"+n.toLowerCase()+">"+o.html()+"</"+n.toLowerCase()+">")}}function a(n,r){i(n,r);var a,o=t.html.defaultTag(),s=null;n.length&&(a="rtl"==t.opts.direction||"rtl"==e(n[0]).css("direction")?"margin-right":"margin-left");for(var l=0;l<n.length;l++)if("LI"!=n[l].tagName){var d=t.helpers.getPX(e(n[l]).css(a))||0;n[l].style.marginLeft=null,null===s&&(s=d);var c=s>0?"<"+r+' style="'+a+": "+s+'px;">':"<"+r+">",f="</"+r+">";for(d-=s;d/t.opts.indentMargin>0;)c+="<"+r+">",f+=f,d-=t.opts.indentMargin;o&&n[l].tagName.toLowerCase()==o?e(n[l]).replaceWith(c+"<li"+t.node.attributes(n[l])+">"+e(n[l]).html()+"</li>"+f):e(n[l]).wrap(c+"<li></li>"+f)}t.clean.lists()}function o(i){var a,o;for(a=i.length-1;a>=0;a--)for(o=a-1;o>=0;o--)if(e(i[o]).find(i[a]).length||i[o]==i[a]){i.splice(a,1);break}var s=[];for(a=0;a<i.length;a++){var l=e(i[a]),d=i[a].parentNode,c=l.attr("class");if(l.before(r(d.tagName)),"LI"==d.parentNode.tagName)l.before(r("LI")),l.after(n("LI"));else{var f="";c&&(f+=' class="'+c+'"');var p="rtl"==t.opts.direction||"rtl"==l.css("direction")?"margin-right":"margin-left";t.helpers.getPX(e(d).css(p))&&(f+=' style="'+p+":"+t.helpers.getPX(e(d).css(p))+'px;"'),f&&l.wrapInner("<"+t.html.defaultTag()+f+"></"+t.html.defaultTag()+">"),t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(r("LI"))}l.after(n(d.tagName)),"LI"==d.parentNode.tagName&&(d=d.parentNode.parentNode),s.indexOf(d)<0&&s.push(d)}for(a=0;a<s.length;a++){var u=e(s[a]),h=u.html();h=(h=h.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),u.replaceWith(t.node.openTagString(u.get(0))+h+t.node.closeTagString(u.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function s(e,t){for(var n=!0,r=0;r<e.length;r++){if("LI"!=e[r].tagName)return!1;e[r].parentNode.tagName!=t&&(n=!1)}return n}function l(n){t.selection.save();for(var r=0;r<n.length;r++){var i=n[r].previousSibling;if(i){var a=e(n[r]).find("> ul, > ol").last().get(0);if(a){for(var o=e("<li>").prependTo(e(a)),s=t.node.contents(n[r])[0];s&&!t.node.isList(s);){var l=s.nextSibling;o.append(s),s=l}e(i).append(e(a)),e(n[r]).remove()}else{var d=e(i).find("> ul, > ol").last().get(0);if(d)e(d).append(e(n[r]));else{var c=e("<"+n[r].parentNode.tagName+">");e(i).append(c),c.append(e(n[r]))}}}}t.clean.lists(),t.selection.restore()}function d(e){t.selection.save(),o(e),t.selection.restore()}function c(e){if("indent"==e||"outdent"==e){for(var n=!1,r=t.selection.blocks(),i=[],a=0;a<r.length;a++)"LI"==r[a].tagName?(n=!0,i.push(r[a])):"LI"==r[a].parentNode.tagName&&(n=!0,i.push(r[a].parentNode));n&&("indent"==e?l(i):d(i))}}return{_init:function(){t.events.on("commands.after",c),t.events.on("keydown",function(n){if(n.which==e.FE.KEYCODE.TAB){for(var r=t.selection.blocks(),i=[],a=0;a<r.length;a++)"LI"==r[a].tagName?i.push(r[a]):"LI"==r[a].parentNode.tagName&&i.push(r[a].parentNode);if(i.length>1||i.length&&(t.selection.info(i[0]).atStart||t.node.isEmpty(i[0])))return n.preventDefault(),n.stopPropagation(),n.shiftKey?d(i):l(i),!1}},!0)},format:function(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),r=0;r<n.length;r++)"LI"!=n[r].tagName&&"LI"==n[r].parentNode.tagName&&(n[r]=n[r].parentNode);t.selection.save(),s(n,e)?o(n):a(n,e),t.html.unwrap(),t.selection.restore()},refresh:function(n,r){var i=e(t.selection.element());if(i.get(0)!=t.el){var a=i.get(0);(a="LI"!=a.tagName&&a.firstElementChild&&"LI"!=a.firstElementChild.tagName?i.parents("li").get(0):"LI"==a.tagName||a.firstElementChild?a.firstElementChild&&"LI"==a.firstElementChild.tagName?i.get(0).firstChild:i.get(0):i.parents("li").get(0))&&a.parentNode.tagName==r&&t.el.contains(a.parentNode)&&n.addClass("fr-active")}}}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"}),e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,r){var i=t.html.defaultTag();if(r&&r.toLowerCase()!=i)if(n.find("ul, ol").length>0){var a=e("<"+r+">");n.prepend(a);for(var o=t.node.contents(n.get(0))[0];o&&["UL","OL"].indexOf(o.tagName)<0;){var s=o.nextSibling;a.append(o),o=s}}else n.html("<"+r+">"+n.html()+"</"+r+">")}function r(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div" data-empty="true"'),r.toLowerCase()==i?n.replaceWith(n.html()):n.replaceWith(e("<"+r+">").html(n.html()))}function i(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),r.toLowerCase()==i?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+r+">").html(n.html()))}function a(n,r){r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+r+" "+t.node.attributes(n.get(0))+">").html(n.html()).removeAttr("data-empty"))}return{apply:function(o){"N"==o&&(o=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<s.length;l++)if(s[l].tagName!=o&&!t.node.isList(s[l])){var d=e(s[l]);"LI"==s[l].tagName?n(d,o):"LI"==s[l].parentNode.tagName&&s[l]?r(d,o):["TD","TH"].indexOf(s[l].parentNode.tagName)>=0?i(d,o):a(d,o)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()},refreshOnShow:function(e,n){var r=t.selection.blocks();if(r.length){var i=r[0],a="N",o=t.html.defaultTag();i.tagName.toLowerCase()!=o&&i!=t.el&&(a=i.tagName),n.find('.fr-command[data-param1="'+a+'"]').addClass("fr-active").attr("aria-selected",!0)}else n.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)},refresh:function(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var r=n[0],i="N",a=t.html.defaultTag();r.tagName.toLowerCase()!=a&&r!=t.el&&(i=r.tagName),["LI","TD","TH"].indexOf(i)>=0&&(i="N"),e.find("> span").text(t.language.translate(t.opts.paragraphFormat[i]))}else e.find("> span").text(t.language.translate(t.opts.paragraphFormat.N))}}}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var r=this.shortcuts.get("paragraphFormat."+n);r=r?'<span class="fr-shortcut">'+r+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){return{_init:function(){},apply:function(n,r,i){void 0===r&&(r=t.opts.paragraphStyles),void 0===i&&(i=t.opts.paragraphMultipleStyles);var a="";i||((a=Object.keys(r)).splice(a.indexOf(n),1),a=a.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var o=t.selection.blocks();t.selection.save();for(var s=e(o[0]).hasClass(n),l=0;l<o.length;l++)e(o[l]).removeClass(a).toggleClass(n,!s),e(o[l]).hasClass("fr-temp-div")&&e(o[l]).removeClass("fr-temp-div"),""===e(o[l]).attr("class")&&e(o[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()},refreshOnShow:function(n,r){var i=t.selection.blocks();if(i.length){var a=e(i[0]);r.find(".fr-command").each(function(){var t=e(this).data("param1"),n=a.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command '+n+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),e.FE.PLUGINS.print=function(e){return{run:function(){var t=e.$el.html(),n=null;e.shared.print_iframe?n=e.shared.print_iframe:(n=document.createElement("iframe"),n.name="fr-print",n.style.position="fixed",n.style.top="0",n.style.left="-9999px",n.style.height="100%",n.style.width="0",n.style.overflow="hidden",n.style["z-index"]="9999",n.style.tabIndex="-1",document.body.appendChild(n),n.onload=function(){setTimeout(function(){e.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),e.$win.get(0).focus(),e.events.disableBlur(),e.events.focus()},0)},e.events.on("shared.destroy",function(){n.remove()}),e.shared.print_iframe=n);var r=n.contentWindow;r.document.open(),r.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(e){e=e.cloneNode(!0),r.document.write(e.outerHTML)});var i=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(i,function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",r.document.write(t.outerHTML)}),r.document.write('</head><body style="text-align: '+("rtl"==e.opts.direction?"right":"left")+"; direction: "+e.opts.direction+';"><div class="fr-view">'),r.document.write(t),r.document.write("</div></body></html>"),r.document.close()}}},e.FE.DefineIcon("print",{NAME:"print"}),e.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),e.extend(e.FE.DEFAULTS,{quickInsertButtons:["image","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),e.FE.QUICK_INSERT_BUTTONS={image:{icon:"insertImage",callback:function(){var t=this;t.shared.$qi_image_input||(t.shared.$qi_image_input=e('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),e("body:first").append(t.shared.$qi_image_input),t.events.$on(t.shared.$qi_image_input,"change",function(){var t=e(this).data("inst");this.files&&(t.quickInsert.hide(),t.image.upload(this.files)),e(this).val("")},!0)),t.$qi_image_input=t.shared.$qi_image_input,t.helpers.isMobile()&&t.selection.save(),t.$qi_image_input.data("inst",t).trigger("click")},requiredPlugin:"image",title:"Insert Image"},table:{icon:"insertTable",callback:function(){this.quickInsert.hide(),this.table.insert(2,2),this.undo.saveStep()},requiredPlugin:"table",title:"Insert Table"},ol:{icon:"formatOL",callback:function(){this.quickInsert.hide(),this.lists.format("OL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Ordered List"},ul:{icon:"formatUL",callback:function(){this.quickInsert.hide(),this.lists.format("UL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Unordered List"},hr:{icon:"insertHR",callback:function(){this.quickInsert.hide(),this.commands.insertHR(),this.undo.saveStep()},title:"Insert Horizontal Line"}},e.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),e.FE.RegisterQuickInsertCommand=function(t,n){e.FE.QUICK_INSERT_BUTTONS[t]=n},e.FE.PLUGINS.quickInsert=function(t){function n(e){var n,r,i;n=e.offset().top-t.$box.offset().top,r=0-d.outerWidth(),i=(d.outerHeight()-e.outerHeight())/2,t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),d.hasClass("fr-on")&&n>=0&&c.css("top",n-i),n>=0&&n-i<=t.$box.outerHeight()-e.outerHeight()?(d.hasClass("fr-hidden")&&(d.hasClass("fr-on")&&o(),d.removeClass("fr-hidden")),d.css("top",n-i)):d.hasClass("fr-visible")&&(d.addClass("fr-hidden"),s()),d.css("left",r)}function r(e){d||l(),d.hasClass("fr-on")&&s(),t.$box.append(d),n(e),d.data("tag",e),d.addClass("fr-visible")}function i(){if(t.core.hasFocus()){var n=t.selection.element();t.node.isBlock(n)||(n=t.node.blockParent(n)),n&&t.node.isEmpty(n)&&t.node.isElement(n.parentNode)&&t.opts.quickInsertTags.indexOf(n.tagName.toLowerCase())>=0?d&&d.data("tag").is(e(n))&&d.hasClass("fr-on")?s():t.selection.isCollapsed()&&r(e(n)):a()}}function a(){d&&(t.html.checkIfEmpty(),d.hasClass("fr-on")&&s(),d.removeClass("fr-visible fr-on"),d.css("left",-9999).css("top",-9999))}function o(n){if(n&&n.preventDefault(),d.hasClass("fr-on")&&!d.hasClass("fr-hidden"))s();else{if(!t.shared.$qi_helper){for(var r=t.opts.quickInsertButtons,i='<div class="fr-qi-helper">',a=0,o=0;o<r.length;o++){var l=e.FE.QUICK_INSERT_BUTTONS[r[o]];l&&(!l.requiredPlugin||e.FE.PLUGINS[l.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(l.requiredPlugin)>=0)&&(i+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(l.title)+'" tabIndex="-1" data-cmd="'+r[o]+'" style="transition-delay: '+.025*a+++'s;">'+t.icon.create(l.icon)+"</a>")}i+="</div>",t.shared.$qi_helper=e(i),t.tooltip.bind(t.shared.$qi_helper,"> a.fr-btn")}(c=t.shared.$qi_helper).appendTo(t.$box),setTimeout(function(){c.css("top",parseFloat(d.css("top"))),c.css("left",parseFloat(d.css("left"))+d.outerWidth()),c.find("a").addClass("fr-size-1"),d.addClass("fr-on")},10)}}function s(){var e=t.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),d.hasClass("fr-hidden")||d.removeClass("fr-on"))}function l(){t.shared.$quick_insert||(t.shared.$quick_insert=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a></div>")),d=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){d.removeClass("fr-on").appendTo(e("body:first")).css("left",-9999).css("top",-9999),c&&(s(),c.appendTo(e("body:first")))},!0),t.events.on("shared.destroy",function(){d.html("").removeData().remove(),d=null,c&&(c.html("").removeData().remove(),c=null)},!0),t.events.on("commands.before",a),t.events.on("commands.after",function(){t.popups.areVisible()||i()}),t.events.bindClick(t.$box,".fr-quick-insert > a",o),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(n){var r=e(n.currentTarget).data("cmd");e.FE.QUICK_INSERT_BUTTONS[r].callback.apply(t,[n.currentTarget])}),t.events.$on(t.$wp,"scroll",function(){d.hasClass("fr-visible")&&n(d.data("tag"))})}var d,c;return{_init:function(){if(!t.$wp)return!1;t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),t.popups.onShow("image.edit",a),t.events.on("mouseup",i),t.helpers.isMobile()&&t.events.$on(e(t.o_doc),"selectionchange",i),t.events.on("blur",a),t.events.on("keyup",i),t.events.on("keydown",function(){setTimeout(function(){i()},0)})},hide:a}},e.FE.PLUGINS.quote=function(t){function n(e){for(;e.parentNode&&e.parentNode!=t.el;)e=e.parentNode;return e}function r(){var r,i=t.selection.blocks();for(r=0;r<i.length;r++)i[r]=n(i[r]);t.selection.save();var a=e("<blockquote>");for(a.insertBefore(i[0]),r=0;r<i.length;r++)a.append(i[r]);t.html.unwrap(),t.selection.restore()}function i(){var n,r=t.selection.blocks();for(n=0;n<r.length;n++)"BLOCKQUOTE"!=r[n].tagName&&(r[n]=e(r[n]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),n=0;n<r.length;n++)r[n]&&e(r[n]).replaceWith(r[n].innerHTML);t.html.unwrap(),t.selection.restore()}return{apply:function(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?r():"decrease"==e&&i()}}},e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"}),e.extend(e.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FE.PLUGINS.save=function(t){function n(e,n){t.events.trigger("save.error",[{code:e,message:c[e]},n])}function r(r){if(void 0===r&&(r=t.html.get()),!1===t.events.trigger("save.before"))return!1;if(t.opts.saveURL){var i={};for(var a in t.opts.saveParams)if(t.opts.saveParams.hasOwnProperty(a)){var s=t.opts.saveParams[a];i[a]="function"==typeof s?s.call(this):s}var c={};c[t.opts.saveParam]=r,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(c,i),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){o=r,t.events.trigger("save.after",[e])}).fail(function(e){n(d,e.response||e.responseText)})}else n(l)}function i(){clearTimeout(a),a=setTimeout(function(){var e=t.html.get();(o!=e||s)&&(o=e,s=!1,r(e))},t.opts.saveInterval)}var a=null,o=null,s=!1,l=1,d=2,c={};return c[l]="Missing saveURL option.",c[d]="Something went wrong during save.",{_init:function(){t.opts.saveInterval&&(o=t.html.get(),t.events.on("contentChanged",i),t.events.on("keydown destroy",function(){clearTimeout(a)}))},save:r,reset:function(){i(),s=!1},force:function(){s=!0}}},e.FE.DefineIcon("save",{NAME:"floppy-o"}),e.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),e.extend(e.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{char:"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{char:"&cent;",desc:"CENT SIGN"},{char:"&pound;",desc:"POUND SIGN"},{char:"&curren;",desc:"CURRENCY SIGN"},{char:"&yen;",desc:"YEN SIGN"},{char:"&brvbar;",desc:"BROKEN BAR"},{char:"&sect;",desc:"SECTION SIGN"},{char:"&uml;",desc:"DIAERESIS"},{char:"&copy;",desc:"COPYRIGHT SIGN"},{char:"&trade;",desc:"TRADEMARK SIGN"},{char:"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{char:"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&not;",desc:"NOT SIGN"},{char:"&reg;",desc:"REGISTERED SIGN"},{char:"&macr;",desc:"MACRON"},{char:"&deg;",desc:"DEGREE SIGN"},{char:"&plusmn;",desc:"PLUS-MINUS SIGN"},{char:"&sup2;",desc:"SUPERSCRIPT TWO"},{char:"&sup3;",desc:"SUPERSCRIPT THREE"},{char:"&acute;",desc:"ACUTE ACCENT"},{char:"&micro;",desc:"MICRO SIGN"},{char:"&para;",desc:"PILCROW SIGN"},{char:"&middot;",desc:"MIDDLE DOT"},{char:"&cedil;",desc:"CEDILLA"},{char:"&sup1;",desc:"SUPERSCRIPT ONE"},{char:"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{char:"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{char:"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{char:"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{char:"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{char:"&iquest;",desc:"INVERTED QUESTION MARK"},{char:"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{char:"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{char:"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{char:"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{char:"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{char:"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{char:"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{char:"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{char:"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{char:"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{char:"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{char:"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{char:"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{char:"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{char:"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{char:"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{char:"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{char:"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{char:"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{char:"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{char:"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{char:"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{char:"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{char:"&times;",desc:"MULTIPLICATION SIGN"},{char:"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{char:"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{char:"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{char:"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{char:"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{char:"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{char:"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{char:"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{char:"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{char:"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{char:"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{char:"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{char:"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{char:"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{char:"&aelig;",desc:"LATIN SMALL LETTER AE"},{char:"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{char:"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{char:"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{char:"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{char:"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{char:"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{char:"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{char:"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{char:"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{char:"&eth;",desc:"LATIN SMALL LETTER ETH"},{char:"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{char:"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{char:"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{char:"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{char:"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{char:"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{char:"&divide;",desc:"DIVISION SIGN"},{char:"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{char:"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{char:"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{char:"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{char:"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{char:"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{char:"&thorn;",desc:"LATIN SMALL LETTER THORN"},{char:"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{char:"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{char:"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{char:"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{char:"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{char:"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{char:"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{char:"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{char:"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{char:"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{char:"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{char:"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{char:"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{char:"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{char:"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{char:"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{char:"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{char:"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{char:"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{char:"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{char:"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{char:"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{char:"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{char:"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{char:"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{char:"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{char:"&beta;",desc:"GREEK SMALL LETTER BETA"},{char:"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{char:"&delta;",desc:"GREEK SMALL LETTER DELTA"},{char:"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{char:"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{char:"&eta;",desc:"GREEK SMALL LETTER ETA"},{char:"&theta;",desc:"GREEK SMALL LETTER THETA"},{char:"&iota;",desc:"GREEK SMALL LETTER IOTA"},{char:"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{char:"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{char:"&mu;",desc:"GREEK SMALL LETTER MU"},{char:"&nu;",desc:"GREEK SMALL LETTER NU"},{char:"&xi;",desc:"GREEK SMALL LETTER XI"},{char:"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{char:"&pi;",desc:"GREEK SMALL LETTER PI"},{char:"&rho;",desc:"GREEK SMALL LETTER RHO"},{char:"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{char:"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{char:"&tau;",desc:"GREEK SMALL LETTER TAU"},{char:"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{char:"&phi;",desc:"GREEK SMALL LETTER PHI"},{char:"&chi;",desc:"GREEK SMALL LETTER CHI"},{char:"&psi;",desc:"GREEK SMALL LETTER PSI"},{char:"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{char:"&thetasym;",desc:"GREEK THETA SYMBOL"},{char:"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{char:"&straightphi;",desc:"GREEK PHI SYMBOL"},{char:"&piv;",desc:"GREEK PI SYMBOL"},{char:"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{char:"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{char:"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{char:"&varrho;",desc:"GREEK RHO SYMBOL"},{char:"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{char:"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{char:"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{char:"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{char:"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{char:"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{char:"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{char:"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{char:"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{char:"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{char:"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{char:"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{char:"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{char:"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{char:"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{char:"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{char:"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{char:"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{char:"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{char:"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{char:"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{char:"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{char:"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{char:"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{char:"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{char:"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{char:"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{char:"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{char:"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{char:"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{char:"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{char:"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{char:"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{char:"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{char:"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{char:"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{char:"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{char:"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{char:"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{char:"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{char:"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{char:"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{char:"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{char:"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{char:"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{char:"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{char:"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{char:"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{char:"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{char:"&#x430",desc:"CYRILLIC SMALL LETTER A"},{char:"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{char:"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{char:"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{char:"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{char:"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{char:"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{char:"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{char:"&#x438",desc:"CYRILLIC SMALL LETTER I"},{char:"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{char:"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{char:"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{char:"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{char:"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{char:"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{char:"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{char:"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{char:"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{char:"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{char:"&#x443",desc:"CYRILLIC SMALL LETTER U"},{char:"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{char:"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{char:"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{char:"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{char:"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{char:"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{char:"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{char:"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{char:"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{char:"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{char:"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{char:"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{char:"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{char:"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{char:"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{char:"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{char:"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{char:"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{char:"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{char:"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{char:"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{char:"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{char:"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{char:"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{char:"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{char:"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{char:"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{char:"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{char:"&ndash;",desc:"EN DASH"},{char:"&mdash;",desc:"EM DASH"},{char:"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{char:"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{char:"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{char:"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{char:"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{char:"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{char:"&dagger;",desc:"DAGGER"},{char:"&Dagger;",desc:"DOUBLE DAGGER"},{char:"&bull;",desc:"BULLET"},{char:"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{char:"&permil;",desc:"PER MILLE SIGN"},{char:"&prime;",desc:"PRIME"},{char:"&Prime;",desc:"DOUBLE PRIME"},{char:"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{char:"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{char:"&oline;",desc:"OVERLINE"},{char:"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{char:"&#x20A0",desc:"EURO-CURRENCY SIGN"},{char:"&#x20A1",desc:"COLON SIGN"},{char:"&#x20A2",desc:"CRUZEIRO SIGN"},{char:"&#x20A3",desc:"FRENCH FRANC SIGN"},{char:"&#x20A4",desc:"LIRA SIGN"},{char:"&#x20A5",desc:"MILL SIGN"},{char:"&#x20A6",desc:"NAIRA SIGN"},{char:"&#x20A7",desc:"PESETA SIGN"},{char:"&#x20A8",desc:"RUPEE SIGN"},{char:"&#x20A9",desc:"WON SIGN"},{char:"&#x20AA",desc:"NEW SHEQEL SIGN"},{char:"&#x20AB",desc:"DONG SIGN"},{char:"&#x20AC",desc:"EURO SIGN"},{char:"&#x20AD",desc:"KIP SIGN"},{char:"&#x20AE",desc:"TUGRIK SIGN"},{char:"&#x20AF",desc:"DRACHMA SIGN"},{char:"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{char:"&#x20B1",desc:"PESO SIGN"},{char:"&#x20B2",desc:"GUARANI SIGN"},{char:"&#x20B3",desc:"AUSTRAL SIGN"},{char:"&#x20B4",desc:"HRYVNIA SIGN"},{char:"&#x20B5",desc:"CEDI SIGN"},{char:"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{char:"&#x20B7",desc:"SPESMILO SIGN"},{char:"&#x20B8",desc:"TENGE SIGN"},{char:"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{char:"&#x2190",desc:"LEFTWARDS ARROW"},{char:"&#x2191",desc:"UPWARDS ARROW"},{char:"&#x2192",desc:"RIGHTWARDS ARROW"},{char:"&#x2193",desc:"DOWNWARDS ARROW"},{char:"&#x2194",desc:"LEFT RIGHT ARROW"},{char:"&#x2195",desc:"UP DOWN ARROW"},{char:"&#x2196",desc:"NORTH WEST ARROW"},{char:"&#x2197",desc:"NORTH EAST ARROW"},{char:"&#x2198",desc:"SOUTH EAST ARROW"},{char:"&#x2199",desc:"SOUTH WEST ARROW"},{char:"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{char:"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{char:"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{char:"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{char:"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{char:"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{char:"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{char:"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{char:"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{char:"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{char:"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{char:"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{char:"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{char:"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{char:"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{char:"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{char:"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{char:"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{char:"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{char:"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{char:"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{char:"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{char:"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{char:"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{char:"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{char:"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{char:"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{char:"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{char:"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{char:"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{char:"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{char:"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{char:"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{char:"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{char:"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{char:"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{char:"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{char:"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{char:"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{char:"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{char:"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{char:"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{char:"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{char:"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{char:"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{char:"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{char:"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{char:"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{char:"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{char:"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{char:"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{char:"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{char:"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{char:"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{char:"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{char:"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{char:"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{char:"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{char:"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{char:"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{char:"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{char:"&#x21E1",desc:"UPWARDS DASHED ARROW"},{char:"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{char:"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{char:"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{char:"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{char:"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{char:"&#x21E7",desc:"UPWARDS WHITE ARROW"},{char:"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{char:"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{char:"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{char:"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{char:"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{char:"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{char:"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{char:"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{char:"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{char:"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{char:"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{char:"&#x21F3",desc:"UP DOWN WHITE ARROW"},{char:"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{char:"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{char:"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{char:"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{char:"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{char:"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{char:"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{char:"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{char:"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{char:"&forall;",desc:"FOR ALL"},{char:"&part;",desc:"PARTIAL DIFFERENTIAL"},{char:"&exist;",desc:"THERE EXISTS"},{char:"&empty;",desc:"EMPTY SET"},{char:"&nabla;",desc:"NABLA"},{char:"&isin;",desc:"ELEMENT OF"},{char:"&notin;",desc:"NOT AN ELEMENT OF"},{char:"&ni;",desc:"CONTAINS AS MEMBER"},{char:"&prod;",desc:"N-ARY PRODUCT"},{char:"&sum;",desc:"N-ARY SUMMATION"},{char:"&minus;",desc:"MINUS SIGN"},{char:"&lowast;",desc:"ASTERISK OPERATOR"},{char:"&radic;",desc:"SQUARE ROOT"},{char:"&prop;",desc:"PROPORTIONAL TO"},{char:"&infin;",desc:"INFINITY"},{char:"&ang;",desc:"ANGLE"},{char:"&and;",desc:"LOGICAL AND"},{char:"&or;",desc:"LOGICAL OR"},{char:"&cap;",desc:"INTERSECTION"},{char:"&cup;",desc:"UNION"},{char:"&int;",desc:"INTEGRAL"},{char:"&there4;",desc:"THEREFORE"},{char:"&sim;",desc:"TILDE OPERATOR"},{char:"&cong;",desc:"APPROXIMATELY EQUAL TO"},{char:"&asymp;",desc:"ALMOST EQUAL TO"},{char:"&ne;",desc:"NOT EQUAL TO"},{char:"&equiv;",desc:"IDENTICAL TO"},{char:"&le;",desc:"LESS-THAN OR EQUAL TO"},{char:"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{char:"&sub;",desc:"SUBSET OF"},{char:"&sup;",desc:"SUPERSET OF"},{char:"&nsub;",desc:"NOT A SUBSET OF"},{char:"&sube;",desc:"SUBSET OF OR EQUAL TO"},{char:"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{char:"&oplus;",desc:"CIRCLED PLUS"},{char:"&otimes;",desc:"CIRCLED TIMES"},{char:"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{char:"&spades;",desc:"BLACK SPADE SUIT"},{char:"&clubs;",desc:"BLACK CLUB SUIT"},{char:"&hearts;",desc:"BLACK HEART SUIT"},{char:"&diams;",desc:"BLACK DIAMOND SUIT"},{char:"&#x2669",desc:"QUARTER NOTE"},{char:"&#x266A",desc:"EIGHTH NOTE"},{char:"&#x266B",desc:"BEAMED EIGHTH NOTES"},{char:"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{char:"&#x266D",desc:"MUSIC FLAT SIGN"},{char:"&#x266E",desc:"MUSIC NATURAL SIGN"},{char:"&#x2600",desc:"BLACK SUN WITH RAYS"},{char:"&#x2601",desc:"CLOUD"},{char:"&#x2602",desc:"UMBRELLA"},{char:"&#x2603",desc:"SNOWMAN"},{char:"&#x2615",desc:"HOT BEVERAGE"},{char:"&#x2618",desc:"SHAMROCK"},{char:"&#x262F",desc:"YIN YANG"},{char:"&#x2714",desc:"HEAVY CHECK MARK"},{char:"&#x2716",desc:"HEAVY MULTIPLICATION X"},{char:"&#x2744",desc:"SNOWFLAKE"},{char:"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{char:"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{char:"&#x2764",desc:"HEAVY BLACK HEART"}]}]}),e.FE.PLUGINS.specialCharacters=function(t){function n(){for(var n='<div class="fr-special-characters-modal">',r=0;r<e.FE.DEFAULTS.specialCharactersSets.length;r++){for(var i=e.FE.DEFAULTS.specialCharactersSets[r],a=i.list,o='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+i.title+"</p>",s=0;s<a.length;s++){var l=a[s];o+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+l.char+'" title="'+l.desc+'">'+l.char+'<span class="fr-sr-only">'+t.language.translate(l.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}n+=o+"</div>"}return n+="</div>"}function r(e,n){t.events.disableBlur(),e.focus(),n.preventDefault(),n.stopPropagation()}function i(){t.events.$on(s,"keydown",function(n){var i=n.which,o=s.find("span.fr-special-character:focus:first");if(!(o.length||i!=e.FE.KEYCODE.F10||t.keys.ctrlKey(n)||n.shiftKey)&&n.altKey)return r(s.find("span.fr-special-character:first"),n),!1;if(i==e.FE.KEYCODE.TAB||i==e.FE.KEYCODE.ARROW_LEFT||i==e.FE.KEYCODE.ARROW_RIGHT){var l=null,d=null,c=!1;return i==e.FE.KEYCODE.ARROW_LEFT||i==e.FE.KEYCODE.ARROW_RIGHT?(d=i==e.FE.KEYCODE.ARROW_RIGHT,c=!0):d=!n.shiftKey,o.length?(c&&(l=d?o.nextAll("span.fr-special-character:first"):o.prevAll("span.fr-special-character:first")),l&&l.length||(l=d?o.parent().next().find("span.fr-special-character:first"):o.parent().prev().find("span.fr-special-character:"+(c?"last":"first"))).length||(l=s.find("span.fr-special-character:"+(d?"first":"last")))):l=s.find("span.fr-special-character:"+(d?"first":"last")),r(l,n),!1}if(i!=e.FE.KEYCODE.ENTER||!o.length)return!0;(a.data("instance")||t).specialCharacters.insert(o)},!0)}var a,o,s,l="special_characters";return{_init:function(){},show:function(){if(!a){var r=n(),d=t.modals.create(l,"<h4>Special Characters</h4>",r);a=d.$modal,o=d.$head,s=d.$body,t.events.$on(e(t.o_win),"resize",function(){(a.data("instance")||t).modals.resize(l)}),t.events.bindClick(s,".fr-special-character",function(n){var r=a.data("instance")||t,i=e(n.currentTarget);r.specialCharacters.insert(i)}),i()}t.modals.show(l),t.modals.resize(l)},hide:function(){t.modals.hide(l)},insert:function(e){t.specialCharacters.hide(),t.undo.saveStep(),t.html.insert(e.attr("value"),!0),t.undo.saveStep()}}},e.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),e.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"specialCharacters",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=T();if(e){var n=t.popups.get("table.edit");n||(n=d()),t.popups.setContainer("table.edit",t.$sc);var r=x(e),i=(r.left+r.right)/2,a=r.bottom;t.popups.show("table.edit",i,a,r.bottom-r.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore())}}function r(){var e=T();if(e){var n=t.popups.get("table.colors");n||(n=c()),t.popups.setContainer("table.colors",t.$sc);var r=x(e),i=(r.left+r.right)/2,a=r.bottom;u(),t.popups.show("table.colors",i,a,r.bottom-r.top)}}function i(){0===re().length&&t.toolbar.enable()}function a(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var r="";t.opts.tableInsertButtons.length>0&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var i={buttons:r,rows_columns:s()},a=t.popups.create("table.insert",i);return t.events.$on(a,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(t){o(e(t.currentTarget))},!0),l(a),a}function o(e){var n=e.data("row"),r=e.data("col"),i=e.parent();i.siblings(".fr-table-size-info").html(n+" &times; "+r),i.find("> span").removeClass("hover fr-active-item");for(var a=1;a<=t.opts.tableInsertMaxSize;a++)for(var o=0;o<=t.opts.tableInsertMaxSize;o++){var s=i.find('> span[data-row="'+a+'"][data-col="'+o+'"]');a<=n&&o<=r?s.addClass("hover"):a<=n+1||a<=2&&!t.helpers.isMobile()?s.css("display","inline-block"):a>2&&!t.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function s(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var r=1;r<=t.opts.tableInsertMaxSize;r++){var i="inline-block";n>2&&!t.helpers.isMobile()&&(i="none");var a="fr-table-cell ";1==n&&1==r&&(a+=" hover"),e+='<span class="fr-command '+a+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+n+'" data-col="'+r+'" data-param1="'+n+'" data-param2="'+r+'" style="display: '+i+';" role="button"><span></span><span class="fr-sr-only">'+n+" &times; "+r+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+="</div></div>"}function l(n){t.events.$on(n,"focus","[tabIndex]",function(t){o(e(t.currentTarget))}),t.events.on("popup.tab",function(n){var r=e(n.currentTarget);if(!t.popups.isVisible("table.insert")||!r.is("span, a"))return!0;var i,a=n.which;if(e.FE.KEYCODE.ARROW_UP==a||e.FE.KEYCODE.ARROW_DOWN==a||e.FE.KEYCODE.ARROW_LEFT==a||e.FE.KEYCODE.ARROW_RIGHT==a){if(r.is("span.fr-table-cell")){var s=r.parent().find("span.fr-table-cell"),l=s.index(r),d=t.opts.tableInsertMaxSize,c=l%d,f=Math.floor(l/d);e.FE.KEYCODE.ARROW_UP==a?f=Math.max(0,f-1):e.FE.KEYCODE.ARROW_DOWN==a?f=Math.min(t.opts.tableInsertMaxSize-1,f+1):e.FE.KEYCODE.ARROW_LEFT==a?c=Math.max(0,c-1):e.FE.KEYCODE.ARROW_RIGHT==a&&(c=Math.min(t.opts.tableInsertMaxSize-1,c+1));var p=f*d+c,u=e(s.get(p));o(u),t.events.disableBlur(),u.focus(),i=!1}}else e.FE.KEYCODE.ENTER==a&&(t.button.exec(r),i=!1);return!1===i&&(n.preventDefault(),n.stopPropagation()),i},!0)}function d(e){if(e)return t.popups.onHide("table.edit",i),!0;var r="";t.opts.tableEditButtons.length>0&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var a={buttons:r},o=t.popups.create("table.edit",a);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&n()}),o}function c(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:f()},i=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&r()}),p(i),i}function f(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=t.opts.tableColors[n]?e+='<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[n]+"&nbsp;&nbsp;&nbsp;</span></span>":e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i><span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+="</div>"}function p(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("table.colors")||!i.is("span"))return!0;var a=r.which,o=!0;if(e.FE.KEYCODE.TAB==a){var s=n.find(".fr-buttons");o=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==a||e.FE.KEYCODE.ARROW_DOWN==a||e.FE.KEYCODE.ARROW_LEFT==a||e.FE.KEYCODE.ARROW_RIGHT==a){var l=i.parent().find("span.fr-command"),d=l.index(i),c=t.opts.colorsStep,f=Math.floor(l.length/c),p=d%c,u=Math.floor(d/c)*c+p,h=f*c;e.FE.KEYCODE.ARROW_UP==a?u=((u-c)%h+h)%h:e.FE.KEYCODE.ARROW_DOWN==a?u=(u+c)%h:e.FE.KEYCODE.ARROW_LEFT==a?u=((u-1)%h+h)%h:e.FE.KEYCODE.ARROW_RIGHT==a&&(u=(u+1)%h);var g=e(l.get(u));t.events.disableBlur(),g.focus(),o=!1}else e.FE.KEYCODE.ENTER==a&&(t.button.exec(i),o=!1);return!1===o&&(r.preventDefault(),r.stopPropagation()),o},!0)}function u(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function h(){if(re().length>0){var e=ie();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function g(r){var i=ie();if(i.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==r)return;var a,o,s=T(),l=_(s);o="above"==r?l.min_i:l.max_i;var d="<tr>";for(a=0;a<s[o].length;a++)if("below"==r&&o<s.length-1&&s[o][a]==s[o+1][a]||"above"==r&&o>0&&s[o][a]==s[o-1][a]){if(0===a||a>0&&s[o][a]!=s[o][a-1]){var c=e(s[o][a]);c.attr("rowspan",parseInt(c.attr("rowspan"),10)+1)}}else d+="<td><br></td>";d+="</tr>";var f=e(i.find("tr").not(i.find("table tr")).get(o));"below"==r?f.after(d):"above"==r&&(f.before(d),t.popups.isVisible("table.edit")&&n())}}function m(e,t,n){var r,i,a,o,s,l=0,d=T(n);for(t=Math.min(t,d[0].length-1),i=e;i<=t;i++)if(!(i>e&&d[0][i]==d[0][i-1])&&(o=parseInt(d[0][i].getAttribute("colspan"),10)||1)>1&&d[0][i]==d[0][i+1])for(l=o-1,r=1;r<d.length;r++)if(d[r][i]!=d[r-1][i]){for(a=i;a<i+o;a++)if((s=parseInt(d[r][a].getAttribute("colspan"),10)||1)>1&&d[r][a]==d[r][a+1])l=Math.min(l,s-1),a+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&E(d,l,"colspan",0,d.length-1,e,t)}function v(e,t,n){var r,i,a,o,s,l=0,d=T(n);for(t=Math.min(t,d.length-1),r=e;r<=t;r++)if(!(r>e&&d[r][0]==d[r-1][0])&&(o=parseInt(d[r][0].getAttribute("rowspan"),10)||1)>1&&d[r][0]==d[r+1][0])for(l=o-1,i=1;i<d[0].length;i++)if(d[r][i]!=d[r][i-1]){for(a=r;a<r+o;a++)if((s=parseInt(d[a][i].getAttribute("rowspan"),10)||1)>1&&d[a][i]==d[a+1][i])l=Math.min(l,s-1),a+=l;else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&E(d,l,"rowspan",e,t,0,d[0].length-1)}function E(e,t,n,r,i,a,o){var s,l,d;for(s=r;s<=i;s++)for(l=a;l<=o;l++)s>r&&e[s][l]==e[s-1][l]||l>a&&e[s][l]==e[s][l-1]||(d=parseInt(e[s][l].getAttribute(n),10)||1)>1&&(d-t>1?e[s][l].setAttribute(n,d-t):e[s][l].removeAttribute(n))}function b(e,t,n,r,i){v(e,t,i),m(n,r,i)}function T(t){var n=[];if(null==(t=t||null)&&re().length>0&&(t=ie()),t)return t.find("tr").not(t.find("table tr")).each(function(t,r){var i=0;e(r).find("> th, > td").each(function(r,a){for(var o=e(a),s=parseInt(o.attr("colspan"),10)||1,l=parseInt(o.attr("rowspan"),10)||1,d=t;d<t+l;d++)for(var c=i;c<i+s;c++)n[d]||(n[d]=[]),n[d][c]?i++:n[d][c]=a;i+=s})}),n}function A(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]==e)return{row:n,col:r}}function S(e,t,n){for(var r=e+1,i=t+1;r<n.length;){if(n[r][t]!=n[e][t]){r--;break}r++}for(r==n.length&&r--;i<n[e].length;){if(n[e][i]!=n[e][t]){i--;break}i++}return i==n[e].length&&i--,{row:r,col:i}}function C(){t.el.querySelector(".fr-cell-fixed")&&t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler")&&t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function R(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")}),C()}function y(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function _(e){var n=t.$el.find(".fr-selected-cell");if(n.length>0){var r,i=e.length,a=0,o=e[0].length,s=0;for(r=0;r<n.length;r++){var l=A(n[r],e),d=S(l.row,l.col,e);i=Math.min(l.row,i),a=Math.max(d.row,a),o=Math.min(l.col,o),s=Math.max(d.col,s)}return{min_i:i,max_i:a,min_j:o,max_j:s}}return null}function L(t,n,r,i,a){var o,s,l,d,c=t,f=n,p=r,u=i;for(o=c;o<=f;o++)((parseInt(e(a[o][p]).attr("rowspan"),10)||1)>1||(parseInt(e(a[o][p]).attr("colspan"),10)||1)>1)&&(l=A(a[o][p],a),d=S(l.row,l.col,a),c=Math.min(l.row,c),f=Math.max(d.row,f),p=Math.min(l.col,p),u=Math.max(d.col,u)),((parseInt(e(a[o][u]).attr("rowspan"),10)||1)>1||(parseInt(e(a[o][u]).attr("colspan"),10)||1)>1)&&(l=A(a[o][u],a),d=S(l.row,l.col,a),c=Math.min(l.row,c),f=Math.max(d.row,f),p=Math.min(l.col,p),u=Math.max(d.col,u));for(s=p;s<=u;s++)((parseInt(e(a[c][s]).attr("rowspan"),10)||1)>1||(parseInt(e(a[c][s]).attr("colspan"),10)||1)>1)&&(l=A(a[c][s],a),d=S(l.row,l.col,a),c=Math.min(l.row,c),f=Math.max(d.row,f),p=Math.min(l.col,p),u=Math.max(d.col,u)),((parseInt(e(a[f][s]).attr("rowspan"),10)||1)>1||(parseInt(e(a[f][s]).attr("colspan"),10)||1)>1)&&(l=A(a[f][s],a),d=S(l.row,l.col,a),c=Math.min(l.row,c),f=Math.max(d.row,f),p=Math.min(l.col,p),u=Math.max(d.col,u));return c==t&&f==n&&p==r&&u==i?{min_i:t,max_i:n,min_j:r,max_j:i}:L(c,f,p,u,a)}function x(t){var n=_(t),r=e(t[n.min_i][n.min_j]),i=e(t[n.min_i][n.max_j]),a=e(t[n.max_i][n.min_j]);return{left:r.offset().left,right:i.offset().left+i.outerWidth(),top:r.offset().top,bottom:a.offset().top+a.outerHeight()}}function w(n,r){if(e(n).is(r))R(),t.edit.on(),e(n).addClass("fr-selected-cell");else{y(),t.edit.off();var i=T(),a=A(n,i),o=A(r,i),s=L(Math.min(a.row,o.row),Math.max(a.row,o.row),Math.min(a.col,o.col),Math.max(a.col,o.col),i);R(),n.classList.add("fr-cell-fixed"),r.classList.add("fr-cell-handler");for(var l=s.min_i;l<=s.max_i;l++)for(var d=s.min_j;d<=s.max_j;d++)e(i[l][d]).addClass("fr-selected-cell")}}function O(n){var r=null,i=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?r=n.target:i.closest("td").length>0?r=i.closest("td").get(0):i.closest("th").length>0&&(r=i.closest("th").get(0)),0===t.$el.find(r).length?null:r}function N(){R(),t.popups.hide("table.edit")}function I(n){var r=O(n);if(re().length>0&&!r&&N(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&r&&N();else if(ce=!0,r){re().length>0&&!n.shiftKey&&N(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),de=!0;var i=r.tagName.toLowerCase();n.shiftKey&&t.$el.find(i+".fr-selected-cell").length>0?e(t.$el.find(i+".fr-selected-cell").closest("table")).is(e(r).closest("table"))?w(fe,r):y():((t.keys.ctrlKey(n)||n.shiftKey)&&(re().length>1||0===e(r).find(t.selection.element()).length&&!e(r).is(t.selection.element()))&&y(),fe=r,w(fe,fe))}}function k(r){if(de||t.$tb.is(r.target)||t.$tb.is(e(r.target).closest(t.$tb.get(0)))||(re().length>0&&t.toolbar.enable(),R()),!(1!=r.which||1==r.which&&t.helpers.isMac()&&r.ctrlKey)&&(ce=!1,de&&(de=!1,O(r)||1!=re().length?re().length>0&&(t.selection.isCollapsed()?n():R()):R()),ue)){ue=!1,se.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var i=parseFloat(se.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(i-=t.$iframe.offset().left),se.data("release-position",i),se.removeData("max-left"),se.removeData("max-right"),q(),U()}}function D(n){if(!0===de){if(e(n.currentTarget).closest("table").is(ie())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void w(fe,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void w(fe,n.currentTarget)}y()}}function F(n,r){for(var i=n;i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName){var a=T(e(i));"up"==r?$(A(n,a),i,a):"down"==r&&B(A(n,a),i,a)}}function M(e,n,r,i){for(var a,o=n;o!=t.el&&"TD"!=o.tagName&&"TH"!=o.tagName&&("up"==i?a=o.previousElementSibling:"down"==i&&(a=o.nextElementSibling),!a);)o=o.parentNode;"TD"==o.tagName||"TH"==o.tagName?F(o,i):a&&("up"==i&&t.selection.setAtEnd(a),"down"==i&&t.selection.setAtStart(a))}function $(e,n,r){e.row>0?t.selection.setAtEnd(r[e.row-1][e.col]):M(e,n,r,"up")}function B(e,n,r){var i=parseInt(r[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<r.length-i?t.selection.setAtStart(r[e.row+i][e.col]):M(e,n,r,"down")}function P(n){var r=n.which,i=t.selection.blocks();if(i.length&&("TD"==(i=i[0]).tagName||"TH"==i.tagName)){for(var a=i;a&&"TABLE"!=a.tagName&&a.parentNode!=t.el;)a=a.parentNode;if(a&&"TABLE"==a.tagName&&(e.FE.KEYCODE.ARROW_LEFT==r||e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_RIGHT==r||e.FE.KEYCODE.ARROW_DOWN==r)&&(re().length>0&&N(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_DOWN==r))){var o=t.selection.ranges(0).startContainer;if(o.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==r&&o.previousSibling||e.FE.KEYCODE.ARROW_DOWN==r&&o.nextSibling))return;n.preventDefault(),n.stopPropagation();var s=T(e(a)),l=A(i,s);return e.FE.KEYCODE.ARROW_UP==r?$(l,a,s):e.FE.KEYCODE.ARROW_DOWN==r&&B(l,a,s),t.selection.restore(),!1}}}function K(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),se=t.shared.$table_resizer,t.events.$on(se,"mousedown",function(e){return!t.core.sameInstance(se)||(re().length>0&&N(),1==e.which?(t.selection.save(),ue=!0,se.addClass("fr-moving"),y(),t.edit.off(),se.find("div").css("opacity",1),!1):void 0)}),t.events.$on(se,"mousemove",function(e){if(!t.core.sameInstance(se))return!0;ue&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),Z(e))}),t.events.on("shared.destroy",function(){se.html("").removeData().remove(),se=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),se.hide().appendTo(e("body:first"))},!0)}function U(){se&&(se.find("div").css("opacity",0),se.css("top",0),se.css("left",0),se.css("height",0),se.find("div").css("height",0),se.hide())}function W(){le&&le.removeClass("fr-visible").css("left","-9999px")}function H(n,r){var i=e(r),a=i.closest("table"),o=a.parent();if(r&&"TD"!=r.tagName&&"TH"!=r.tagName&&(i.closest("td").length>0?r=i.closest("td"):i.closest("th").length>0&&(r=i.closest("th"))),!r||"TD"!=r.tagName&&"TH"!=r.tagName)se&&i.get(0)!=se.get(0)&&i.parent().get(0)!=se.get(0)&&t.core.sameInstance(se)&&U();else{if(i=e(r),0===t.$el.find(i).length)return!1;var s=i.offset().left-1,l=s+i.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var d,c,f,p,u,h=T(a),g=A(r,h),m=S(g.row,g.col,h),v=a.offset().top,E=a.outerHeight()-1;"rtl"!=t.opts.direction?n.pageX-s<=t.opts.tableResizerOffset?(f=s,g.col>0?(p=s-j(g.col-1,h)+t.opts.tableResizingLimit,u=s+j(g.col,h)-t.opts.tableResizingLimit,d=g.col-1,c=g.col):(d=null,c=0,p=a.offset().left-1-parseInt(a.css("margin-left"),10),u=a.offset().left-1+a.width()-h[0].length*t.opts.tableResizingLimit)):l-n.pageX<=t.opts.tableResizerOffset&&(f=l,m.col<h[m.row].length&&h[m.row][m.col+1]?(p=l-j(m.col,h)+t.opts.tableResizingLimit,u=l+j(m.col+1,h)-t.opts.tableResizingLimit,d=m.col,c=m.col+1):(d=m.col,c=null,p=a.offset().left-1+h[0].length*t.opts.tableResizingLimit,u=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):l-n.pageX<=t.opts.tableResizerOffset?(f=l,g.col>0?(p=l-j(g.col,h)+t.opts.tableResizingLimit,u=l+j(g.col-1,h)-t.opts.tableResizingLimit,d=g.col,c=g.col-1):(d=null,c=0,p=a.offset().left+h[0].length*t.opts.tableResizingLimit,u=o.offset().left-1+o.width()+parseFloat(o.css("padding-left")))):n.pageX-s<=t.opts.tableResizerOffset&&(f=s,m.col<h[m.row].length&&h[m.row][m.col+1]?(p=s-j(m.col+1,h)+t.opts.tableResizingLimit,u=s+j(m.col,h)-t.opts.tableResizingLimit,d=m.col+1,c=m.col):(d=m.col,c=null,p=o.offset().left+parseFloat(o.css("padding-left")),u=a.offset().left-1+a.width()-h[0].length*t.opts.tableResizingLimit)),se||K(),se.data("table",a),se.data("first",d),se.data("second",c),se.data("instance",t),t.$wp.append(se);var b=f-t.win.pageXOffset-t.opts.tableResizerOffset,C=v-t.win.pageYOffset;t.opts.iframe&&(b+=t.$iframe.offset().left-t.helpers.scrollLeft(),C+=t.$iframe.offset().top-t.helpers.scrollTop(),p+=t.$iframe.offset().left,u+=t.$iframe.offset().left),se.data("max-left",p),se.data("max-right",u),se.data("origin",f-t.win.pageXOffset),se.css("top",C),se.css("left",b),se.css("height",E),se.find("div").css("height",E),se.css("padding-left",t.opts.tableResizerOffset),se.css("padding-right",t.opts.tableResizerOffset),se.show()}else t.core.sameInstance(se)&&U()}}function Y(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;le||te(),t.$box.append(le),le.data("instance",t);var i=e(r).find("tr:first"),a=n.pageX,o=0,s=0;t.opts.iframe&&(o+=t.$iframe.offset().left-t.helpers.scrollLeft(),s+=t.$iframe.offset().top-t.helpers.scrollTop());var l;i.find("th, td").each(function(){var n=e(this);return n.offset().left<=a&&a<n.offset().left+n.outerWidth()/2?(l=parseInt(le.find("a").css("width"),10),le.css("top",s+n.offset().top-t.win.pageYOffset-l-5),le.css("left",o+n.offset().left-t.win.pageXOffset-l/2),le.data("selected-cell",n),le.data("position","before"),le.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=a&&a<n.offset().left+n.outerWidth()?(l=parseInt(le.find("a").css("width"),10),le.css("top",s+n.offset().top-t.win.pageYOffset-l-5),le.css("left",o+n.offset().left+n.outerWidth()-t.win.pageXOffset-l/2),le.data("selected-cell",n),le.data("position","after"),le.addClass("fr-visible"),!1):void 0})}function z(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;le||te(),t.$box.append(le),le.data("instance",t);var i=e(r),a=n.pageY,o=0,s=0;t.opts.iframe&&(o+=t.$iframe.offset().left-t.helpers.scrollLeft(),s+=t.$iframe.offset().top-t.helpers.scrollTop());var l;i.find("tr").each(function(){var n=e(this);return n.offset().top<=a&&a<n.offset().top+n.outerHeight()/2?(l=parseInt(le.find("a").css("width"),10),le.css("top",s+n.offset().top-t.win.pageYOffset-l/2),le.css("left",o+n.offset().left-t.win.pageXOffset-l-5),le.data("selected-cell",n.find("td:first")),le.data("position","above"),le.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=a&&a<n.offset().top+n.outerHeight()?(l=parseInt(le.find("a").css("width"),10),le.css("top",s+n.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),le.css("left",o+n.offset().left-t.win.pageXOffset-l-5),le.data("selected-cell",n.find("td:first")),le.data("position","below"),le.addClass("fr-visible"),!1):void 0})}function G(n,r){if(0===re().length){var i,a,o;if(r&&("HTML"==r.tagName||"BODY"==r.tagName||t.node.isElement(r)))for(i=1;i<=t.opts.tableInsertHelperOffset;i++){if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+i),e(a).hasClass("fr-tooltip"))return!0;if(a&&("TH"==a.tagName||"TD"==a.tagName||"TABLE"==a.tagName)&&(e(a).parents(".fr-wrapper").length||t.opts.iframe))return Y(n,e(a).closest("table")),!0;if(o=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+i,n.pageY-t.win.pageYOffset),e(o).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(e(o).parents(".fr-wrapper").length||t.opts.iframe))return z(n,e(o).closest("table")),!0}t.core.sameInstance(le)&&W()}}function V(e){pe=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&H(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||G(e,n)}function X(){if(ue){var e=se.data("table").offset().top-t.win.pageYOffset;t.opts.iframe&&(e+=t.$iframe.offset().top-t.helpers.scrollTop()),se.css("top",e)}}function q(){var n=se.data("origin"),r=se.data("release-position");if(n!==r){var i=se.data("first"),a=se.data("second"),o=se.data("table"),s=o.outerWidth();if(t.undo.canDo()||t.undo.saveStep(),null!==i&&null!==a){var l,d,c,f=T(o),p=[],u=[],h=[],g=[];for(l=0;l<f.length;l++)d=e(f[l][i]),c=e(f[l][a]),p[l]=d.outerWidth(),h[l]=c.outerWidth(),u[l]=p[l]/s*100,g[l]=h[l]/s*100;for(l=0;l<f.length;l++){d=e(f[l][i]),c=e(f[l][a]);var m=(u[l]*(p[l]+r-n)/p[l]).toFixed(4);d.css("width",m+"%"),c.css("width",(u[l]+g[l]-m).toFixed(4)+"%")}}else{var v,E=o.parent(),b=s/E.width()*100,A=(parseInt(o.css("margin-left"),10)||0)/E.width()*100,S=(parseInt(o.css("margin-right"),10)||0)/E.width()*100;"rtl"==t.opts.direction&&0===a||"rtl"!=t.opts.direction&&0!==a?(v=(s+r-n)/s*b,o.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(A).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==a||"rtl"!=t.opts.direction&&0===a)&&(v=(s-r+n)/s*b,o.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(S).toFixed(4)+"%)")),o.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}se.removeData("origin"),se.removeData("release-position"),se.removeData("first"),se.removeData("second"),se.removeData("table")}function j(t,n){var r,i=e(n[0][t]).outerWidth();for(r=1;r<n.length;r++)i=Math.min(i,e(n[r][t]).outerWidth());return i}function Q(e,t,n){var r,i=0;for(r=e;r<=t;r++)i+=j(r,n);return i}function Z(e){if(re().length>1&&ce&&y(),!1===ce&&!1===de&&!1===ue)pe&&clearTimeout(pe),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(pe=setTimeout(V,30,e));else if(ue){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var r=se.data("max-left"),i=se.data("max-right");n>=r&&n<=i?se.css("left",n-t.opts.tableResizerOffset):n<r&&parseFloat(se.css("left"),10)>r-t.opts.tableResizerOffset?se.css("left",r-t.opts.tableResizerOffset):n>i&&parseFloat(se.css("left"),10)<i-t.opts.tableResizerOffset&&se.css("left",i-t.opts.tableResizerOffset)}else ce&&W()}function J(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function ee(n){if(n.which==e.FE.KEYCODE.TAB){var r;if(re().length>0)r=t.$el.find(".fr-selected-cell:last");else{var i=t.selection.element();"TD"==i.tagName||"TH"==i.tagName?r=e(i):e(i).parentsUntil(t.$el,"td").length>0?r=e(i).parents("td:first"):e(i).parentsUntil(t.$el,"th").length>0&&(r=e(i).parents("th:first"))}if(r)return n.preventDefault(),N(),n.shiftKey?r.prev().length>0?J(r.prev()):r.closest("tr").length>0&&r.closest("tr").prev().length>0?J(r.closest("tr").prev().find("td:last")):r.closest("tbody").length>0&&r.closest("table").find("thead tr").length>0&&J(r.closest("table").find("thead tr th:last")):r.next().length>0?J(r.next()):r.closest("tr").length>0&&r.closest("tr").next().length>0?J(r.closest("tr").next().find("td:first")):r.closest("thead").length>0&&r.closest("table").find("tbody tr").length>0?J(r.closest("table").find("tbody tr td:first")):(r.addClass("fr-selected-cell"),g("below"),R(),J(r.closest("tr").next().find("td:first"))),t.selection.restore(),!1}}function te(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=le.data("selected-cell"),n=le.data("position"),r=le.data("instance")||t;"before"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"after"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"above"==n?(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")):"below"==n&&(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")),W()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){W()},!0),t.events.$on(t.$wp,"scroll",function(){W()},!0)),le=t.shared.$ti_helper,t.events.on("destroy",function(){le=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function ne(){fe=null,clearTimeout(pe)}function re(){return t.el.querySelectorAll(".fr-selected-cell")}function ie(){var n=re();if(n.length){for(var r=n[0];r&&"TABLE"!=r.tagName&&r.parentNode!=t.el;)r=r.parentNode;return e(r&&"TABLE"==r.tagName?r:[])}return e([])}function ae(r){if(r.altKey&&r.which==e.FE.KEYCODE.SPACE){var i,a=t.selection.element();if("TD"==a.tagName||"TH"==a.tagName?i=a:e(a).closest("td").length>0?i=e(a).closest("td").get(0):e(a).closest("th").length>0&&(i=e(a).closest("th").get(0)),i)return r.preventDefault(),w(i,i),n(),!1}}function oe(n){var r=re();if(r.length>0){var i,a,o=T(),s=n.which;1==r.length?(i=r[0],a=i):(i=t.el.querySelector(".fr-cell-fixed"),a=t.el.querySelector(".fr-cell-handler"));var l=A(a,o);if(e.FE.KEYCODE.ARROW_RIGHT==s){if(l.col<o[0].length-1)return w(i,o[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==s){if(l.row<o.length-1)return w(i,o[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==s){if(l.col>0)return w(i,o[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==s&&l.row>0)return w(i,o[l.row-1][l.col]),!1}}var se,le,de,ce,fe,pe,ue;return{_init:function(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){ce=!1,de=!1,ue=!1,t.events.$on(t.$el,"mousedown",I),t.popups.onShow("image.edit",function(){R(),ce=!1,de=!1}),t.popups.onShow("link.edit",function(){R(),ce=!1,de=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&R()}),t.events.$on(t.$el,"mouseenter","th, td",D),t.events.$on(t.$win,"mouseup",k),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",k),t.events.$on(t.$win,"mousemove",Z),t.events.$on(e(t.o_win),"scroll",X),t.events.on("contentChanged",function(){re().length>0&&(n(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),re().length>0&&n()}))}),t.events.$on(e(t.o_win),"resize",function(){R()}),t.events.on("toolbar.esc",function(){if(re().length>0)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(t.$el,"keydown",function(e){e.shiftKey?!1===oe(e)&&setTimeout(function(){n()},0):P(e)}),t.events.on("keydown",function(n){if(!1===ee(n))return!1;var r=re();if(r.length>0){if(r.length>0&&t.keys.ctrlKey(n)&&n.which==e.FE.KEYCODE.A)return R(),t.popups.isVisible("table.edit")&&t.popups.hide("table.edit"),r=[],!0;if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return R(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),r=[],!1;if(r.length>1&&n.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var i=0;i<r.length;i++)e(r[i]).html("<br>"),i==r.length-1&&e(r[i]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),r=[],!1}if(r.length>1&&n.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n))return n.preventDefault(),r=[],!1}else if(r=[],!1===ae(n))return!1},!0);var r=[];t.events.on("html.beforeGet",function(){r=re();for(var e=0;e<r.length;e++)r[e].className=(r[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.afterGet",function(){for(var e=0;e<r.length;e++)r[e].className=(r[e].className?r[e].className.trim()+" ":"")+"fr-selected-cell";r=[]}),a(!0),d(!0)}t.events.on("destroy",ne)},insert:function(n,r){var i,a,o='<table style="width: 100%;"><tbody>',s=100/r;for(i=0;i<n;i++){for(o+="<tr>",a=0;a<r;a++)o+='<td style="width: '+s.toFixed(4)+'%;">',0===i&&0===a&&(o+=e.FE.MARKERS),o+="<br></td>";o+="</tr>"}o+="</tbody></table>",t.html.insert(o),t.selection.restore()},remove:h,insertRow:g,deleteRow:function(){var n=ie();if(n.length>0){var r,i,a,o=T(),s=_(o);if(0===s.min_i&&s.max_i==o.length-1)h();else{for(r=s.max_i;r>=s.min_i;r--){for(a=e(n.find("tr").not(n.find("table tr")).get(r)),i=0;i<o[r].length;i++)if(0===i||o[r][i]!=o[r][i-1]){var l=e(o[r][i]);if(parseInt(l.attr("rowspan"),10)>1){var d=parseInt(l.attr("rowspan"),10)-1;1==d?l.removeAttr("rowspan"):l.attr("rowspan",d)}if(r<o.length-1&&o[r][i]==o[r+1][i]&&(0===r||o[r][i]!=o[r-1][i])){for(var c=o[r][i],f=i;f>0&&o[r][f]==o[r][f-1];)f--;0===f?e(n.find("tr").not(n.find("table tr")).get(r+1)).prepend(c):e(o[r+1][f-1]).after(c)}}var p=a.parent();a.remove(),0===p.find("tr").length&&p.remove(),o=T(n)}b(0,o.length-1,0,o[0].length-1,n),s.min_i>0?t.selection.setAtEnd(o[s.min_i-1][0]):t.selection.setAtEnd(o[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}},insertColumn:function(r){var i=ie();if(i.length>0){var a,o=T(),s=_(o);a="before"==r?s.min_j:s.max_j;var l,d=100/o[0].length,c=100/(o[0].length+1);i.find("th, td").each(function(){(l=e(this)).data("old-width",l.outerWidth()/i.outerWidth()*100)}),i.find("tr").not(i.find("table tr")).each(function(t){for(var n,i=e(this),s=0,l=0;s-1<a;){if(!(n=i.find("> th, > td").get(l))){n=null;break}n==o[t][s]?(s+=parseInt(e(n).attr("colspan"),10)||1,l++):(s+=parseInt(e(o[t][s]).attr("colspan"),10)||1,"after"==r&&(n=0===l?-1:i.find("> th, > td").get(l-1)))}var f=e(n);if("after"==r&&s-1>a||"before"==r&&a>0&&o[t][a]==o[t][a-1]){if(0===t||t>0&&o[t][a]!=o[t-1][a]){var p=parseInt(f.attr("colspan"),10)+1;f.attr("colspan",p),f.css("width",(f.data("old-width")*c/d+c).toFixed(4)+"%"),f.removeData("old-width")}}else{var u;u=i.find("th").length>0?'<th style="width: '+c.toFixed(4)+'%;"><br></th>':'<td style="width: '+c.toFixed(4)+'%;"><br></td>',-1==n?i.prepend(u):null==n?i.append(u):"before"==r?f.before(u):"after"==r&&f.after(u)}}),i.find("th, td").each(function(){(l=e(this)).data("old-width")&&(l.css("width",(l.data("old-width")*c/d).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&n()}},deleteColumn:function(){var n=ie();if(n.length>0){var r,i,a,o=T(),s=_(o);if(0===s.min_j&&s.max_j==o[0].length-1)h();else{var l=100/o[0].length,d=100/(o[0].length-s.max_j+s.min_j-1);for(n.find("th, td").each(function(){(a=e(this)).hasClass("fr-selected-cell")||a.data("old-width",a.outerWidth()/n.outerWidth()*100)}),i=s.max_j;i>=s.min_j;i--)for(r=0;r<o.length;r++)if(0===r||o[r][i]!=o[r-1][i])if(a=e(o[r][i]),(parseInt(a.attr("colspan"),10)||1)>1){var c=parseInt(a.attr("colspan"),10)-1;1==c?a.removeAttr("colspan"):a.attr("colspan",c),a.css("width",((a.data("old-width")-j(i,o))*d/l).toFixed(4)+"%"),a.removeData("old-width")}else{var f=e(a.parent().get(0));a.remove(),0===f.find("> th, > td").length&&(0===f.prev().length||0===f.next().length||f.prev().find("> th[rowspan], > td[rowspan]").length<f.prev().find("> th, > td").length)&&f.remove()}b(0,o.length-1,0,o[0].length-1,n),s.min_j>0?t.selection.setAtEnd(o[s.min_i][s.min_j-1]):t.selection.setAtEnd(o[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){(a=e(this)).data("old-width")&&(a.css("width",(a.data("old-width")*d/l).toFixed(4)+"%"),a.removeData("old-width"))})}}},mergeCells:function(){if(re().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){C();var r,i,a=_(T()),o=t.$el.find(".fr-selected-cell"),s=e(o[0]),l=s.parent().find(".fr-selected-cell"),d=s.closest("table"),c=s.html(),f=0;for(r=0;r<l.length;r++)f+=e(l[r]).outerWidth();for(s.css("width",(f/d.outerWidth()*100).toFixed(4)+"%"),a.min_j<a.max_j&&s.attr("colspan",a.max_j-a.min_j+1),a.min_i<a.max_i&&s.attr("rowspan",a.max_i-a.min_i+1),r=1;r<o.length;r++)"<br>"!=(i=e(o[r])).html()&&""!==i.html()&&(c+="<br>"+i.html()),i.remove();s.html(c),t.selection.setAtEnd(s.get(0)),t.selection.restore(),t.toolbar.enable(),v(a.min_i,a.max_i,d);var p=d.find("tr:empty");for(r=p.length-1;r>=0;r--)e(p[r]).remove();m(a.min_j,a.max_j,d),n()}},splitCellVertically:function(){if(1==re().length){var n=t.$el.find(".fr-selected-cell"),r=parseInt(n.attr("colspan"),10)||1,i=n.parent().outerWidth(),a=n.outerWidth(),o=n.clone().html("<br>"),s=T(),l=A(n.get(0),s);if(r>1){var d=Math.ceil(r/2);a=Q(l.col,l.col+d-1,s)/i*100;var c=Q(l.col+d,l.col+r-1,s)/i*100;d>1?n.attr("colspan",d):n.removeAttr("colspan"),r-d>1?o.attr("colspan",r-d):o.removeAttr("colspan"),n.css("width",a.toFixed(4)+"%"),o.css("width",c.toFixed(4)+"%")}else{var f;for(f=0;f<s.length;f++)if(0===f||s[f][l.col]!=s[f-1][l.col]){var p=e(s[f][l.col]);if(!p.is(n)){var u=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",u)}}a=a/i*100/2,n.css("width",a.toFixed(4)+"%"),o.css("width",a.toFixed(4)+"%")}n.after(o),R(),t.popups.hide("table.edit")}},splitCellHorizontally:function(){if(1==re().length){var n=t.$el.find(".fr-selected-cell"),r=n.parent(),i=n.closest("table"),a=parseInt(n.attr("rowspan"),10),o=T(),s=A(n.get(0),o),l=n.clone().html("<br>");if(a>1){var d=Math.ceil(a/2);d>1?n.attr("rowspan",d):n.removeAttr("rowspan"),a-d>1?l.attr("rowspan",a-d):l.removeAttr("rowspan");for(var c=s.row+d,f=0===s.col?s.col:s.col-1;f>=0&&(o[c][f]==o[c][f-1]||c>0&&o[c][f]==o[c-1][f]);)f--;-1==f?e(i.find("tr").not(i.find("table tr")).get(c)).prepend(l):e(o[c][f]).after(l)}else{var p,u=e("<tr>").append(l);for(p=0;p<o[0].length;p++)if(0===p||o[s.row][p]!=o[s.row][p-1]){var h=e(o[s.row][p]);h.is(n)||h.attr("rowspan",(parseInt(h.attr("rowspan"),10)||1)+1)}r.after(u)}R(),t.popups.hide("table.edit")}},addHeader:function(){var t=ie();if(t.length>0&&0===t.find("th").length){var r,i="<thead><tr>",a=0;for(t.find("tr:first > td").each(function(){var t=e(this);a+=parseInt(t.attr("colspan"),10)||1}),r=0;r<a;r++)i+="<th><br></th>";i+="</tr></thead>",t.prepend(i),n()}},removeHeader:function(){var e=ie(),r=e.find("thead");if(r.length>0)if(0===e.find("tbody tr").length)h();else if(r.remove(),re().length>0)n();else{t.popups.hide("table.edit");var i=e.find("tbody tr:first td:first").get(0);i&&(t.selection.setAtEnd(i),t.selection.restore())}},setBackground:function(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=a()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",r,i,e.outerHeight())}},showEditPopup:n,showColorsPopup:r,back:function(){re().length>0?n():(t.popups.hide("table.insert"),t.toolbar.showInline())},verticalAlign:function(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)},horizontalAlign:function(e){t.$el.find(".fr-selected-cell").css("text-align",e)},applyStyle:function(e,t,n,r){if(t.length>0){if(!n){var i=Object.keys(r);i.splice(i.indexOf(e),1),t.removeClass(i.join(" "))}t.toggleClass(e)}},selectedTable:ie,selectedCells:re}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below",delete:"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableRows.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after",delete:"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableColumns.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCells.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell").closest("table");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+r.toLowerCase()+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(r)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell:first");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.URLRegEx="(^| |\\u00A0)("+e.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}))$",e.FE.PLUGINS.url=function(t){function n(n,r,i){var a=i;return t.opts.linkConvertEmailAddress&&e.FE.MAIL_REGEX.test(a)&&!/^mailto:.*/i.test(a)&&(a="mailto:"+a),/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(a)||(a="//"+a),(r||"")+"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(s?' rel="'+s+'"':"")+' href="'+a+'">'+i+"</a>"}function r(){return new RegExp(e.FE.URLRegEx,"gi")}function i(e){return t.opts.linkAlwaysNoFollow&&(s="nofollow"),t.opts.linkAlwaysBlank&&(s?s+=" noopener noreferrer":s="noopener noreferrer"),e.replace(r(),n)}function a(e){return!!e&&("A"===e.tagName||!(!e.parentNode||e.parentNode==t.el)&&a(e.parentNode))}function o(){var n=t.selection.ranges(0).startContainer;if(!n||n.nodeType!==Node.TEXT_NODE)return!1;if(a(n))return!1;if(r().test(n.textContent))e(n).before(i(n.textContent)),n.parentNode.removeChild(n);else if(n.previousSibling&&"A"===n.previousSibling.tagName){var o=n.previousSibling.innerText+n.textContent;r().test(o)&&(e(n.previousSibling).replaceWith(i(o)),n.parentNode.removeChild(n))}}var s=null;return{_init:function(){t.events.on("paste.afterCleanup",function(t){if(new RegExp(e.FE.URLRegEx,"gi").test(t))return i(t)}),t.events.on("keydown",function(n){var r=n.which;!t.selection.isCollapsed()||r!=e.FE.KEYCODE.ENTER&&r!=e.FE.KEYCODE.SPACE&&r!=e.FE.KEYCODE.PERIOD||o()},!0)}}},e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"//play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var n=e.find(".fr-video-embed-layer textarea");n.val("").trigger("change"),(n=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function r(){var e=t.popups.get("video.edit");if(e||(e=B()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var n=J.find("iframe, embed, video"),r=n.offset().left+n.outerWidth()/2,i=n.offset().top+n.outerHeight();t.popups.show("video.edit",r,i,n.outerHeight())}}function i(e){if(e)return t.popups.onRefresh("video.insert",n),t.popups.onHide("image.insert",Y),!0;var r="";t.opts.videoInsertButtons.length>1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var i,a="",o=t.opts.videoInsertButtons.indexOf("videoUpload"),s=t.opts.videoInsertButtons.indexOf("videoByURL"),l=t.opts.videoInsertButtons.indexOf("videoEmbed");s>=0&&(i=" fr-active",(s>o&&o>=0||s>l&&l>=0)&&(i=""),a='<div class="fr-video-by-url-layer fr-layer'+i+'" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d="";l>=0&&(i=" fr-active",(l>o&&o>=0||l>s&&s>=0)&&(i=""),d='<div class="fr-video-embed-layer fr-layer'+i+'" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var c="";o>=0&&(i=" fr-active",(o>l&&l>=0||o>s&&s>=0)&&(i=""),c='<div class="fr-video-upload-layer fr-layer'+i+'" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var f={buttons:r,by_url_layer:a,embed_layer:d,upload_layer:c,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},p=t.popups.create("video.insert",f);return F(p),p}function a(e){t.events.focus(!0),t.selection.restore();var n=!1;J&&(H(),n=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var r=t.$el.find(".fr-jiv");r.removeClass("fr-jiv"),z(r,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),r.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(n?"video.replaced":"video.inserted",[r])}function o(){var n=e(this);t.popups.hide("video.insert"),n.removeClass("fr-uploading"),n.parent().next().is("br")&&n.parent().next().remove(),p(n.parent()),t.events.trigger("video.loaded",[n.parent()])}function s(e,n,r,i,a){t.edit.off(),c("Loading video"),n&&(e=t.helpers.sanitizeURL(e));l("Loading video"),function(){var n,s;if(i){t.undo.canDo()||i.find("video").hasClass("fr-uploading")||t.undo.saveStep();var l=i.find("video").data("fr-old-src"),d=i.data("fr-replaced");i.data("fr-replaced",!1),t.$wp?((n=i.clone()).find("video").removeData("fr-old-src").removeClass("fr-uploading"),n.find("video").off("canplay"),l&&i.find("video").attr("src",l),i.replaceWith(n)):n=i;for(var c=n.find("video").get(0).attributes,f=0;f<c.length;f++){var p=c[f];0===p.nodeName.indexOf("data-")&&n.find("video").removeAttr(p.nodeName)}if(void 0!==r)for(s in r)r.hasOwnProperty(s)&&"link"!=s&&n.find("video").attr("data-"+s,r[s]);n.find("video").on("canplay",o),n.find("video").attr("src",e),t.edit.on(),_(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(d?"video.replaced":"video.inserted",[n,a])}else n=b(e,r,o),_(),t.undo.saveStep(),t.events.trigger("video.inserted",[n,a])}()}function l(e){var n=t.popups.get("video.insert");if(n||(n=i()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),J){var r=J.find("video");t.popups.setContainer("video.insert",t.$sc);var a=r.offset().left+r.width()/2,o=r.offset().top+r.height();t.popups.show("video.insert",a,o,r.outerHeight())}void 0===e&&c(t.language.translate("Uploading"),0)}function d(e){var n=t.popups.get("video.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&J){var r=J;w(!0),t.selection.setAfter(r.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function c(e,n){var r=t.popups.get("video.insert");if(r){var i=r.find(".fr-video-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function f(e){l();var n=t.popups.get("video.insert").find(".fr-video-progress-bar-layer");n.addClass("fr-error");var r=n.find("h3");r.text(e),t.events.disableBlur(),r.focus()}function p(e){x.call(e.get(0))}function u(e){try{if(!1===t.events.trigger("video.uploaded",[e],!0))return t.edit.on(),!1;var n=JSON.parse(e);return n.link?n:($(ee,e),!1)}catch(t){return $(ne,e),!1}}function h(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return!1===t.events.trigger("video.uploadedToS3",[r,i,n],!0)?(t.edit.on(),!1):r}catch(e){return $(ne,n),!1}}function g(e){c("Loading video");var n=this.status,r=this.response,i=this.responseXML,a=this.responseText;try{if(t.opts.videoUploadToS3)if(201==n){var o=h(i);o&&s(o,!1,[],e,r||i)}else $(ne,r||i);else if(n>=200&&n<300){var l=u(a);l&&s(l.link,!1,l,e,r||a)}else $(te,r||a)}catch(e){$(ne,r||a)}}function m(){$(ne,this.response||this.responseText||this.responseXML)}function v(e){if(e.lengthComputable){var n=e.loaded/e.total*100|0;c(t.language.translate("Uploading"),n)}}function E(){t.edit.on(),d(!0)}function b(n,r,i){var a,o="";if(r&&void 0!==r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&(o+=" data-"+a+'="'+r[a]+'"');var s=t.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var l=e('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'"><video src="'+n+'" '+o+(s?' style="width: '+s+';" ':"")+" controls>"+t.language.translate("Your browser does not support HTML5 video.")+"</video></span>");l.toggleClass("fr-draggable",t.opts.videoMove),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert();var d=t.$el.find(".fr-marker");return t.node.isLastSibling(d)&&d.parent().hasClass("fr-deletable")&&d.insertAfter(d.parent()),d.replaceWith(l),t.html.wrap(),t.selection.clear(),l.find("video").get(0).readyState>l.find("video").get(0).HAVE_FUTURE_DATA||t.helpers.isIOS()?i.call(l.find("video").get(0)):l.find("video").on("canplaythrough load",i),l}function T(n){if(!t.core.sameInstance(Z))return!0;n.preventDefault(),n.stopPropagation();var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),i=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);if(!r||!i)return!1;if("mousedown"==n.type){var a=t.$oel.get(0).ownerDocument,o=a.defaultView||a.parentWindow,s=!1;try{s=o.location!=o.parent.location}catch(e){}s&&o.frameElement&&(r+=t.helpers.getPX(e(o.frameElement).offset().left)+o.frameElement.clientLeft,i=n.clientY+t.helpers.getPX(e(o.frameElement).offset().top)+o.frameElement.clientTop)}t.undo.canDo()||t.undo.saveStep(),(Q=e(this)).data("start-x",r),Q.data("start-y",i),j.show(),t.popups.hideAll(),N()}function A(e){if(!t.core.sameInstance(Z))return!0;if(Q){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),r=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!r)return!1;var i=Q.data("start-x"),a=Q.data("start-y");Q.data("start-x",n),Q.data("start-y",r);var o=n-i,s=r-a,l=J.find("iframe, embed, video"),d=l.width(),c=l.height();(Q.hasClass("fr-hnw")||Q.hasClass("fr-hsw"))&&(o=0-o),(Q.hasClass("fr-hnw")||Q.hasClass("fr-hne"))&&(s=0-s),l.css("width",d+o),l.css("height",c+s),l.removeAttr("width"),l.removeAttr("height"),L()}}function S(e){if(!t.core.sameInstance(Z))return!0;Q&&J&&(e&&e.stopPropagation(),Q=null,j.hide(),L(),r(),t.undo.saveStep())}function C(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function R(e,t,n,r){return e.pageX=t,e.pageY=t,T.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,r)),A.call(this,e),S.call(this,e),++r}function y(){var n;if(t.shared.$video_resizer?(Z=t.shared.$video_resizer,j=t.shared.$vid_overlay,t.events.on("destroy",function(){Z.removeClass("fr-active").appendTo(e("body:first"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),Z=t.shared.$video_resizer,t.events.$on(Z,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(Z.append(C("nw")+C("ne")+C("sw")+C("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),j=t.shared.$vid_overlay,n=Z.get(0).ownerDocument,e(n).find("body:first").append(j))),t.events.on("shared.destroy",function(){Z.html("").removeData().remove(),Z=null,t.opts.videoResize&&(j.remove(),j=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){w(!0)}),t.opts.videoResize){n=Z.get(0).ownerDocument,t.events.$on(Z,t._mousedown,".fr-handler",T),t.events.$on(e(n),t._mousemove,A),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,S),t.events.$on(j,"mouseleave",S);var r=1,i=null,a=0;t.events.on("keydown",function(n){if(J){var o=-1!=navigator.userAgent.indexOf("Mac OS X")?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-a>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&o&&!n.altKey?r=R.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&o&&!n.altKey&&(r=R.call(this,n,2,-1,r)),i=s,a=n.timeStamp}}),t.events.on("keyup",function(){r=1})}}function _(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("video")),i=[];for(n=0;n<r.length;n++)i.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.videoMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(oe)for(n=0;n<oe.length;n++)i.indexOf(oe[n].getAttribute("src"))<0&&t.events.trigger("video.removed",[e(oe[n])]);oe=r}function L(){Z||y(),(t.$wp||t.$sc).append(Z),Z.data("instance",t);var e=J.find("iframe, embed, video");Z.css("top",(t.opts.iframe?e.offset().top-1:e.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?e.offset().left-1:e.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function x(n){if(n&&"touchend"==n.type&&se)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),J=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),q(),L(),r(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function w(e){J&&(I()||!0===e)&&(Z.removeClass("fr-active"),t.toolbar.enable(),J.removeClass("fr-active"),J=null,N())}function O(){t.shared.vid_exit_flag=!0}function N(){t.shared.vid_exit_flag=!1}function I(){return t.shared.vid_exit_flag}function k(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var a=r.files[0];if(a&&a.type&&-1!==a.type.indexOf("video")){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var o=t.popups.get("video.insert");return o||(o=i()),t.popups.setContainer("video.insert",t.$sc),t.popups.show("video.insert",n.originalEvent.pageX,n.originalEvent.pageY),l(),t.opts.videoAllowedTypes.indexOf(a.type.replace(/video\//g,""))>=0?D(r.files):$(ie),n.preventDefault(),n.stopPropagation(),!1}}}function D(e){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("video.beforeUpload",[e]))return!1;var n=e[0];if(n.size>t.opts.videoMaxSize)return $(re),!1;if(t.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return $(ie),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var i;if(!1!==t.opts.videoUploadToS3){r.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(i in t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadToS3.params[i])}for(i in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadParams[i]);r.append(t.opts.videoUploadParam,n);var a=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(a=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var o=t.core.getXHR(a,t.opts.videoUploadMethod);o.onload=function(){g.call(o,J)},o.onerror=m,o.upload.onprogress=v,o.onabort=E,l(),t.events.disableBlur(),t.edit.off(),t.events.enableBlur();var s=t.popups.get("video.insert");s&&s.off("abortUpload").on("abortUpload",function(){4!=o.readyState&&o.abort()}),o.send(r)}}}function F(n){t.events.$on(n,"dragover dragenter",".fr-video-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-video-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-video-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var a=n.data("instance")||t;a.events.disableBlur(),a.video.upload(i.files),a.events.enableBlur()}}),t.helpers.isIOS()&&t.events.$on(n,"touchend",'.fr-video-upload-layer input[type="file"]',function(){e(this).trigger("click")}),t.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.video.upload(this.files)}e(this).val("")})}function M(){t.events.on("drop",k,!0),t.events.on("mousedown window.mousedown",O),t.events.on("window.touchmove",N),t.events.on("mouseup window.mouseup",w),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&w()}),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){w(!0)})}function $(e,n){t.edit.on(),J&&J.find("video").addClass("fr-error"),f(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:ae[e]},n])}function B(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons);var n={buttons:e+="</div>"},r=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",function(){J&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),p(J))}),r}return!1}function P(){if(J){var e=t.popups.get("video.size"),n=J.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function K(e){if(e)return t.popups.onRefresh("video.size",P),!0;var n="",r="",i={buttons:n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>",size_layer:r='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>"},a=t.popups.create("video.size",i);return t.events.$on(t.$wp,"scroll",function(){J&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),p(J))}),a}function U(e){if(void 0===e&&(e=J),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function W(e){void 0===e&&(e=J);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function H(){if(J&&!1!==t.events.trigger("video.beforeRemove",[J])){var e=J;t.popups.hideAll(),w(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function Y(){d()}function z(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+r[0]+" fr-dv"+n[0])):"inline"==n?(e.css({display:"inline-block"}),"center"==r?e.css({float:"none"}):"left"==r?e.css({float:"left"}):e.css({float:"right"})):(e.css({display:"block",clear:"both"}),"left"==r?e.css({textAlign:"left"}):"right"==r?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function G(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fv"+U(e)[0]),e.addClass("fr-dv"+W(e)[0]))}function V(e){z(e,e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":U(e)),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function X(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),r=0;r<e.FE.VIDEO_PROVIDERS.length;r++){var i=e.FE.VIDEO_PROVIDERS[r];if(i.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(i.provider))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video, video"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?(G(i),t.opts.videoTextNear||i.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||V(i)}n.toggleClass("fr-draggable",t.opts.videoMove)}function q(){if(J){t.selection.clear();var e=t.doc.createRange();e.selectNode(J.get(0)),t.selection.get().addRange(e)}}var j,Q,Z,J,ee=2,te=3,ne=4,re=5,ie=6,ae={};ae[1]="Video cannot be loaded from the passed link.",ae[ee]="No link in upload response.",ae[te]="Error during file upload.",ae[ne]="Parsing response failed.",ae[re]="File is too large.",ae[ie]="Video file type is invalid.",ae[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var oe,se;return t.shared.vid_exit_flag=!1,{_init:function(){M(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){se=!1}),t.events.$on(t.$el,"touchmove",function(){se=!0})),t.events.on("html.set",X),X(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",x),t.events.on("keydown",function(n){var r=n.which;return!J||r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.DELETE?J&&r==e.FE.KEYCODE.ESC?(w(!0),n.preventDefault(),!1):J&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),H(),!1)},!0),t.events.on("toolbar.esc",function(){if(J)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("toolbar.focusEditor",function(){if(J)return!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),i(!0),K(!0)},showInsertPopup:function(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=i()),d(),!n.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,a=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",r,a,e.outerHeight())}},showLayer:function(e){var n,r,i=t.popups.get("video.insert");if(!J&&!t.opts.toolbarInline){var a=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=a.offset().left+a.outerWidth()/2,r=a.offset().top+(t.opts.toolbarBottom?10:a.outerHeight()-10)}t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,r,0),t.accessibility.focusPopup(i)},refreshByURLButton:function(e){t.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshEmbedButton:function(e){t.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshUploadButton:function(e){t.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:D,insertByURL:function(n){void 0===n&&(n=t.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"");var r=null;if(t.helpers.isURL(n))for(var i=0;i<e.FE.VIDEO_PROVIDERS.length;i++){var o=e.FE.VIDEO_PROVIDERS[i];if(o.test_regex.test(n)&&new RegExp(t.opts.videoAllowedProviders.join("|")).test(o.provider)){r=n.replace(o.url_regex,o.url_text),r=o.html.replace(/\{url\}/,r);break}}r?a(r):t.events.trigger("video.linkError",[n])},insertEmbed:function(n){void 0===n&&(n=t.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?a(n):t.events.trigger("video.codeError",[n])},insert:a,align:function(e){J.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?J.addClass("fr-fvl"):"right"==e&&J.addClass("fr-fvr"):z(J,W(),e),q(),L(),r(),t.selection.clear()},refreshAlign:function(e){if(!J)return!1;e.find("> *:first").replaceWith(t.icon.create("video-align-"+U()))},refreshAlignOnShow:function(e,t){J&&t.find('.fr-command[data-param1="'+U()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(e){J.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?J.addClass("fr-dvi"):"block"==e&&J.addClass("fr-dvb"):z(J,e,U()),q(),L(),r(),t.selection.clear()},refreshDisplayOnShow:function(e,t){J&&t.find('.fr-command[data-param1="'+W()+'"]').addClass("fr-active").attr("aria-selected",!0)},remove:H,hideProgressBar:d,showSizePopup:function(){var e=t.popups.get("video.size");e||(e=K()),d(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var n=J.find("iframe, embed, video"),r=n.offset().left+n.width()/2,i=n.offset().top+n.height();t.popups.show("video.size",r,i,n.height())},replace:function(){var e=t.popups.get("video.insert");e||(e=i()),t.popups.isVisible("video.insert")||(d(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var n=J.offset().left+J.width()/2,r=J.offset().top+J.height();t.popups.show("video.insert",n,r,J.outerHeight())},back:function(){J?(t.events.disableBlur(),J.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())},setSize:function(e,n){if(J){var r=t.popups.get("video.size"),i=J.find("iframe, embed, video");i.css("width",e||r.find('input[name="width"]').val()),i.css("height",n||r.find('input[name="height"]').val()),i.get(0).style.width&&i.removeAttr("width"),i.get(0).style.height&&i.removeAttr("height"),r.find("input:focus").blur(),setTimeout(function(){J.trigger("click")},t.helpers.isAndroid()?50:0)}},get:function(){return J}}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.DefineIcon("videoUpload",{NAME:"upload"}),e.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("video-align",{NAME:"align-left"}),e.FE.DefineIcon("video-align-left",{NAME:"align-left"}),e.FE.DefineIcon("video-align-right",{NAME:"align-right"}),e.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.videoAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("video-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoReplace",{NAME:"exchange"}),e.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),e.extend(e.FE.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom"],wordPasteModal:!0}),e.FE.PLUGINS.wordPaste=function(t){function n(){var e='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return e+='<p style="text-align: left;">'+t.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",e+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+t.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+t.language.translate("Keep")+"</button></div>",e+="</div>"}function r(){if(!R){var r='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+t.language.translate("Word Paste Detected")+"</h4>",i=n(),a=t.modals.create(_,r,i),o=a.$body;R=a.$modal,a.$modal.addClass("fr-middle"),t.events.bindClick(o,"button.fr-remove-word",function(){(R.data("instance")||t).wordPaste.clean()}),t.events.bindClick(o,"button.fr-keep-word",function(){(R.data("instance")||t).wordPaste.clean(!0)}),t.events.$on(e(t.o_win),"resize",function(){t.modals.resize(_)})}t.modals.show(_),t.modals.resize(_)}function i(){t.modals.hide(_)}function a(e){var n=t.opts.wordAllowedStyleProps;e||(t.opts.wordAllowedStyleProps=[]),0===(y=y.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(y="<table>"+y+"</table>"),y=C(y,t.paste.getRtfClipboard()),y=t.paste.removeEmptyTags(y),i(),t.paste.clean(y,!0,!0),t.opts.wordAllowedStyleProps=n}function o(e){e.parentNode&&e.parentNode.removeChild(e)}function s(e,t){if(t(e))for(var n=e.firstChild;n;){var r=n,i=n.previousSibling;n=n.nextSibling,s(r,t),r.previousSibling||r.nextSibling||r.parentNode||!n||i==n.previousSibling||!n.parentNode?r.previousSibling||r.nextSibling||r.parentNode||!n||n.previousSibling||n.nextSibling||n.parentNode||(i?n=i.nextSibling?i.nextSibling.nextSibling:null:e.firstChild&&(n=e.firstChild.nextSibling)):n=i?i.nextSibling:e.firstChild}}function l(e){return e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("style")&&-1!=e.getAttribute("style").replace(/\n/gi,"").indexOf("mso-list:Ignore")}function d(e){if(!e.getAttribute("style")||!/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi,"")))return!1;try{var t=e.firstElementChild.firstElementChild,n=t.firstElementChild?t.firstElementChild:null;if(!l(t)&&!l(n))return!1}catch(e){return!1}return!0}function c(e){return e.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1")}function f(e,t){var n=e.cloneNode(!0);if(n.firstElementChild&&"A"==n.firstElementChild.tagName&&(n=n.firstElementChild),o(n.firstElementChild),-1!=["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName)){var r=document.createElement(e.tagName.toLowerCase());r.setAttribute("style",e.getAttribute("style")),r.innerHTML=n.innerHTML,n.innerHTML=r.outerHTML}s(n,function(e){return e.nodeType==Node.ELEMENT_NODE&&A(e,t),!0});var i=n.innerHTML;return i=i.replace(/<!--[\s\S]*?-->/gi,"")}function p(e,t){var n=/[0-9a-zA-Z]./gi,r=!1;e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstChild&&!(r=r||n.test(e.firstElementChild.firstElementChild.firstChild.data))&&e.firstElementChild.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstElementChild.firstChild&&(r=r||n.test(e.firstElementChild.firstElementChild.firstElementChild.firstChild.data));var i=r?"ol":"ul",a=c(e),s="<"+i+"><li>"+f(e,t),l=e.nextElementSibling,u=e.parentNode;for(o(e),e=null;l&&d(l);){var h=l.previousElementSibling,g=c(l);if(g>a)s+=p(l,t).outerHTML;else{if(g<a)break;s+="</li><li>"+f(l,t)}if(a=g,l.previousElementSibling||l.nextElementSibling||l.parentNode){var m=l;l=l.nextElementSibling,o(m),m=null}else l=h?h.nextElementSibling:u.firstElementChild}s+="</li></"+i+">";var v=document.createElement("div");return v.innerHTML=s,v.firstElementChild}function u(e,t){for(var n=document.createElement(t),r=0;r<e.attributes.length;r++){var i=e.attributes[r].name;n.setAttribute(i,e.getAttribute(i))}return n.innerHTML=e.innerHTML,e.parentNode.replaceChild(n,e),n}function h(n,r){t.node.clearAttributes(n);for(var i=n.firstElementChild,a=0,s=!1,l=null;i;){i.firstElementChild&&-1!=i.firstElementChild.tagName.indexOf("W:")&&(i.innerHTML=i.firstElementChild.innerHTML),(l=i.getAttribute("width"))||s||(s=!0),a+=parseInt(l,10),(!i.firstChild||i.firstChild&&i.firstChild.data==e.FE.UNICODE_NBSP)&&(i.firstChild&&o(i.firstChild),i.innerHTML="<br>");for(var c=i.firstElementChild,f=1==i.children.length;c;){if("P"==c.tagName&&!d(c)){var p=null;1==c.children.length&&c.firstElementChild&&"SPAN"==c.firstElementChild.tagName?'<span lang="EN-US">'===t.node.openTagString(c.firstElementChild)?c.firstElementChild.outerHTML=c.firstElementChild.innerHTML:(p=c.firstElementChild,f||(p=u(p,"div")),f?v(i,c.getAttribute("style")):v(p,c.getAttribute("style")),i.replaceChild(p,c)):(p=u(c,f?"span":"div"),!f&&p.getAttribute("align")&&p.removeAttribute("align")),p&&(c=p),f&&g(c)}c=c.nextElementSibling}if(r){var h=i.getAttribute("class");if(h){var E=(h=m(h)).match(/xl[0-9]+/gi);if(E){var b="."+E[0];r[b]&&v(i,r[b])}}r.td&&v(i,r.td)}var T=i.getAttribute("style");T&&(T=m(T))&&";"!=T.slice(-1)&&(T+=";");var A=i.getAttribute("valign");if(!A&&T){var S=T.match(/vertical-align:.+?[; "]{1,1}/gi);S&&(A=S[S.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var C=null;if(T){var R=T.match(/text-align:.+?[; "]{1,1}/gi);R&&(C=R[R.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"==C&&(C=null)}var y=null;if(T){var _=T.match(/background:.+?[; "]{1,1}/gi);_&&(y=_[_.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var L=i.getAttribute("colspan"),x=i.getAttribute("rowspan");L&&i.setAttribute("colspan",L),x&&i.setAttribute("rowspan",x),A&&(i.style["vertical-align"]=A),C&&(i.style["text-align"]=C),y&&(i.style["background-color"]=y),l&&i.setAttribute("width",l),i=i.nextElementSibling}for(i=n.firstElementChild;i;)l=i.getAttribute("width"),s?i.removeAttribute("width"):i.setAttribute("width",100*parseInt(l,10)/a+"%"),i=i.nextElementSibling}function g(e){var t=e.parentNode,n=e.getAttribute("align");n&&(t&&"TD"==t.tagName?(t.setAttribute("style",t.getAttribute("style")+"text-align:"+n+";"),e.removeAttribute("align")):(e.style["text-align"]=n,e.removeAttribute("align")))}function m(e){return e.replace(/\n|\r|\n\r|&quot;/g,"")}function v(e,t,n){if(t){var r=e.getAttribute("style");r&&";"!=r.slice(-1)&&(r+=";"),t&&";"!=t.slice(-1)&&(t+=";"),t=t.replace(/\n/gi,"");var i=null;i=n?(r||"")+t:t+(r||""),e.setAttribute("style",i)}}function E(e){var t=e.getAttribute("style");if(t){(t=m(t))&&";"!=t.slice(-1)&&(t+=";");var n=t.match(/(^|\S+?):.+?;{1,1}/gi);if(n){for(var r={},i=0;i<n.length;i++){var a=n[i].split(":");2==a.length&&("text-align"==a[0]&&"SPAN"==e.tagName||(r[a[0]]=a[1]))}var o="";for(var s in r)if(r.hasOwnProperty(s)){if("font-size"==s&&"pt;"==r[s].slice(-3)){var l=null;try{l=parseFloat(r[s].slice(0,-3),10)}catch(e){}l&&(l=Math.round(1.33*l),r[s]=l+"px;")}o+=s+":"+r[s]}o&&e.setAttribute("style",o)}}}function b(e){for(var t=e.match(/[0-9a-f]{2}/gi),n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(parseInt(t[r],16)));var i=n.join("");return btoa(i)}function T(e,t){if(t){var n=e.getAttribute("src");if(n&&-1!=n.indexOf("file://")){var r=e.getAttribute("v:shapes");if(r){if(/^[a-zA-Z]+_/gi.test(r)&&e.previousSibling){var i=e.previousSibling.previousSibling;if(!i)return;var a=i.data.split('o:spid="');if(2!=a.length)return;if((a=a[1].split('"')).length<2)return;r=a[0]}var o="hplid"+r.substring(8),s=t.split(o);if(!s||2==s.length){var l=s[1].split("bliptag");if(!(l&&l.length<2)){var d=null;if(-1!=l[0].indexOf("pngblip")?d="image/png":-1!=l[0].indexOf("jpegblip")&&(d="image/jpeg"),d){var c=l[1].split("}");if(!(c&&c.length<2)){var f;if(c.length>2&&-1!=c[0].indexOf("blipuid"))f=c[1].split(" ");else{if((f=c[0].split(" "))&&f.length<2)return;f.shift()}var p="data:"+d+";base64,"+b(f.join(""));e.setAttribute("src",p)}}}}}}}}function A(t,n){var r=t.tagName,i=r.toLowerCase();if(t.firstElementChild&&("I"==t.firstElementChild.tagName?u(t.firstElementChild,"em"):"B"==t.firstElementChild.tagName&&u(t.firstElementChild,"strong")),-1!=["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"].indexOf(r))return o(t),!1;"O:P"==r&&"&nbsp;"==t.innerHTML&&(t.innerHTML=e.FE.INVISIBLE_SPACE);var a=-1,s=["META","LINK","XML","ST1:","O:","W:","FONT"];for(a=0;a<s.length;a++)if(-1!=r.indexOf(s[a]))return t.innerHTML?(t.outerHTML=t.innerHTML,o(t),!1):(o(t),!1);if("TD"!=r){var l=t.getAttribute("class");if(n&&l){var d=(l=m(l)).split(" ");for(a=0;a<d.length;a++){var c=[],f="."+d[a];c.push(f),f=i+f,c.push(f);for(var p=0;p<c.length;p++)n[c[p]]&&v(t,n[c[p]])}}n&&n[i]&&v(t,n[i])}if(-1!=["P","H1","H2","H3","H4","H5","H6","PRE"].indexOf(r)){var E=t.getAttribute("class");if(E&&(n&&n[r.toLowerCase()+"."+E]&&v(t,n[r.toLowerCase()+"."+E]),-1!=E.toLowerCase().indexOf("mso"))){var b=m(E);(b=b.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""))?t.setAttribute("class",b):t.removeAttribute("class")}var T=t.getAttribute("style");if(T){var A=T.match(/text-align:.+?[; "]{1,1}/gi);A&&A[A.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1")}g(t)}if("TR"==r&&h(t,n),"A"==r&&!t.attributes.getNamedItem("href")&&t.innerHTML&&(t.outerHTML=t.innerHTML),"TD"!=r&&"TH"!=r||t.innerHTML||(t.innerHTML="<br>"),"TABLE"==r&&(t.style.width="100%"),t.getAttribute("lang")&&t.removeAttribute("lang"),t.getAttribute("style")&&-1!=t.getAttribute("style").toLowerCase().indexOf("mso")){var S=m(t.getAttribute("style"));(S=S.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""))?t.setAttribute("style",S):t.removeAttribute("style")}return!0}function S(e){var t={},n=e.getElementsByTagName("style");if(n.length){var r=n[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),s=a.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");o=o.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/\n|\r|\n\r/g,""),s=s.replace(/\n|\r|\n\r/g,"");for(var l=o.split(", "),d=0;d<l.length;d++)t[l[d]]=s}}return t}function C(n,r){n=n.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/gi,"$1");var i=(new DOMParser).parseFromString(n,"text/html"),a=i.head,l=i.body,c=S(a);s(l,function(t){if(t.nodeType==Node.TEXT_NODE&&/\n/.test(t.data)){if(!/\S/.test(t.data))return t.data==e.FE.UNICODE_NBSP||(o(t),!1);t.data=t.data.replace(/\n/gi," ")}return!0}),s(l,function(e){return e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.tagName&&T(e,r),!0}),s(l,function(e){if(e.nodeType==Node.TEXT_NODE)return e.data=e.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(e.nodeType==Node.ELEMENT_NODE){if(d(e)){var t=e.parentNode,n=e.previousSibling,r=p(e,c),i=null;return i=n?n.nextSibling:t.firstChild,i?t.insertBefore(r,i):t.appendChild(r),!1}return A(e,c)}return e.nodeType!=Node.COMMENT_NODE||(o(e),!1)}),s(l,function(e){if(e.nodeType==Node.ELEMENT_NODE){var t=e.tagName;if(!e.innerHTML&&-1==["BR","IMG"].indexOf(t)){for(var n=e.parentNode;n&&(o(e),!(e=n).innerHTML);)n=e.parentNode;return!1}E(e)}return!0});var f=l.outerHTML,u=t.opts.htmlAllowedStyleProps;return t.opts.htmlAllowedStyleProps=t.opts.wordAllowedStyleProps,f=t.clean.html(f,t.opts.wordDeniedTags,t.opts.wordDeniedAttrs,!1),t.opts.htmlAllowedStyleProps=u,f}var R,y,_="word_paste";return{_init:function(){t.events.on("paste.wordPaste",function(e){return y=e,t.opts.wordPasteModal?r():a(!0),!1})},clean:a}}});